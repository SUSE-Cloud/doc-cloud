<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><!--Edit status: not edited-->
<section id="install_cli">
   <title>
      <phrase/>Installing the Command-Line Clients</title>
    <para>During the installation, by default, the suite of OpenStack command-line tools are
        installed on the lifecycle manager and the control plane in your environment. This includes
        the OpenStack Command-Line Interface as well as the clients for the individual services such
        as the NovaClient, CinderClient, and SwiftClient. You can learn more about these in the
        OpenStack documentation here: <ulink url="http://docs.openstack.org/cli-reference/">OpenStack Command-Line Interface Reference</ulink>.</para>
   <para>If you wish to install the command-line interfaces on other nodes in your environment,
        there are two methods you can use to do so that we describe below.</para>
    
      <bridgehead renderas="sect4">Installing the CLI tools using the input model</bridgehead>
      <para>During the initial install phase of your cloud you can edit your input model to request
        that the command-line clients be installed on any of the node clusters in your environment.
        To do so, follow these steps:</para>
      <orderedlist>
        <listitem>
            <para>Log in to the lifecycle manager.</para>
         </listitem>
        <listitem>
            <para>Edit your <literal>control_plane.yml</literal> file. Full path:
          </para>
            <screen>~/helion/my_cloud/definition/data/control_plane.yml</screen>
         </listitem>
        <listitem>
            <para>In this file you will see a list of <literal>service-components</literal> to be installed
          on each of your clusters. These clusters will be divided per role, with your controller
          node cluster likely coming at the beginning. Here you will see a list of each of the
          clients that can be installed. These include:
          </para>
            <screen>keystone-client
glance-client
cinder-client
nova-client
neutron-client
swift-client
heat-client
openstack-client
ceilometer-client
monasca-client
barbican-client
designate-client</screen>
         </listitem>
        <listitem>
            <para>For each client you want to install, specify the name under the
            <literal>service-components</literal> section for the cluster you want to install it on.
            </para>
            <para>So, for example, if you'd like to install the Nova and Neutron clients on your
            Compute node cluster, you can do so by adding the <literal>nova-client</literal> and
              <literal>neutron-client</literal> services, like this:</para>
            <screen>      resources:
        - name: compute
          resource-prefix: comp
          server-role: COMPUTE-ROLE
          allocation-policy: any
          min-count: 0
          service-components:
            - ntp-client
            - nova-compute
            - nova-compute-kvm
            - neutron-l3-agent
            - neutron-metadata-agent
            - neutron-openvswitch-agent
            - neutron-lbaasv2-agent
            <emphasis role="bold">- nova-client
            - neutron-client</emphasis>
            </screen>
            <note>
               <para>This example uses the <literal>entry-scale-kvm-vsa</literal> sample file. Your model
            may be different so use this as a guide but do not copy and paste the contents of this
            example into your input model.</para>
            </note>
         </listitem>
        <listitem>
            <para>Commit your configuration to the local git repo, as follows:
          </para>
            <screen>cd ~/helion/hos/ansible
git add -A
git commit -m "My config or other commit message"</screen>
         </listitem>
        <listitem>
            <para>Continue with the rest of your installation.</para>
         </listitem>
      </orderedlist>
   
    
      <bridgehead renderas="sect4">Installing the CLI tools using Ansible</bridgehead>
      <para>At any point after your initial installation you can install the command-line clients on
        any of the nodes in your environment. To do so, follow these steps:</para>
      <orderedlist>
        <listitem>
            <para>Log in to the lifecycle manager.</para>
         </listitem>
        <listitem>
            <para>Obtain the hostname for the nodes you want to install the clients on by looking in your
          hosts file:</para>
            <screen>cat /etc/hosts</screen>
         </listitem>
        <listitem>
            <para>Install the clients using this playbook, specifying your hostnames using commas:</para>
            <screen>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts -e "install_package=&lt;client_name&gt;" client-deploy.yml -e "install_hosts=&lt;hostname&gt;"</screen>
            <para>So, for example, if you'd like to install the NovaClient on two of your Compute nodes
            with hostnames <literal>helion-cp1-comp0001-mgmt</literal> and
              <literal>helion-cp1-comp0002-mgmt</literal> you can use this syntax:</para>
            <screen>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts -e "install_package=novaclient" client-deploy.yml -e "install_hosts=helion-cp1-comp0001-mgmt,helion-cp1-comp0002-mgmt"</screen>
         </listitem>
        <listitem>
            <para>Once the playbook completes successfully, you should be able to SSH to those nodes and,
          using the proper credentials, authenticate and use the command-line interfaces you have
          installed.</para>
         </listitem>
      </orderedlist>
   
  </section>
