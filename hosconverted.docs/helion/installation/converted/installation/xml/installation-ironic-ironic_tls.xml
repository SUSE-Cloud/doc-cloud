<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><section id="ironic-tls">
   <title>
      <phrase/>TLS Certificates with Ironic Python Agent (IPA) Images</title>
        
        
        <para>As part of <phrase/>, Ironic Python Agent, better known as IPA in the OpenStack community, 
            images are supplied and loaded into glance.  Two types of image exist.  One is a traditional 
            boot ramdisk which is used by the agent_ipmitool, pxe_ipmitool, and pxe_ilo drivers.  The other is 
            an ISO image that is supplied as virtual media to the host when using the agent_ilo driver.
            </para>

        <para>
            As these images are built in advance, they are unaware of any private certificate authorities.  
            Users attempting to utilize self-signed certificates or a private certificate authority will need 
            to inject their signing certificate(s) into the image in order for IPA to be able to boot on a 
            remote node, and ensure that the TLS endpoints being connected to in <phrase/> can be trusted.  This 
            is not an issue with publicly signed certificates.
            </para>

        <para>
            As two different types of images exist, below are instructions for disassembling the image 
            ramdisk file or the ISO image.  Once this has been done, you will need to re-upload 
            the files to glance, and update any impacted node's driver_info, for example  
            the deploy_ramdisk and ilo_deploy_iso settings that were set when the node was first defined.  Respectively, 
            this can be done with the 
            
</para>
<screen>           
ironic node-update &lt;node&gt; replace driver_info/deploy_ramdisk=&lt;glance_id&gt;
</screen>
<para>
            
            or 
 </para>
<screen>           
 ironic node-update &lt;node&gt; replace driver_info/ilo_deploy_iso=&lt;glance_id&gt;
</screen>

        
        
    </section>
