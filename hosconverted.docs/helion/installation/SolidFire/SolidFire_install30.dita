<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="SolidFire_install">
  <title>Configure SolidFire as a Single Backend</title>
  <body>
    <p>To integrate SolidFire storage with <keyword keyref="kw-hos"/>, you must configure the
      SolidFire storage array as a Cinder backend. This is done by modifying the cinder.conf.j2
      file. In this configuration file you will create an Internet Small Computer Systems Interface
      (iSCSI) cluster. iSCSI is an Internet Protocol (IP)-based storage networking standard for
      linking data storage facilities.</p>

    <p>To configure the Cinder backend:</p>
    <ol>
      <li>Log in to the lifecycle manager.</li>
      <li>To verify that the following file:
        <codeblock>~/helion/my_cloud/config/cinder/cinder.conf.j2</codeblock> is a symbolic link to
        the following location:
        <codeblock>../../../hos/ansible/roles/_CND-CMN/templates/cinder.conf.j2</codeblock> run:
        <codeblock>ln -s /home/stack/helion/hos/ansible/roles/_CND-CMN/templates/cinder.conf.j2 /home/stack/helion/hos/ansible/roles/_CND-CMN/templates/cinder.conf.j2</codeblock>
      </li>
      <li>In a text editor, open the following file:
        <codeblock>~/helion/my_cloud/config/cinder/cinder.conf.j2</codeblock></li>
      <li>To create a SolidFire backend, find the following section:
        <codeblock>enabled_backends</codeblock> and add the following text:
        <codeblock>enabled_backends=SolidFire</codeblock></li>
      <li>In the same file, create a new SolidFire iSCSI cluster similar to the following, : <codeblock># SolidFire Section
[SolidFire]
volume_driver = cinder.volume.drivers.solidfire.SolidFireDriver
san_ip = #.#.#.#
san_login = XXXX
san_password = YYYY
sf_emulate_512 = True
volume_backend_name = solidfire
# end solidfire</codeblock>
        <note type="attention">making sure to use the cluster information specific to your
          environment, replace the following the following values: <dl>
            <dlentry>
              <dt>#.#.#.#</dt>
              <dd>the management virtual IP address of the SolidFire storage node</dd>
            </dlentry>
            <dlentry>
              <dt>XXXX</dt>
              <dd>the username with access credentials for logging in to the SolidFire storage node
                management dashboard</dd>
            </dlentry>
            <dlentry>
              <dt>YYYY</dt>
              <dd>the password for the account used to log in to SolidFire storage node management
                dashboard</dd>
            </dlentry>
          </dl>
        </note>
      </li>
      <li>To commit your configuration changes to a local git repository, run:
        <codeblock>cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;Added SolidFire to Cinder Backend Storage&gt;"</codeblock></li>
      <li>To use an ansible playbook to run the configuration processor, run:
        <codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</codeblock></li>
      <li>To use an ansible playbook to create a deployment directory, run:
        <codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</codeblock></li>
      <li>To complete the configuration, run:
        <codeblock>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts cinder-reconfigure.yml</codeblock></li>
    </ol>

    <p>For more on configuring SolidFire, use the <xref
        href="http://www.solidfire.com/solutions/cloud-orchestration/openstack" scope="external"
        format="html">SolidFire Documentation Resources</xref> list.</p>

  </body>
</topic>
