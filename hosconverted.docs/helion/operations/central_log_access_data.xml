<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd" >
<topic xml:lang="en-us" id="central_log_access_data">
  <title>Access Log Data</title>
  <body>

    <section id="CL_access_data">
      <title>How Do I Access the Data Collected by Centralized Logging?</title>
      <p>All logging data in <keyword keyref="kw-hos"/> is managed by the Centralized Logging
        Service and can be viewed or analyzed by Kibana. Kibana is the only graphical interface
        provided with <keyword keyref="kw-hos"/> to search or create a report from log data.
        Operations Console provides only a link to the Kibana Logging dashboard.</p>
      <p>The following two methods allow you to access the Kibana Logging dashboard to search log
        data:</p>
      <ul>
        <li><xref type="section" href="#central_log_access_data/CL_access_OpsConsole">Use the
            Operations Console Link</xref></li>
        <li><xref type="section" href="#central_log_access_data/CL_access_Kibana">Access Kibana
            Directly</xref></li>
      </ul>
      <p>To learn more about Kibana, read the <xref
          href="https://www.elastic.co/guide/en/kibana/current/getting-started.html"
          scope="external" format="html">Getting Started with Kibana</xref> guide.</p>
    </section>
    <lines> </lines>


    <section id="CL_access_OpsConsole">
      <title>Use the Operations Console Link</title>
      <p>Operations Console allows you to access Kibana in the same tool that you use to manage the
        other <keyword keyref="kw-hos"/> resources in your deployment. To use Operations Console you
        must have the correct permissions. For more about permission requirements, see <xref
          href="opsconsole/connect_opsconsole.xml#connect_opsconsole/connecting" type="section"
          >Connecting to Operations Console</xref>.</p>
      <p>To use Operations Console:</p>
      <ol>
        <li>In a browser , open the Operations Console.</li>
        <li>On the login page, enter the user name, and the <b>Password</b>, and then click <b>LOG
            IN</b>.</li>
        <li>On the <b>Home/Central Dashboard</b> page, click the menu represented by 3 horizontal
          lines. <image href="../../media/opsconsole/OpsConsoleBurgerMenu.png"/></li>
        <li>From the menu that slides in on the left, select <b>Home</b>, and then select
            <b>Logging</b>.</li>
        <li>On the <b>Home/Logging</b> page, click <b>View Logging Dashboard</b>.</li>
      </ol>
      <note type="important">In <keyword keyref="kw-hos"/>, Kibana usually runs on a different
        network than Operations Console. Due to this configuration, it is possible that using
        Operations Console to access Kibana will result in an “404 not found” error. This error only
        occurs if the user has access only to the public facing network.</note>
    </section>
    <lines>    </lines>

    <section id="CL_access_Kibana">
      <title>Use Kibana to Access Log Data</title>
      <p>Kibana is an open-source, data-visualization plugin for Elasticsearch. Kibana provides
        visualization capabilities using the log content indexed on an Elasticsearch cluster. Users
        can create bar and pie charts, line and scatter plots, and maps using the data collected by
          <keyword keyref="kw-hos"/> in the cloud log files.</p>
      <p><note type="note"> You may see a time difference when viewing logs in Kibana versus viewing
          logs on the node. Kibana automatically detects the local time through the browser and
          converts the @timestamp field from Coordinated Universal Time (UTC) to local time. When
          you are searching Kibana, if you already know the UTC timestamp or timestamp range, first
          convert the timestamps to your local time and then run the query.</note></p>
      <p>While creating Kibana dashboards is beyond the scope of this document, it is important to
        know that the dashboards you create are JSON files that you can modify or create new
        dashboards based on existing dashboards.</p>
      <note>Kibana is client-server software. To operate properly, the browser must be able to
        access port 5601 on the control plane.</note>
      <table frame="all" rowsep="1" colsep="1" id="table_spl_rg5_st">
        <tgroup cols="3">
          <colspec colname="c1" colnum="1"/>
          <colspec colname="c2" colnum="2"/>
          <colspec colname="c3" colnum="3"/>
          <thead>
            <row>
              <entry>Field</entry>
              <entry>Default Value</entry>
              <entry>Description</entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>user</entry>
              <entry>kibana</entry>
              <entry>Username that will be required for logging into the Kibana UI.</entry>
            </row>
            <row>
              <entry>password</entry>
              <entry>random password is generated</entry>
              <entry>Password generated during installation that is used to login to the Kibana
                UI.</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
    <section id="Login_creds_Kibana">
      <p><b>Logging into Kibana</b></p>
      <p>To log into Kibana to view data, you must make sure you have the required login
        configuration.</p>
      <ol>
        <li><xref type="section" href="#central_log_access_data/KLogin_Creds">Verify login
            credentials</xref>.</li>
        <li><xref type="section" href="#central_log_access_data/KLogin_Psswd">Find the randomized
            password</xref>.</li>
        <li><xref type="section" href="#central_log_access_data/KLogin_DLink">Access Kibana using a
            direct link</xref>.</li>
      </ol>
    </section>
    <section id="KLogin_Creds">
      <title>Verify Login Credentials</title>
      <p>During the installation of Kibana, a password is automatically set and it is randomized.
        Therefore, unless an administrator has already changed it, you need to retrieve the default
        password from a file on the control plane node.</p>

    </section>

    <section id="KLogin_Psswd">
      <title>Find the Randomized Password</title>
      <ol>
        <li>To find the Kibana password, run:
          <codeblock>grep kibana ~/scratch/ansible/next/my_cloud/stage/internal/CloudModel.yaml</codeblock>
        </li>
      </ol>

    </section>
    <section id="KLogin_DLink">
      <title>Access Kibana Using a Direct Link:</title>
      <p>This section helps you verify the Horizon virtual IP (VIP) address that you should use.</p>
      <ol>
        <li>To find hostname, run: <codeblock>grep -i log-svr /etc/hosts</codeblock></li>
        <li>Navigate to the following directory:
            <codeblock>~/home/stack/helion/my_cloud/definition/data</codeblock><note>The
              <codeph>network_groups.yml</codeph> file in the
              <codeph>~/home/stack/helion/my_cloud/definition/data</codeph> directory is the input
            model file that may be copied automatically to other directories.</note></li>
        <li>Open the following file for editing: <codeblock>network_groups.yml </codeblock></li>
        <li>Find the following entry: <codeblock><codeph>external-name</codeph></codeblock></li>
        <li>If your administrator set a hostname value in the <b>external-name</b> field during the
          configuration process for your cloud, then Kibana will be accessed over port 5601 on that
          hostname.</li>
        <li>If your administrator did not set a hostname value, then to determine which IP address
          to use, from your lifecycle manager, run:
            <codeblock>grep HZN-WEB /etc/hosts</codeblock><p>The output of the grep command should
            show you the virtual IP address for Kibana that you should use. <note type="important"
              >If nothing is returned by the grep command, you can open the following file to look
              for the IP address manually: <codeblock>/etc/hosts</codeblock></note>Access to Kibana
            will be over port 5601 of that virtual IP address.
          Example:</p><codeblock>https://&lt;VIP&gt;:5601</codeblock>
        </li>
      </ol>
    </section>
  </body>
</topic>
