<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="monasca_jira_plugin">
    <title>Configuring the JIRA Plugin</title>
    <body>
        <p>Configuring the JIRA plugin requires three pieces of information from your JIRA
                system.<ul id="ul_xn1_tvv_4x">
                <li>The URL of your JIRA system.</li>
                <li>Username and password of a JIRA account that will be used to authenticate the
                    notifications.</li>
                <li>The name of the JIRA project that the notifications will be sent to.</li>
            </ul></p>
        <p><b>Create JIRA notification type</b></p>
        <p>You will configure the Monasca service to send notifications to a particular JIRA
            project. You must also configure JIRA to create new issues for each notification it
            receives to this project, however, that configuration is outside the scope of this
            document. </p>
        <p>The Monasca JIRA notification plugin supports only the following two JIRA issue
                fields.<ul id="ul_klr_hxv_4x">
                <li><b>Project</b>. This is the only supported "mandatory" JIRA issue field.</li>
                <li><b>Component</b>. This is the only supported "optional" JIRA issue field.</li>
            </ul></p>
        <p/>
        <p>The JIRA issue type that your notifications will create may only be configured with the
            "Project" field as mandatory. If your JIRA issue type has any other mandatory fields,
            the Monasca plugin will not function correctly. Currently, the Monasca plugin only
            supports the single optional "component" field.</p>
        <p>Creating the JIRA notification type requires a few more steps than other notification
            types covered in this guide. Because the Python and YAML files for this notification
            type are not yet included in <keyword keyref="kw-hos-phrase"/>, you must perform the
            following steps to manually retrieve and place them on your lifecycle manager.<ol
                id="ol_jvp_kcw_4x">
                <li>Navigate a web browser to <xref href="https://review.openstack.org/#/c/348001/"
                        format="html" scope="external"/> and download the <b>jira_notifier.py</b>
                    file. </li>
                <li>Manually place the <b>jira_notifier.py</b> file in the following venv
                        directory.<codeblock>/opt/stack/venv/monasca_notification-20161011T121954Z/lib/python2.7/site-packages/monasca_notification/plugins/</codeblock><note>The
                        number suffix for the directory "monasca_notification-" may differ in your
                        case.</note></li>
                <li>Configure the JIRA plugin by adding the following block to the
                        <codeph>/etc/monasca/notification.yaml</codeph> file, under the
                        <codeph>notofication_types</codeph> section, and adding the username and
                    password of the JIRA account used for the notifications to the respective
                        sections.<codeblock>    plugins:
 
     - monasca_notification.plugins.jira_notifier:JiraNotifier
 
    jira:
 
        
        user:
 
        password:
 
        timeout: 60</codeblock><p/><p>After
                        adding the necessary block, the <codeph>notification_types</codeph> section
                        should look like the following example. Note that you must also add the
                        username and password for the JIRA user related to the notification
                        type.</p><codeblock>notification_types:
    plugins:
 
     - monasca_notification.plugins.jira_notifier:JiraNotifier
 
    jira:
 
        
        user:
 
        password:
 
        timeout: 60

    webhook:
        timeout: 5

    pagerduty:
        timeout: 5
        url: "https://events.pagerduty.com/generic/2010-04-15/create_event.json"</codeblock><p/></li>
                <li>Create the JIRA notification type. The following command example creates a JIRA
                    notification type named <b>MyJiraNotification</b>, in the JIRA project
                        <b>HISO</b>.<codeblock>monasca notification-create  MyJiraNotification JIRA https://jira.hpcloud.net/?project=HISO</codeblock><p/><p>The
                        following command example creates a JIRA notification type named
                            <b>MyJiraNotification</b>, in the JIRA project <b>HISO</b>, and adds the
                        optional "<b>component</b>" field with a value of
                        "keystone".<codeblock>monasca notification-create  MyJiraNotification JIRA https://jira.hpcloud.net/?project=HISO&amp;component=keystone</codeblock></p><note>There
                        is a slash ("/") separating the URL path and the query string. The slash is
                        required if you have a query parameter without a path
                        parameter.</note><note>Notification types may also be created in the Horizon
                        dashboard.</note></li>
            </ol></p>
    </body>
</topic>
