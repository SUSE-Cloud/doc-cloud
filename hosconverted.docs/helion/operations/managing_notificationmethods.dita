<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="manage_note_methods">
  <title><ph conkeyref="HOS-conrefs/product-title"/>Managing Notification Methods for Alarms</title>
  <body><!--not tested-->
    <section id="about">
      <p><!--suggested edit: You can configure how you want to receive notifications of alarms from the Monitoring service by using one of the following methods:-->
        <!--additional suggestion: You should add a link to alarm_resolutions.dita somewhere in this document ala "For information about, and instructions for, troubleshooting alarms, see..."--><ul>
        <li><xref href="managing_notificationmethods.dita#manage_note_methods/proxy">Enabling a
              Proxy for Notifications</xref></li>
        <li><xref href="managing_notificationmethods.dita#manage_note_methods/create">Creating a
              New Notification Method</xref></li>
        <li><xref href="managing_notificationmethods.dita#manage_note_methods/apply">Applying a
              Notification Method to an Alarm Definition</xref></li>
        </ul></p>
    </section>
    <section id="proxy"><title>Enabling a Proxy for Webhook or Pager Duty Notifications</title>
      <p>If your environment requires a proxy in order for communications to function then these
        steps will show you how you can enable one. These steps will only be needed if you are
        utilizing the webhook or pager duty notification methods.</p>
      <p>These steps will require access to the lifecycle manager in your cloud deployment so you
        may need to contact your Administrator. You can make these changes during the initial
        configuration phase prior to the first installation or you can modify your existing
        environment, the only difference being the last step.</p>
      <p>
        <ol>
          <li>Log in to the lifecycle manager.</li>
          <li>Edit
              <codeph>~/helion/hos/ansible/roles/monasca-notification/defaults/main.yml</codeph>
            file and edit the line below with your proxy address values:
              <codeblock>notification_environment: '"http_proxy=http://&lt;proxy_address>:&lt;port>" "https_proxy=&lt;http://proxy_address>:&lt;port>"'</codeblock><note>There
              are single quotation marks around the entire value of this entry and then double
              quotation marks around the individual proxy entries. This formatting must exist when
              you enter these values into your configuration file.</note></li>
          <li>If you are making these changes prior to your initial installation then you are done
            and can continue on with the installation. However, if you are modifying an existing
            environment, you will need to continue on with the remaining steps below.</li>
          <li>Commit your configuration to the <xref href="../installation/using_git.dita">local git
              repo</xref>, as follows:
            <codeblock>cd ~/helion/hos/ansible
git add -A
git commit -m "My config or other commit message"</codeblock></li>
          <li>Run the configuration processor:
            <codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</codeblock></li>
          <li>Generate an updated deployment directory:
            <codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</codeblock></li>
          <li>Run the Monasca reconfigure playbook to enable these changes:
            <codeblock>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts monasca-reconfigure.yml --tags notification</codeblock></li>
        </ol>
      </p>
    </section>
    <section id="create"><title>Creating a New Notification Method</title>
      <ol>
        <li>Log in to the Operations Console. See <xref
            href="opsconsole/connect_opsconsole.dita#connect_opsconsole">Connecting to the Operations
            Console</xref> for more details.</li>
        <li>Use the navigation menu to go to the <b>Alarm Explorer</b> page: <p><image
              href="../../media/hos.docs/opsconsole_createnotificationmethod.png"/></p></li>
        <li>Select the <b>Notification Methods</b> menu and then click the <b>Create Notification
            Method</b> button:<p><image
              href="../../media/hos.docs/opsconsole_createnotificationmethod1.png"/></p></li>
        <li>On the <b>Create Notification Method</b> window you will select your options and then
          click the <b>Create Notification</b> button.<image
            href="../../media/hos.docs/opsconsole_createnotificationmethod3.png"
            id="image_cqx_lwj_cy"/><p>A description of each of the fields you use for each
            notification method:</p><table frame="all" rowsep="1" colsep="1" id="table_emq_jwj_cy">
            <tgroup cols="2">
              <colspec colname="c1" colnum="1"/>
              <colspec colname="c2" colnum="2"/>
              <thead>
                <row>
                  <entry>Field</entry>
                  <entry>Description</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>Name</entry>
                  <entry>Enter a unique name value for the notification method you are
                    creating.</entry>
                </row>
                <row>
                  <entry>Type</entry>
                  <entry>Choose a type. Available values are <b>Webhook</b>, <b>Email</b>, or
                      <b>Pager Duty</b>.</entry>
                </row>
                <row>
                  <entry>Address/Key</entry>
                  <entry>Enter the value corresponding to the type you chose.</entry>
                </row>
              </tbody>
            </tgroup>
          </table></li>
      </ol>
    </section>
    <section id="apply"><title>Applying a Notification Method to an Alarm Definition</title>
      <ol>
        <li>Log in to the Operations Console. See <xref
            href="opsconsole/connect_opsconsole.dita#connect_opsconsole/connecting">Connecting to the Operations
            Console</xref> for more details.</li>
        <li>Use the navigation menu to go to the <b>Alarm Explorer</b> page: <p><image
              href="../../media/hos.docs/opsconsole_createnotificationmethod.png"
              id="image_o2t_5wj_cy"/></p></li>
        <li>Select the <b>Alarm Definition</b> menu which will give you a list of each of the alarm
          definitions in your environment.
          <p><image
            href="../../media/hos.docs/opsconsole_createnotificationmethod4.png"/></p></li>
        <li>Locate the alarm you want to change the notification method for and click on its name to
          bring up the edit menu. You can use the sorting methods for assistance.</li>
        <li>In the edit menu, scroll down to the <b>Notifications and Severity</b> section where you
          will select one or more <b>Notification Methods</b> before selecting the <b>Update Alarm
            Definition</b> button:<p><image
              href="../../media/hos.docs/opsconsole_createnotificationmethod6.png"/></p></li>
        <li>Repeat as needed until all of your alarms have the notification methods you desire.</li>
      </ol>
    </section>
  </body>
</topic>
