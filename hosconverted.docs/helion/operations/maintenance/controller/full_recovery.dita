<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="full_recovery">
  <title><ph conkeyref="HOS-conrefs/product-title"/>Full Disaster Recovery</title>
  <abstract><shortdesc outputclass="hdphidden">In this disaster scenario, you've lost everything in
      the cloud, including Swift.</shortdesc></abstract>
  <body>
    <p>In this disaster scenario, you've lost everything in the cloud, including Swift.</p>
    <section>
      <title>Restore from a Swift backup:</title>
      <p>Restoring from a Swift backup is not possible because Swift is gone.</p>
    </section>
    <section>
      <title>Restore from an SSH backup:</title>
      <ol id="ol_jyz_qyh_1v">
        <li>Log in to the lifecycle manager.</li>
        <li>Edit the following file so it contains the same information as it had previously:
          <codeblock>~/helion/my_cloud/config/freezer/ssh_credentials.yml file</codeblock></li>
        <li>On the lifecycle manager copy the following
          files:<codeblock>cp -r ~/hp-ci/helion/* ~/helion/my_cloud/definition/</codeblock></li>
        <li>Run this playbook to restore the lifecycle manager
          helper:<codeblock>cd ~/helion/hos/ansible/
ansible-playbook -i hosts/localhost _deployer_restore_helper.yml</codeblock></li>
        <li>Run as root, and change directories:
          <codeblock>sudo su
cd /root/deployer_restore_helper/</codeblock></li>
        <li>Stop the Dayzero UI installer:<codeblock>systemctl stop dayzero</codeblock></li>
        <li>Execute the restore: <codeblock>./deployer_restore_script.sh</codeblock></li>
        <li>Start the Dayzero UI installer:<codeblock>systemctl start dayzero</codeblock></li>
        <li>Run this playbook to deploy your cloud:
          <codeblock>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts site.yml -e '{ "freezer_backup_jobs_upload": false }'</codeblock></li>
        <li>You can now perform the procedures to restore MySQL and Swift. Once everything is
          restored, re-enable the backups from the lifecycle manager:
          <codeblock>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts _freezer_manage_jobs.yml</codeblock></li>
      </ol>
    </section>
  </body>
</topic>
