<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="pit_lifecyclemanager_recovery">
  <title><ph conkeyref="HOS-conrefs/product-title"/>Point-in-time Lifecycle Manager Recovery</title>
  <abstract><shortdesc outputclass="hdphidden">In this scenario, everything is still running
      (lifecycle manager, controller nodes, and compute nodes) but you want to restore the lifecycle
      manager to a previous state.</shortdesc></abstract>
  <body>
    <p>In this scenario, everything is still running (lifecycle manager, controller nodes, and
      compute nodes) but you want to restore the lifecycle manager to a previous state.</p>
    <section>
      <title>Restore from a Swift backup</title>
      <ol>
        <li>Log in to the lifecycle manager.</li>
        <li>Become root: <codeblock>sudo su</codeblock></li>
        <li>Source the backup environment file:
          <codeblock>source /home/stack/backup.osrc</codeblock></li>
        <li>List the jobs:
          <codeblock>freezer-scheduler -c &lt;lifecycle manager hostname&gt; job-list</codeblock></li>
        <li>Get the id corresponding to the job <codeph>HLM Default: Deployer restore from
            Swift</codeph>.</li>
        <li>Stop the Dayzero UI: <codeblock>systemctl stop dayzero</codeblock></li>
        <li>Launch the restore job:
          <codeblock>freezer-scheduler -c &lt;lifecycle manager hostname&gt; job-start -j &lt;job-id&gt;</codeblock></li>
        <li>This will take some time. While you wait you can follow the progress in the
            <codeph>/var/log/freezer-agent/freezer-scheduler.log</codeph> log file.</li>
        <li>Start the Dayzero UI: <codeblock>systemctl start dayzero</codeblock></li>
      </ol>
    </section>
    <section>
      <title>Restore from an SSH backup</title>
      <p>Follow the same procedure as for Swift but select the job <codeph>HLM Default: Deployer
          restore from SSH</codeph>.</p>
    </section>
  </body>
</topic>
