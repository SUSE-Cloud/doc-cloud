<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><!--Edit status: not edited-->
<section id="troubleshooting_glance">
   <title>
      <phrase/>Troubleshooting the Image (Glance)
    Service</title>
    
    
      <bridgehead renderas="sect4">Images Created in Horizon UI Get Stuck in a Queued State</bridgehead>
      <para>When creating a new image in the Horizon UI you will see the option for <literal>Image
          Location</literal> which allows you to enter a HTTP source to use when creating a new image
        for your cloud. However, this option is disabled by default for security reasons. This
        results in any new images created via this method getting stuck in a <literal>Queued</literal>
        state.</para>
      <para>We cannot guarantee the security of any third party sites you use as image sources and the
        traffic goes over HTTP (non-SSL) traffic.</para>
      <para>
         <emphasis role="bold">Resolution:</emphasis> You will need your cloud administrator to enable the HTTP store option
        in Glance for your cloud.</para>
      <para>Here are the steps to enable this option:</para>
      <orderedlist>
        <listitem>
            <para>Log in to the lifecycle manager.</para>
         </listitem>
        <listitem>
            <para>Edit the file below:
          </para>
            <screen>~/helion/hos/ansible/roles/GLA-API/templates/glance-api.conf.j2</screen>
         </listitem>
        <listitem>
            <para>Locate the Glance store options and add the <literal>http</literal> value in the
            <literal>stores</literal> field. It will look like
            this:</para>
            <screen>[glance_store]
stores = {{ glance_stores }}</screen>
            <para>Change this
            to:</para>
            <screen>[glance_store]
stores = {{ glance_stores }}<emphasis role="bold">,http</emphasis>
            </screen>
         </listitem>
        <listitem>
            <para>Commit your configuration to the <citetitle>FIXME: broken external xref</citetitle>, as follows:
          </para>
            <screen>cd ~/helion/hos/ansible
git add -A
git commit -m "adding HTTP option to Glance store list"</screen>
         </listitem>
        <listitem>
            <para>Run the configuration processor with this command:
          </para>
            <screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</screen>
         </listitem>
        <listitem>
            <para>Use the playbook below to create a deployment directory:
          </para>
            <screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</screen>
         </listitem>
        <listitem>
            <para>Run the Glance service reconfigure playbook which will update these settings:
          </para>
            <screen>cd ~/scratch/ansible/next/hos/ansible/
ansible-playbook -i hosts/verb_hosts glance-reconfigure.yml</screen>
         </listitem>
      </orderedlist>
   
  </section>
