<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><section id="monasca_slack_plugin">
   <title>Configuring the Slack Plugin</title>
        <para>Configuring a Slack notification type requires four pieces of information from your Slack
                system.</para>

<itemizedlist id="ul_bwq_2rp_4x">
                <listitem>
            <para>Slack server URL</para>

         </listitem>
                <listitem>
            <para>Authentication token</para>

         </listitem>
                <listitem>
            <para>Slack channel</para>

         </listitem>
                <listitem>
            <para>A Slack user account. This account will be used to authenticate incoming
                    notifications to Slack.</para>

         </listitem>
            </itemizedlist>

        <para><emphasis role="bold">Identify a Slack channel</emphasis></para>

<orderedlist id="ol_uf2_rrp_4x">
                <listitem>
            <para>Log in to your Slack system as the user account that will be used to
                    authenticate the notifications to Slack.</para>

         </listitem>
                <listitem>
            <para>In the left navigation panel, under the <emphasis role="bold">CHANNELS</emphasis> section locate the
                    channel that you wish to receive the notifications. The instructions that follow
                    will use the example channel <emphasis role="bold">#general</emphasis>.</para>

         </listitem>
            </orderedlist>

        <para><emphasis role="bold">Create a Slack token</emphasis></para>

<orderedlist id="ol_zbt_hsp_4x">
                <listitem>
            <para>Log in to your Slack system as the user account that will be used to
                    authenticate the notifications to Slack</para>

         </listitem>
                <listitem>
            <para>Navigate to the following URL: <ulink url="https://api.slack.com/docs/oauth-test-tokens"/></para>

         </listitem>
                <listitem>
            <para>Select the <emphasis role="bold">Create token</emphasis> button.</para>

         </listitem>
            </orderedlist>

        <para><emphasis role="bold">Create a Slack notification type</emphasis></para>

<orderedlist id="ol_b1k_mtp_4x">
                <listitem>
            <para>Begin by identifying the structure of the API call to be used by your
                    notification method. The format for a call to the Slack Web API is as
                            follows:</para>

            <para><literal>https://slack.com/api/METHOD</literal></para>

            <para>You can
                        authenticate a Web API request by using the token that you created in the
                        previous <emphasis role="bold">Create a Slack Token</emphasis>section. Doing so will result in an API
                        call that looks like the
                            following.</para>

            <para><literal>https://slack.com/api/METHOD?token=auth_token</literal></para>

            <para>You
                        can further refine your call by specifying the channel that the message will
                        be posted to. Doing so will result in an API call that looks like the
                        following.</para>

            <para><literal>https://slack.com/api/METHOD?token=auth_token&amp;channel=#channel</literal></para>

            
            <para>The
                        following example uses the <literal>chat.postMessage</literal> method, the
                        token <literal>1234567890</literal>, and the channel
                        <literal>#general</literal>.</para>
<screen>https://slack.com/api/chat.postMessage?token=1234567890&amp;channel=#general</screen>

            <para>Find
                        more information on the Slack Web API here: <ulink url="https://api.slack.com/web"/></para>

         </listitem>
                <listitem>
            <para>Use the CLI on your lifecycle manager to create a new Slack notification type,
                    using the API call that you created in the preceding step. The following example
                    creates a notification type named <emphasis role="bold">MySlackNotification</emphasis>, using token
                        <emphasis role="bold">1234567890</emphasis>, and posting to channel
                    <emphasis role="bold">#general</emphasis>.</para>

            <screen>monasca notification-create  MySlackNotification SLACK https://slack.com/api/chat.postMessage?token=1234567890&amp;channel=#general</screen>
         </listitem>
            </orderedlist>

        <note>
      <para>Notification types can also be created in the Horizon dashboard.</para>


   </note>
    </section>
