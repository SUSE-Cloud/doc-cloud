<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="troubleshooting_glance">
  <title><ph conkeyref="HOS-conrefs/product-title"/>Troubleshooting the Image (Glance)
    Service</title>
  <abstract><shortdesc outputclass="hdphidden">Troubleshooting scenarios with resolutions for the
      Glance service.</shortdesc>We have gathered some of the common issues and troubleshooting
    steps that will help when resolving issues that occur with the Glance service.</abstract>
  <body>
    <!--not tested-->
    <section id="image_upload">
      <title>Images Created in Horizon UI Get Stuck in a Queued State</title>
      <p>When creating a new image in the Horizon UI you will see the option for <codeph>Image
          Location</codeph> which allows you to enter a HTTP source to use when creating a new image
        for your cloud. However, this option is disabled by default for security reasons. This
        results in any new images created via this method getting stuck in a <codeph>Queued</codeph>
        state.</p>
      <p>We cannot guarantee the security of any third party sites you use as image sources and the
        traffic goes over HTTP (non-SSL) traffic.</p>
      <p><b>Resolution:</b> You will need your cloud administrator to enable the HTTP store option
        in Glance for your cloud.</p>
      <p>Here are the steps to enable this option:</p>
      <ol>
        <li>Log in to the lifecycle manager.</li>
        <li>Edit the file below:
          <codeblock>~/helion/hos/ansible/roles/GLA-API/templates/glance-api.conf.j2</codeblock></li>
        <li>Locate the Glance store options and add the <codeph>http</codeph> value in the
            <codeph>stores</codeph> field. It will look like
            this:<codeblock>[glance_store]
stores = {{ glance_stores }}</codeblock><p>Change this
            to:</p><codeblock>[glance_store]
stores = {{ glance_stores }}<b>,http</b></codeblock></li>
        <li>Commit your configuration to the <xref href="../../installation/using_git.dita">local
            git repo</xref>, as follows:
          <codeblock>cd ~/helion/hos/ansible
git add -A
git commit -m "adding HTTP option to Glance store list"</codeblock></li>
        <li>Run the configuration processor with this command:
          <codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</codeblock></li>
        <li>Use the playbook below to create a deployment directory:
          <codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</codeblock></li>
        <li>Run the Glance service reconfigure playbook which will update these settings:
          <codeblock>cd ~/scratch/ansible/next/hos/ansible/
ansible-playbook -i hosts/verb_hosts glance-reconfigure.yml</codeblock></li>
      </ol>
    </section>
  </body>
</topic>
