<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic xml:lang="en-us" id="configure_heat">
  <title><ph conkeyref="HOS-conrefs/product-title"/>Configuring the Orchestration Service</title>
  <abstract><shortdesc outputclass="hdphidden">Information about configuring the Orchestration
      service, based on OpenStack Heat.</shortdesc></abstract>
  <body>
    <!-- not tested -->
    <p>The Orchestration service, based on OpenStack Heat, does not need any additional
      configuration to be used. This documenent describes some configuration options as well as
      reasons you may want to use them.</p>

    <p><b>Heat Stack Tag Feature</b></p>
    <p>Heat provides a feature called Stack Tags to allow attributing a set of simple string-based
      tags to stacks and optionally the ability to hide stacks with certain tags by default. This
      feature can be used for behind-the-scenes orchestration of cloud infrastructure, without
      exposing the cloud user to the resulting automatically-created stacks.</p>
    <p>Additional details can be seen here: <xref
        href="https://specs.openstack.org/openstack/heat-specs/specs/kilo/stack-tags.html"
        scope="external" format="html">OpenStack - Stack Tags</xref>.</p>
    <p>In order to use the Heat stack tag feature, you need to use the following steps to define the
        <codeph>hidden_stack_tags</codeph> setting in the Heat configuration file and then
      reconfigure the service to enable the feature.</p>
    <ol>
      <li>Log in to the lifecycle manager.</li>
      <li>Edit the Heat configuration file, at this
        location:<codeblock>~/helion/my_cloud/config/heat/heat.conf.j2</codeblock></li>
      <li>Under the <codeph>[DEFAULT]</codeph> section, add a line for
          <codeph>hidden_stack_tags</codeph>.
        Example:<codeblock>[DEFAULT]
hidden_stack_tags="&lt;hidden_tag>"</codeblock></li>
      <li>Commit the changes to your local
        git:<codeblock>cd ~/helion/hos/ansible
git add --all
git commit -m "enabling Heat Stack Tag feature"</codeblock></li>
      <li>Run the configuration
        processor:<codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</codeblock></li>
      <li>Update your deployment
        directory:<codeblock>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</codeblock></li>
      <li>Reconfigure the Orchestration
        service:<codeblock>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts heat-reconfigure.yml</codeblock></li>
    </ol>
    <p>To begin using the feature, use these steps to create a Heat stack using the defined hidden
      tag. You will need to use credentials that have the Heat admin permissions. In the example
      steps below we are going to do this from the lifecycle manager using the
        <codeph>admin</codeph> credentials and a Heat template named <codeph>heat.yaml</codeph>:</p>
    <ol>
      <li>Log in to the lifecycle manager.</li>
      <li>Source the admin credentials:<codeblock>source ~/service.osrc</codeblock></li>
      <li>Create a Heat stack using this
        feature:<codeblock>heat stack-create -f heat.yaml hidden-stack --tags hidden</codeblock></li>
      <li>If you list your Heat stacks, your hidden one will not show unless you use the
          <codeph>--show-hidden</codeph> switch. <p>Example, not showing hidden
          stacks:</p><codeblock>heat stack-list</codeblock><p>Example, showing the hidden
          stacks:</p><codeblock>heat stack-list --show-hidden</codeblock></li>
    </ol>
  </body>
</topic>
