<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="configobj_volumegroups">
    <title><ph conkeyref="HOS-conrefs/product-title"/><!-- Configuration Object -  -->Volume Groups</title>
    <body><!--not tested-->
        <p conkeyref="HOS-conrefs/applies-to"/>
        
        
    <p>The <uicontrol>volume-groups</uicontrol> configuration object is used to define volume
        groups and their constituent logical volumes.</p>
    <p>Note that volume-groups are not exact analogs of device-groups. A volume-group specifies a
        set of physical volumes used to make up a volume-group that is then subdivided into multiple
        logical volumes.</p>
    <p>The <keyword keyref="kw-hos"/> operating system installation automatically creates a volume-group
        name "hlm-vg" on the first drive in the system. It creates a "root" logical volume there.
        The volume-group can be expanded by adding more physical-volumes (see examples). In
        addition, it is possible to create more logical-volumes on this volume-group to provide
        dedicated capacity for different services or file system mounts.</p>
        <codeblock>
   volume-groups:
     - name: hlm-vg
       physical-volumes:
         - /dev/sda_root
        
       logical-volumes: 
         - name: root
           size: 35%
           fstype: ext4
           mount: /
        
         - name: log
           size: 50%
           mount: /var/log
           fstype: ext4
           mkfs-opts: -O large_file
        
         - ...
         
     - name: vg-comp
       physical-volumes:
         - /dev/sdb
       logical-volumes:
         - name: compute
           size: 95%
           mount: /var/lib/nova
           fstype: ext4
           mkfs-opts: -O large_file</codeblock>
    <p>
        <table frame="all" rowsep="1" colsep="1" id="volume_groups">
            <tgroup cols="2">
                <colspec colname="c1" colnum="1"/>
                <colspec colname="c2" colnum="2"/>
                <thead>
                    <row>
                        <entry>Key</entry>
                        <entry>Value Descriptions</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>name</entry>
                        <entry>The name that will be assigned to the volume-group</entry>
                    </row>
                    <row>
                        <entry  id="multipath">physical-volumes</entry>
                        <entry><p>A list of physical disks that make up the volume group.</p> 
                            
                           <p> As installed
                            by the <keyword keyref="kw-hos"/> operating system install process, the volume group
                            "hlm-vg" will use a large partition (sda_root) on the first disk. This can be
                            expanded by adding additional disk(s).</p>
                        
                            <note type="important">Multipath storage should be listed as the corresponding 
                                <codeph>/dev/mapper/mpath&lt;x></codeph></note>
                        </entry>
                    </row>
                    <row>
                        <entry>logical-volumes</entry>
                        <entry>A list of logical volume devices to create from the above named volume
                            group.</entry>
                    </row>
                    <row>
                        <entry>name</entry>
                        <entry>The name to assign to the logical volume.</entry>
                    </row>
                    <row>
                        <entry>size</entry>
                        <entry>The size, expressed as a percentage of the entire volume group capacity, to
                            assign to the logical volume.</entry>
                    </row>
                    <row>
                        <entry>fstype (optional)</entry>
                        <entry>The file system type to create on the logical volume. If nonE specified, the
                            volume is not formatted.</entry>
                    </row>
                    <row>
                        <entry>mkfs-opts (optional)</entry>
                        <entry>Options, e.g. <codeph>-O large_file</codeph> to pass to the mkfs
                            command.</entry>
                    </row>
                    <row>
                        <entry>mode (optional)</entry>
                        <entry>The <codeph>mode</codeph> changes the root file system mode bits, which can
                            be either a symbolic representation or an octal number representing the bit patten
                            for the new mode bits.                            
                        </entry>
                    </row>
                    <row>
                        <entry>mount (optional)</entry>
                        <entry>Mount point for the file system.</entry>
                    </row>
                    <row>
                        <entry>consumer attributes (optional, consumer dependent)</entry>
                        <entry>
                            <p>These will vary according to the service consuming the device group. The
                                examples section provides sample content for the different services.</p>
                            <p>Note, not all services support the use of logical volumes. VSA requires raw
                                devices.</p></entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
    </p>
    </body>
</topic>

