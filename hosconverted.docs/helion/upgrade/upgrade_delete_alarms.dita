<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="upgrade_delete_alarms">
    <title><ph conkeyref="HOS-conrefs/product-title"/>Delete Alarms that are not Supported</title>
    <body><!--not tested-->
        <!--<p conkeyref="HOS-conrefs/applies-to"/>-->
        
        <section id="DOCS-3013">
    
    
         <p>A number of alarms that were supported in <keyword keyref="kw-hos-phrase-21"/> 
            have been removed in <keyword keyref="kw-hos-phrase-30"/>. After a successful upgrade, these
             alarms will be in the UNDETERMINED state. You can use either the  OpsConsole or the Monasca CLI 
             to remove these alarms. The list of process names for which alarms need to be deleted is:
             
             <!--You can delete the obsolete alarms
           by following the appropriate procedure on the <xref keyref="alarm_resolutions">Alarm Resolutions</xref> page.-->
         </p>
            
         <ul>
             <li>ceilometer-agent-central</li>
             <li>ceilometer-collector</li>
             <li>swift-container-sync</li>
             <li>leia.leia_monitor</li>
             <li>swift-account-auditor</li>             
             <li>swift-account-reaper</li>
             <li>swift-account-replicator</li>
             <li>swift-account-server</li>
             <li>swift-container-auditor</li>
             <li>swift-container-replicator</li>
             <li>swift-container-server</li>
             <li>swift-container-updater</li>
             <li>swift-object-auditor</li>
             <li>swift-object-replicator</li>
             <li>swift-proxy-server</li>
             <li>swift-object-server</li>
             <li>swift-object-updater</li>            
             
         </ul>
            
            <p>Note that the components in question are still being monitored in <keyword keyref="kw-hos-phrase-30"/>, 
            but using new alarms to replace these obsolete ones.
            </p>
    
<!--    <p>
        For example, the alarms for <codeph>ceilometer-agent-central</codeph> and <codeph>ceilometer-collector</codeph> components 
        can be deleted manually using the <codeph>monasca alarm-delete &lt;alarm-id></codeph> command.                
    </p>-->
        </section>
        
        <section>
            <title>Using the OpsConsole to remove alarms</title>
            
            <p>In the OpsConsole, navigate to the alarm explorer. You have a choice of two methods:</p>
            
            <ol>
                <li>Change to the <codeph>alarm-definitions</codeph> tab.</li>
                <li>Locate <codeph>Process Check</codeph> and select <codeph>view alarm instances</codeph> from the drop down.</li>
                <li>Add filter for state <codeph>unknown</codeph>.</li>
                <li>Check mark all alarms where the dimension <codeph>process_name=&lt;name></codeph> has a name in the list of process names.</li> 
                <li>Under <codeph>create alarm definition</codeph> select <codeph>delete alarm</codeph> to delete all check marked alarms.</li>
                <li>Repeat for each page of alarms.</li>                
                
            </ol>
            
            <p>Alternatively:</p>
            
            <ol>
                <li>Add filter for <codeph>dimension process_name=&lt;name></codeph> for a &lt;name> in the list of process names.</li>
                <li>Check mark the undetermined alarms.</li>
                <li>Under <codeph>create alarm definition</codeph> select <codeph>delete alarm</codeph> to delete all check marked alarms.</li>
                <li>Repeat steps 1-3 for each &lt;name> in the list of process names.</li>
            </ol>
            
        </section>

        <section>
            
            
            <title>Using the Monasca CLI to remove alarms</title>
            
            <ol>
                <li>Run <codeblock>monasca alarm-list --state undetermined --metric-dimensions process_name=&lt;name></codeblock> where &lt;name> is a name from the list of process names.</li>
                <li>For each &lt;id> in the list returned from step 1, run <codeph>monasca alarm-delete &lt;id></codeph></li> 
                <li>Repeat steps 1 and 2 for each &lt;name> in the list of process names.</li>                
            </ol>
    
        
        </section>
        
        <section>
            <title>Removing undetermined/unknown disk alarms</title>
            
            <p>To remove any undetermined/unknown disk alarms, repeat one of the processes 
                above, but substitute <codeph>device=rootfs</codeph> for <codeph>process_name=&lt;name></codeph></p>
            
        </section>
        
        <section>
            <title>Removing undetermined/unknown Swift host socket connect</title>
            
            <p>To remove undetermined/unknown Swift host socket connect, you can again choose between
            using the OpsConsole and the Monasca CLI.</p>
            
            <p><b>Using the OpsConsole:</b></p>
            
            <ol>
                <li>Locate the <codeph>Swift host socket connect</codeph> alarm-definition and select <codeph>view alarm instances</codeph></li>
                <li>Filter on state <codeph>UNKNOWN</codeph> and dimension <codeph>target_port=35357</codeph></li>
                <li>Select all alarms remaining on the page.</li>
                <li>Under <codeph>create alarm definition</codeph> select <codeph>delete alarm</codeph> to delete all check marked alarms.</li>                  
            </ol>
            
            <p><b>Alternatively, using Monasca CLI:</b></p>
            
            <ol>
                <li>Run <codeblock>monasca alarm-list --state undetermined --metric-name swiftlm.systems.connectivity.connect_check --metric-dimensions target_port=35357</codeblock></li>
                <li>Using the alarm id from step 1, run <codeph>monasca alarm-delete &lt;id></codeph></li>                              
            </ol>
            
        </section>

    </body>
</topic>



