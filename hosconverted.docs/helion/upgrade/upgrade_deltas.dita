<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="upgrade_patch">
    <title><ph conkeyref="HOS-conrefs/product-title"/>Delta Upgrades</title>
    <body><!--not tested-->
        <p conkeyref="HOS-conrefs/applies-to"/>
        
        
        <section id="overview">
            
            <p>It is now possible to apply minor, patch and hot-fix updates using <codeph>delta</codeph> kits. These 
                <codeph>delta</codeph> kits contain only the set of changes directly related to the update, so they are 
                smaller in size, and more importantly, they reduce the impact of the update on a running cloud, by
                only modifying the services that have  changed in that release.
            </p>
            
            <p>A full <keyword keyref="kw-hos"/> kit contains the following elements:</p>
            
            <ul>
                <li>A set of packages: hlinux debs and RHEL rpms.</li>
                <li>A set of python virtual environments (one per service/distro combination).</li>
                <li>A set of Ansible playbooks for both lifecycle manager  setup and carrying out lifecycle operations 
                    for an OpenStack cloud (deploy, upgrade, etc.)</li>
                <li> A set of input model yaml files, which contains both <keyword keyref="kw-hos"/>
                    service definitions and example sets of cloud model files.</li>
                <li>A set of config file symlinks, which determines the configuration files that are exposed for 
                    customer modification in the <codeph>my_cloud</codeph> area on the lifecycle manager.</li>                
            </ul>
            
            <p>A patch kit will contain only the venvs that have changed (relative to the prior release). So in comparison to the full kit, a patch kit will have:</p>
            
            <ol>
                <li>The set of new or modified venvs relative to the previous release.</li>
                <li>A complete set of Ansible playbooks, input model yml file and config file  symlinks. Regardless of the changes being 
                    supplied in a minor/patch update kit, these will always be supplied in full. This size of these artefacts 
                    is insignificant in comparison with hlinux/RHEL packages and service venvs.</li>
            </ol>
            
            <p>
            There are a number of considerations to take into account when using delta upgrades:    
            </p>
            
           <ol>
               <li>The use of a patch kit does not simplify the operations needed to upgrade your
                    cloud - the same upgrade procedure will be followed whether using a patch kit or
                    a full kit.</li>
               <li>A minor, patch or hotfix release can only be applied on top of a cloud running with the immediately preceding release, for example:
               <ol>
                  
                   <li>2.1.5 delta update can be applied on top of a 2.1.4 cloud</li>
                   <li>2.1.5 delta update cannot be applied on top of a 2.1.3 cloud</li>
                   
               </ol>
               </li>
               
               <li>The delta update process will not support major upgrades, e.g. 2.x to  3.0, or any upgrade involving a change in OpenStack release.</li>
               <li>The individual service venvs in a patch kit are complete venvs, not patches for
                    the venvs.</li>
           </ol>
            
            
        </section>
    </body>
</topic>
