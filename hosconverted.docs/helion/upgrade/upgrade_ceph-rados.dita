<?xml version="1.0" encoding="UTF-8"?>
<!--Edit status: not edited-->
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="VPNaaSUpgrade">
  <title><ph conkeyref="HOS-conrefs/product-title"/>VPN Service Upgrade</title>
  <body>
    <!--not tested-->
    <p conkeyref="HOS-conrefs/applies-to"/>
    <section id="Upgrade">
      <title>Upgrade from <keyword keyref="kw-hos"/>
        <keyword keyref="kw-hos-version-20-21"/></title>
      <p>It is not possible to upgrade your <keyword keyref="kw-hos"/>
        <keyword keyref="kw-hos-version-20-21"/> VPNaaS objects to <keyword
          keyref="kw-hos-phrase-30"/> automatically. This is because the <keyword keyref="kw-hos"/>
        <keyword keyref="kw-hos-version-20-21"/> VPNaaS uses OpenSwan and the <keyword
          keyref="kw-hos-phrase-30"/> VPNaaS uses StrongSwan and currently there isn't a clean
        migration path for the upgrade. </p>
      <p>To upgrade VPNaaS: <ol>
          <li>Record all information for all existing VPN configurations. <ol>
              <li>Display list of IKE policies
                <codeblock>neutron vpn-ikepolicy-list</codeblock></li>
              <li>Repeat for all IKE policies to be migrated
                <codeblock>neutron vpn-ikepolicy-show &lt;ikepolicy&gt;</codeblock></li>
              <li>Display list of IPSEC policies
                <codeblock>neutron vpn-ipsecpolicy-list</codeblock></li>
              <li>Repeat for all IPSEC policies to be migrated
                <codeblock>neutron vpn-ipsecpolicy-show &lt;ipsecpolicy&gt;</codeblock></li>
              <li>Display Service list <codeblock>neutron vpn-service-list</codeblock></li>
              <li>Repeat for all Services
                <codeblock>neutron vpn-service-show &lt;service&gt;</codeblock></li>
              <li>Display Connections list
                <codeblock>neutron ipsec-site-connection list</codeblock></li>
              <li>Repeat for each connection <codeblock>neutron ipsec-site-connection-show &lt;connection&gt;</codeblock>
                <note type="important"> The output of <codeph>neutron
                    ipsec-site-connection-show</codeph> will contain the preshared secret key that
                  is used to secure the VPN connection. Please ensure the confidentiality of this
                  information.</note>
              </li>
            </ol>
          </li>
          <li>Delete all <keyword keyref="kw-hos"/>
            <keyword keyref="kw-hos-version-20-21"/> VPNaaS IPSec site connection and VPN service
            objects. The IKE and IPSec policies need not be deleted. Repeat each command as
            necessary.
            <codeblock>neutron ipsec-site-connection-delete &lt;connection&gt;
neutron vpn-service-delete &lt;service&gt;</codeblock>
          </li>
          <li>Perform the <keyword keyref="kw-hos-phrase-30"/> upgrade.</li>
          <li>Recreate the <keyword keyref="kw-hos-phrase-30"/> VPNaaS VPN service and IPSec site
            connection objects.</li>
        </ol>
      </p>
      <p>For information on creating, configuring or troubleshooting of VPNaaS objects, see <xref
          href="../networking/vpnaas.dita#UsingVPNaaS"/></p>
    </section>
    <section>
      <p>Recreate the <keyword keyref="kw-hos-phrase-30"/> VPNaaS VPN service and IPSec site
        connection objects, using the information recorded in step 1) </p>
    </section>
  </body>
</topic>
