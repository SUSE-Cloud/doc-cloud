<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd" >
<topic xml:lang="en-us" id="neutron_external_networks">
  <title><ph conkeyref="HOS-conrefs/product-title"/>Neutron External Networks</title>

  <body>
    <section>
      <p>This topic explains how to create a Neutron external network. </p>
      <title>External networks overview</title>
        <p>External networks provide access to the internet.</p>
      
        <p>The typical use is to provide an IP address that can be used to reach a 
          VM from an external network which can be a public network like the 
          internet or a network that is private to an organization.
        </p>
    </section>
   
    <!-- This content is included (conref'd) from Joel's external network doc in Installation/UI Verification -->
    <section conref="../operations/create_extnet.dita#create_extnet/playbook"/>
    <section conref="../operations/create_extnet.dita#create_extnet/cli"/>
    
    <section id="MultipleExternalNetworks">
      <title>Multiple External Networks</title>     
      <p><keyword keyref="kw-hos"/> provides the ability to have multiple external networks, 
        by using the Network Service (Neutron) provider networks for external networks. 
        You can configure <keyword keyref="kw-hos"/> to allow the use of provider VLANs as 
        external networks by following these steps.
      </p>
      <p>
        <ol>
          <li>Do NOT include the <codeph>neutron.l3_agent.external_network_bridge</codeph>
            tag in the network_groups definition for your cloud. This results in the 
            <codeph>l3_agent.ini external_network_bridge</codeph> being set to an empty value 
            (rather than the traditional br-ex).</li>
          <li>Configure your cloud to use provider VLANs, by specifying the
              <codeph>provider_physical_network</codeph> tag on one of the network_groups defined
            for your cloud. <p>For example, to run provider VLANS over the EXAMPLE network group:
              (some attributes omitted for brevity)
              <codeblock>network-groups:
                
  - name: EXAMPLE
    tags:
      - neutron.networks.vlan:
          provider-physical-network: physnet1
              </codeblock>
            </p>
          </li>
          <li>After the cloud has been deployed, you can create external networks using provider 
            VLANs. 
            <p>For example, using the Network Service CLI:
              <ol>
                <li>Create external network 1 on vlan101
                  <codeblock>neutron net-create --provider:network_type vlan --provider:physical_network physnet1 --provider:segmentation_id 101 ext-net1 --router:external true</codeblock>
                </li>
                <li>Create external network 2 on vlan102
                  <codeblock>neutron net-create --provider:network_type vlan --provider:physical_network physnet1 --provider:segmentation_id 102 ext-net2 --router:external true</codeblock>
                </li>
              </ol>
            </p>
          </li>
        </ol>
      </p>
     
    </section> 
   </body>
</topic>
