<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><!--Edit status: not edited-->
<section id="concept_loadbalancers">
   <title>
      <phrase/>Load Balancers</title>
        <para/>
        
    <para>
      <guilabel>Load-balancers</guilabel> provide a specific type of routing and are 
        defined <!--in <uicontrol>network-groups</uicontrol> -->as a relationship between the virtual IP
        address (VIP) on a network in one <guilabel>network group</guilabel> and a set of service
        endpoints (which may be on <guilabel>networks</guilabel> in the same or a different
        <guilabel>network-group</guilabel>).</para>
        <para>As each <guilabel>load-balancer</guilabel> is defined providing a virtual IP on a <guilabel>network-group</guilabel>, it follows
        that those <guilabel>network-group</guilabel>s <!--containing a
        <uicontrol>load-balancer</uicontrol>--> can each only have one <guilabel>network</guilabel>
        associated to them.</para>
        
    <para>The <guilabel>load-balancer</guilabel> definition includes a list of
        <guilabel>service-components</guilabel> and endpoint roles it will provide a virtual IP
        for. This model allows service-specific <guilabel>load-balancers</guilabel> to be defined
        on different <guilabel>network-groups</guilabel>. A "default" value is used to express
        "all service-components" which require a virtual IP address and are not explicitly
        configured in another <guilabel>load-balancer</guilabel> configuration. The details of how
        the <guilabel>load-balancer</guilabel> should be configured for each service, such as
        which ports to use, how to check for service liveness, etc, are provided in the
        <phrase/> supplied service definition files.</para>
        
        
        <para userlevel="INTERNAL">Where there are multiple instances of a service (i.e in a cloud with multiple control-planes),
            each control-plane needs its own set of virtual IP address and different values for some properties such as 
            the external name and security certificate.   To accommodate this in <phrase/>, 
            load-balancers are defined as part of the control-plane, with the network groups defining just 
            which load-balancers are attached to them.</para>    
        
        <para userlevel="INTERNAL">Load balancers are always implemented by an ha-proxy service in the same control-plane as the services.  </para>
        

    
    </section>
