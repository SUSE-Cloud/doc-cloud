<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><!--Edit status: not edited-->
<section id="entryscale_swift">
   <title>
      <phrase/>Entry-scale Swift Model</title>
        
        
       
    <para>This example shows how <phrase/> can be configured to provide a Swift-only
        configuration, consisting of three controllers and one or more Swift object servers.</para>

    <mediaobject>
         <imageobject role="fo"><imagedata fileref="media-examples-entry_scale_swift.png" width="75%" format="PNG"/></imageobject><imageobject role="html"><imagedata fileref="media-examples-entry_scale_swift.png"/></imageobject>
      </mediaobject>

    <para><ulink url="../../../media/examples/entry_scale_swift_lg.png">Download a high-resolution version</ulink></para>

        <para><ulink url="./../../../media/templates/HOS_Network_Diagram_Template.zip">Download Editable Visio Network Diagram Template</ulink></para>

    <para>The example requires the following networks:</para>

    <itemizedlist>
        <listitem>
         <para><emphasis role="bold">External API</emphasis> - This is the network that users will use to make requests to the
            cloud.</para>

      </listitem>
        <listitem>
         <para><emphasis role="bold">Swift</emphasis> - This is the network that will be used for all data traffic between the
            Swift services.</para>

      </listitem>
        <listitem>
         <para><emphasis role="bold">Management</emphasis> - This is the network that will be used for all internal traffic
            between the cloud services, including node provisioning. This network must be on an
            untagged VLAN.</para>

      </listitem>
    </itemizedlist>
    <para>All of these networks are configured to be presented via a pair of bonded NICs. The example
        also enables provider VLANs to be configured in Neutron on this interface.</para>

    <para>In the diagram "External Routing" refers to whatever routing you want to provide to allow
        users to access the External API. "Internal Routing" refers to whatever routing you want to
        provide to allow administrators to access the Management network.</para>

    <para>If you are using <phrase/> to install the operating system, then an
        IPMI/iLO network connected to the IPMI/iLO ports of all servers and routable from the
        lifecycle manager is also required for BIOS and power management of the node during the
        operating system installation process.</para>

    <para>In the example the controllers use one disk for the operating system and two disks for
        Swift proxy and account storage. The Swift object servers use one disk for the operating
        system and four disks for Swift storage. These values can be modified to suit your
        environment.</para>


        <para>These recommended minimums are based on the included  included with the base installation and are suitable only for
      demo environments. For production systems you will want to consider your capacity and
      performance requirements when making decisions about your hardware.</para>

   <para>The <literal>entry-scale-swift</literal> example runs the Swift proxy, account and container
      services on the three controller servers. However, it is possible to extend the model to
      include the Swift proxy, account and container services on dedicated servers (typically
      referred to as the Swift proxy servers). If you are using this model, we have included the
      recommended Swift proxy servers specs in the table below.</para>

   <informaltable colsep="1" rowsep="1">
      <tgroup cols="7">
        <colspec colname="c1" colnum="1"/>
        <colspec colname="c2" colnum="2"/>
        <colspec colname="c3" colnum="3"/>
        <colspec colname="c4" colnum="4"/>
        <colspec colname="c5" colnum="5"/>
        <colspec colname="c6" colnum="6"/>
        <colspec colname="c7" colnum="7"/>
        <!--<colspec colname="c8" colnum="8"/>-->
        <thead id="idg-planning----architecture-examples-entryscale_swift-dita-3">
            <row>
               <entry morerows="1">Node Type</entry>
               <entry morerows="1">Role Name</entry>
               <entry morerows="1">Required Number</entry>
               <entry namest="c4" nameend="c7" align="center">Server Hardware - Minimum Requirements
              and Recommendations</entry>
            </row>
            <row>
               <entry>Disk </entry>
               <entry>Memory</entry>
               <entry>Network</entry>
               <entry>CPU </entry>
            </row>
        </thead>
        <tbody>
            <row id="idg-planning----architecture-examples-entryscale_swift-dita-4">
               <entry>Dedicated lifecycle manager (optional)</entry>
               <entry>Lifecycle-manager</entry>
               <entry>1</entry>
               <entry>300 GB</entry>
               <entry>8 GB</entry>
               <entry>1 x 10 Gbit/s with PXE Support</entry>
               <entry>8 CPU (64-bit) cores total (Intel x86_64)</entry>
            </row>
            <row id="idg-planning----architecture-examples-entryscale_swift-dita-5">
               <entry>Control Plane</entry>
               <entry>Controller</entry>
               <entry>3</entry>
               <entry>
                  <itemizedlist>
                     <listitem>
                        <para>1 x 600 GB (minimum) - operating system drive</para>

                     </listitem>
                     <listitem>
                        <para>2 x 600 GB (minimum) - Swift account/container data drive</para>

                     </listitem>
                  </itemizedlist>
               </entry>
               <entry>64 GB</entry>
               <entry>2 x 10 Gbit/s with one PXE enabled port</entry>
               <entry>8 CPU (64-bit) cores total (Intel x86_64)</entry>
            </row>
            <row id="idg-planning----architecture-examples-entryscale_swift-dita-6">
               <entry>Swift Object</entry>
               <entry>swobj</entry>
               <entry>3</entry>
               <entry>If using x3 replication only: <itemizedlist>
                     <listitem>
                        <para>1 x 600 GB (minimum, see considerations at bottom of page for more details)</para>

                     </listitem>
                  </itemizedlist>
                  <para>If using Erasure Codes only or a mix of x3 replication and Erasure Codes:</para>

                  <itemizedlist>
                     <listitem>
                        <para>6 x 600 GB (minimum, see considerations at bottom of page for more details)</para>

                     </listitem>
                  </itemizedlist>
                  <note>
                     <para>The disk speeds (RPM) chosen should be consistent within the same ring or
                storage policy. It's best to not use disks with mixed disk speeds within the same
                Swift ring.</para>

                  </note>
               </entry>
               <entry>32 GB (see considerations at bottom of page for more details)</entry>
               <entry>2 x 10 Gbit/s with one PXE enabled port</entry>
               <entry>8 CPU (64-bit) cores total (Intel x86_64)</entry>
            </row>
            <row>
               <entry>Swift Proxy, Account, and Container</entry>
               <entry>swpac</entry>
               <entry>3</entry>
               <entry>2 x 600 GB (minimum, see considerations at bottom of page for more
              details)</entry>
               <entry>64 GB (see considerations at bottom of page for more details)</entry>
               <entry>2 x 10 Gbit/s with one PXE enabled port</entry>
               <entry>8 CPU (64-bit) cores total (Intel x86_64)</entry>
            </row>
        </tbody>
      </tgroup>
   </informaltable>
   <para><emphasis role="bold">Considerations for your Swift object and proxy, account, container servers RAM and disk
        capacity needs</emphasis></para>

   <para>Swift can have a diverse number of hardware configurations. For example, a Swift object
      server may have just a few disks (minimum of 6 for erasure codes) or up to 70 and beyond. The
      memory requirement needs to be increased as more disks are added. The general rule of thumb
      for memory needed is 0.5 GB per TB of storage. For example, a system with 24 hard drives at
      8TB each, giving a total capacity of 192TB, should use 96GB of RAM. However, this does not
      work well for a system with a small number of small hard drives or a very large number of very
      large drives. So, if after calculating the memory given this guideline, if the answer is less
      than 32GB then go with 32GB of memory minimum and if the answer is over 256GB then use 256GB
      maximum, no need to use more memory than that.</para>

   <para>When considering the capacity needs for the Swift proxy, account, and container (PAC)
      servers, you should calculate 2% of the total raw storage size of your object servers to
      specify the storage required for the PAC servers. So, for example, if you were using the
      example we provided earlier and you had an object server setup of 24 hard drives with 8TB each
      for a total of 192TB and you had a total of 6 object servers, that would give a raw total of
      1152TB. So you would take 2% of that, which is 23TB, and ensure that much storage capacity was
      available on your Swift proxy, account, and container (PAC) server cluster. If you had a
      cluster of three Swift PAC servers, that would be ~8TB each.</para>

   <para>Another general rule of thumb is that if you are expecting to have more than a million
      objects in a container then you should consider using SSDs on the Swift PAC servers rather
      than HDDs.</para>

        
    </section>
