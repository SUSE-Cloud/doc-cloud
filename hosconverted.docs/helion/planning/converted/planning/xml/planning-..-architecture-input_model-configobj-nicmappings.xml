<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><!--Edit status: not edited-->
<section id="configobj_nicmappings">
   <title>
      <phrase/>NIC Mappings</title>
        


    <para>The <guilabel>nic-mappings</guilabel> configuration object is used to ensure that the
            network device name used by the operating system always maps to the same physical
            device. A <guilabel>nic-mapping</guilabel> is associated to a
                <guilabel>server</guilabel> in the server definition file. (see ). Devices should be named
                <literal>hedN</literal> to avoid name clashes with any other devices configured during
            the operating system install as well as any interfaces that are not being managed by
                <phrase/>, ensuring that all devices on a baremetal machine are
            specified in the file. An excerpt from <literal>nic_mappings.yml</literal>
            illustrates:</para>

        <screen>---
  product:
    version: 2
        
  nic-mappings:
       
    - name: HP-DL360-4PORT
      physical-ports:
        - logical-name: hed1
          type: simple-port
          bus-address: "0000:07:00.0"
        
        - logical-name: hed2
          type: simple-port
          bus-address: "0000:08:00.0"
          nic-device-type: '8086:10fb'
        
        - logical-name: hed3
          type: multi-port
          bus-address: "0000:09:00.0"
          port-attributes:
              port-num: 0
        
        - logical-name: hed4
          type: multi-port
          bus-address: "0000:09:00.0"
          port-attributes:
              port-num: 1</screen>
    <para>Each entry in the <guilabel>nic-mappings</guilabel> list has the following
        attributes:</para>

    <informaltable id="nic_mappings" colsep="1" rowsep="1">
         <tgroup cols="2">
                <colspec colname="c1" colnum="1"/>
                <colspec colname="c2" colnum="2"/>
                <thead>
                    <row>
                        <entry>Key</entry>
                        <entry>Value Description</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>name</entry>
                        <entry>An administrator-defined name for the mapping. This name may be used in a
                            server definition (see ) to
                            apply the mapping to that server.</entry>
                    </row>
                    <row>
                        <entry>physical-ports</entry>
                        <entry>A list containing device name to address mapping information.</entry>
                    </row>
                </tbody>
            </tgroup>
      </informaltable>

    <para>Each entry in the <guilabel>physical-ports</guilabel> list has the following
        attributes:</para>

    <informaltable id="physical_ports" colsep="1" rowsep="1">
         <tgroup cols="2">
                <colspec colname="c1" colnum="1"/>
                <colspec colname="c2" colnum="2"/>
                <thead>
                    <row>
                        <entry>Key</entry>
                        <entry>Value Description</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>logical-name</entry>
                        <entry>The network device name that will be associated with the device at the
                            specified <emphasis>bus-address</emphasis>. The logical-name specified here can be used as a
                            device name in network interface model definitions. (see )</entry>
                    </row>
                    <row>
                        <entry>type</entry>
                        <entry>The type of port. <phrase/> supports "simple-port" and
                            "multi-port".  Use "simple-port" if your device has a unique bus-address.  Use "multi-port" 
                            if your hardware requires a "port-num" attribute to identify a single port on a multi-port 
                            device.  An examples of such a device is:
                            <itemizedlist>
                                <listitem>
                           <para>Mellanox Technologies MT26438 [ConnectX VPI PCIe 2.0 5GT/s - IB QDR / 10GigE Virtualization+]</para>
                        </listitem>
                                <!-- DOCS-4025 <li>Mellanox Technologies MT27520 Family [ConnectX-3 Pro]</li>-->
                            </itemizedlist>
                        </entry>
                    </row>
                    <row>
                        <entry>bus-address</entry>
                        <entry>PCI bus address of the port. Enclose the bus address in quotation marks so
                            yaml does not misinterpret the embedded colon (:) characters. See <xref linkend="preinstall_checklist"/> for details on how to determine this
                            value.</entry>
                    </row>
                    <row>
                        <entry>port-attributes (required if type is <literal>multi-port</literal>)</entry>
                        <entry>Provides a list of attributes for the physical port. The current
                            implementation supports only one attribute, "port-num"<!--, which is used to identify
                            individual ports on network adapters that support more than one port on the same
                            <codeph>bus-address</codeph>-->. Multi-port devices share a bus-address. Use the "port-num" 
                            attribute to identify which physical port on the multi-port device to map. See <xref linkend="preinstall_checklist"/> for details on how to determine this
                            value.
                        </entry>
                    </row>
                    <row id="nic-device-type">
                        <entry>nic-device-type
                            (optional)
                        </entry>
                       <entry>Specifies the PCI vendor ID and device ID of the port in the format of  <literal>&lt;vendor_id&gt;:&lt;device_id&gt;</literal>,
                          for example, <literal>8086:10fb</literal>s.
                           
                        </entry>
                    </row>
                    
                    
                </tbody>
            </tgroup>
      </informaltable>



    </section>
