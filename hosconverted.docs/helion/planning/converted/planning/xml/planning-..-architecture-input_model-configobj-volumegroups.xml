<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.xml"> %entities; ]><!--Edit status: not edited-->
<section id="configobj_volumegroups">
   <title>
      <phrase/>
      <!-- Configuration Object -  -->Volume Groups</title>
        
        
        
    <para>The <guilabel>volume-groups</guilabel> configuration object is used to define volume
        groups and their constituent logical volumes.</para>

    <para>Note that volume-groups are not exact analogs of device-groups. A volume-group specifies a
        set of physical volumes used to make up a volume-group that is then subdivided into multiple
        logical volumes.</para>

    <para>The <phrase/> operating system installation automatically creates a volume-group
        name "hlm-vg" on the first drive in the system. It creates a "root" logical volume there.
        The volume-group can be expanded by adding more physical-volumes (see examples). In
        addition, it is possible to create more logical-volumes on this volume-group to provide
        dedicated capacity for different services or file system mounts.</para>

        <screen>
   volume-groups:
     - name: hlm-vg
       physical-volumes:
         - /dev/sda_root
        
       logical-volumes: 
         - name: root
           size: 35%
           fstype: ext4
           mount: /
        
         - name: log
           size: 50%
           mount: /var/log
           fstype: ext4
           mkfs-opts: -O large_file
        
         - ...
         
     - name: vg-comp
       physical-volumes:
         - /dev/sdb
       logical-volumes:
         - name: compute
           size: 95%
           mount: /var/lib/nova
           fstype: ext4
           mkfs-opts: -O large_file</screen>
    <informaltable id="volume_groups" colsep="1" rowsep="1">
         <tgroup cols="2">
                <colspec colname="c1" colnum="1"/>
                <colspec colname="c2" colnum="2"/>
                <thead>
                    <row>
                        <entry>Key</entry>
                        <entry>Value Descriptions</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>name</entry>
                        <entry>The name that will be assigned to the volume-group</entry>
                    </row>
                    <row>
                        <entry id="idg-planning----architecture-input_model-configobj-volumegroups-dita-3">physical-volumes</entry>
                        <entry>
                     <para>A list of physical disks that make up the volume group.</para> 
                            
                           <para> As installed
                            by the <phrase/> operating system install process, the volume group
                            "hlm-vg" will use a large partition (sda_root) on the first disk. This can be
                            expanded by adding additional disk(s).</para>
                        
                            <important>
                        <para>Multipath storage should be listed as the corresponding 
                                <literal>/dev/mapper/mpath&lt;x&gt;</literal></para>
                     </important>
                        </entry>
                    </row>
                    <row>
                        <entry>logical-volumes</entry>
                        <entry>A list of logical volume devices to create from the above named volume
                            group.</entry>
                    </row>
                    <row>
                        <entry>name</entry>
                        <entry>The name to assign to the logical volume.</entry>
                    </row>
                    <row>
                        <entry>size</entry>
                        <entry>The size, expressed as a percentage of the entire volume group capacity, to
                            assign to the logical volume.</entry>
                    </row>
                    <row>
                        <entry>fstype (optional)</entry>
                        <entry>The file system type to create on the logical volume. If nonE specified, the
                            volume is not formatted.</entry>
                    </row>
                    <row>
                        <entry>mkfs-opts (optional)</entry>
                        <entry>Options, e.g. <literal>-O large_file</literal> to pass to the mkfs
                            command.</entry>
                    </row>
                    <row>
                        <entry>mode (optional)</entry>
                        <entry>The <literal>mode</literal> changes the root file system mode bits, which can
                            be either a symbolic representation or an octal number representing the bit patten
                            for the new mode bits.                            
                        </entry>
                    </row>
                    <row>
                        <entry>mount (optional)</entry>
                        <entry>Mount point for the file system.</entry>
                    </row>
                    <row>
                        <entry>consumer attributes (optional, consumer dependent)</entry>
                        <entry>
                            <para>These will vary according to the service consuming the device group. The
                                examples section provides sample content for the different services.</para>
                            <para>Note, not all services support the use of logical volumes. VSA requires raw
                                devices.</para>
                  </entry>
                    </row>
                </tbody>
            </tgroup>
      </informaltable>

    </section>
