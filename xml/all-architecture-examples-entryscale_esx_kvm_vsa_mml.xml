<?xml version="1.0"?>
<!DOCTYPE section [
 <!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<!---->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="example_entryscale_esx_mml"><title>&kw-hos-tm; &kw-hos-version-50;: Entry-scale ESX, KVM with VSA Model with
        Dedicated Cluster for Metering, Monitoring, and Logging</title>
        <!---->
        <para><para xml:id="idg-all-architecture-examples-entryscale_esx_kvm_vsa_mml-xml-4"><phrase><phrase/></phrase></para></para>

        <para>This model is a variant of the Entry-scale ESX KVM with VSA model. It is designed to
            support greater levels of metering, monitoring, and logging.</para>

        <itemizedlist>
            <listitem><para>Metering - All meters required to support charge-back/show-back for core
                Infrastructure as a Service (IaaS) elements.</para>
</listitem>
            <listitem><para>Logging - Run all services at INFO level with the ability to change the settings to
                DEBUG in order to triage specific error conditions. Minimum retention for logs is 30
                days to satisfy audit and compliance requirements.</para>
</listitem>
            <listitem><para>Monitoring - Full performance metrics and health checks for all services.</para>
</listitem>
        </itemizedlist>
        <para>In order to provide increased processing power for these services, the following
            configuration changes are made to the control plane in this model:</para>

        <itemizedlist>
            <listitem><para>All services associated with metering, monitoring, and logging run on a dedicated
                three-node cluster. Three nodes are required for high availability with quorum.</para>
</listitem>
            <listitem><para>A dedicated three node cluster is used for RabbitMQ message queue and database
                services. This cluster is also used to provide additional processing for the message
                queue and database load associated with the additional metering, monitoring, and
                logging load. Three nodes are required for high availability with quorum.</para>
</listitem>
            <listitem><para>The main API cluster is reduced to two nodes. These services are stateless and do
                not require a quorum node for high availability.</para>
</listitem>
        </itemizedlist>
        <mediaobject><imageobject  role="fo"><imagedata fileref="media-hos.docs-exampleconfigs-Entry-ScaleESX-KVMwithVSADedicatedMML.png" width="75%" format="PNG"/></imageobject><imageobject  role="html"><imagedata fileref="media-hos.docs-exampleconfigs-Entry-ScaleESX-KVMwithVSADedicatedMML.png"/></imageobject></mediaobject>

        <para><link xlink:href="../../../media/hos.docs/exampleconfigs/Entry-ScaleESX-KVMwithVSADedicatedMML.png">Download</link></para>

        <para><link xlink:href="./../../../media/templates/HOS_Network_Diagram_Template.zip">Download Editable Visio Network Diagram Template</link></para>

        <para>The physical networking configuration is also largely the same as the KVM example, with
            the default GUEST network VxLAN as the Neutron networking model.</para>

        <para>A separate configuration network (CONF) is required for configuration access from the
            lifecycle manager. This network must be reachable from the Management network.</para>


        <!----><sidebar xml:id="idg-all-architecture-examples-entryscale_esx_kvm_vsa_mml-xml-6"><para>These recommended minimums are based on the included  included with the base installation and are suitable only for
      demo environments. For production systems you will want to consider your capacity and
      performance requirements when making decisions about your hardware.</para>
<para>&kw-hos-phrase; currently supports the following ESXi versions:</para>
<itemizedlist>
      <listitem><para>ESXi version 5.5 (Update 3)</para>
</listitem>
      <listitem><para>ESXi version 6.0</para>
</listitem>
      <listitem><para>ESXi version 6.0 (Update 1b)</para>
</listitem>
    </itemizedlist><para>The following are the requirements for your vCenter server:</para>
<itemizedlist>
      <listitem><para>Software </para>
<itemizedlist>
          <listitem><para>vCenter 5.5 Update 3 and above (It is recommended to run the same server version as
            the ESXi hosts)</para>
</listitem>
        </itemizedlist></listitem>
      <listitem><para>License Requirements </para>
<itemizedlist>
          <listitem><para>vSphere Enterprise Plus license</para>
</listitem>
        </itemizedlist></listitem>
    </itemizedlist><informaltable colsep="1" rowsep="1"><tgroup cols="7">
        <colspec colname="c1" colnum="1"/>
        <colspec colname="c2" colnum="2"/>
        <colspec colname="c3" colnum="3"/>
        <colspec colname="c4" colnum="4"/>
        <colspec colname="c5" colnum="5"/>
        <colspec colname="c6" colnum="6"/>
        <colspec colname="c7" colnum="7"/>
        <!---->
        <thead>
          <row>
            <entry morerows="1">Node Type</entry>
            <entry morerows="1">Role Name</entry>
            <entry morerows="1">Required Number</entry>
            <entry namest="c4" nameend="c7" align="center">Server Hardware - Minimum Requirements
              and Recommendations</entry>
          </row>
          <row>
            <entry>Disk </entry>
            <entry>Memory</entry>
            <entry>Network</entry>
            <entry>CPU </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>Dedicated lifecycle manager (optional)</entry>
            <entry>Lifecycle-manager</entry>
            <entry>1</entry>
            <entry>300 GB</entry>
            <entry>8 GB</entry>
            <entry>1 x 10 Gbit/s with PXE Support</entry>
            <entry>8 CPU (64-bit) cores total (Intel x86_64)</entry>
          </row>
          <row>
            <entry morerows="2">Control Plane</entry>
            <entry>Core-API Controller</entry>
            <entry>2</entry>
            <entry>
              <itemizedlist>
                <listitem><para>1 x 600 GB (minimum) - operating system drive</para>
</listitem>
                <listitem><para>2 x 300 GB (minimum) - Swift drive</para>
</listitem>
              </itemizedlist>
            </entry>
            <entry>128 GB</entry>
            <entry>2 x 10 Gbit/s with PXE Support</entry>
            <entry>24 CPU (64-bit) cores total (Intel x86_64)</entry>
          </row>
          <row>
            <entry>DBMQ Cluster</entry>
            <entry>3</entry>
            <entry>
              <itemizedlist>
                <listitem><para>1 x 600 GB (minimum) - operating system drive</para>
</listitem>
                <listitem><para>1 x 300 GB (minimum) - MySQL drive</para>
</listitem>
              </itemizedlist></entry>
            <entry>96 GB</entry>
            <entry>2 x 10 Gbit/s with PXE Support</entry>
            <entry>24 CPU (64-bit) cores total (Intel x86_64)</entry>
          </row>
          <row>
            <entry>Metering Mon/Log Cluster</entry>
            <entry>3</entry>
            <entry>
              <itemizedlist>
                <listitem><para>1 x 600 GB (minimum) - operating system drive</para>
</listitem>
              </itemizedlist>
            </entry>
            <entry>128 GB</entry>
            <entry>2 x 10 Gbit/s with one PXE enabled port</entry>
            <entry>24 CPU (64-bit) cores total (Intel x86_64)</entry>
          </row>
          <row>
            <entry>Compute (ESXi hypervisor)</entry>
            <entry/>
            <entry>2 (minimum)</entry>
            <entry>2 X 1 TB (minimum, shared across all nodes)</entry>
            <entry>64 GB (memory must be sized based on the virtual machine instances hosted on the
              Compute node)</entry>
            <entry>2 x 10 Gbit/s +1 NIC (for Data Center access)</entry>
            <entry>16 CPU (64-bit) cores total (Intel x86_64)</entry>
          </row>
          <row>
            <entry>Compute (KVM hypervisor)</entry>
            <entry>kvm-compute</entry>
            <entry>1-3</entry>
            <entry>2 X 600 GB (minimum)</entry>
            <entry>32 GB (memory must be sized based on the virtual machine instances hosted on the
              Compute node)</entry>
            <entry>2 x 10 Gbit/s with one PXE enabled port</entry>
            <entry>8 CPU (64-bit) cores total (Intel x86_64) with hardware virtualization support.
              The CPU cores must be sized based on the VM instances hosted by the Compute
              node.</entry>
          </row>
          <row>
            <entry>Block Storage (Optional)</entry>
            <entry>VSA</entry>
            <entry>0 or 3 (which will provide the recommended redundancy)</entry>
            <entry>3 X 600 GB (minimum) See <xref linkend="preinstall_checklist"/> for more details.</entry>
            <entry>32 GB</entry>
            <entry>2 x 10 Gbit/s with one PXE enabled port</entry>
            <entry>8 CPU (64-bit) cores total (Intel x86_64)</entry>
          </row>
        </tbody>
      </tgroup></informaltable></sidebar><!---->
    </section>
