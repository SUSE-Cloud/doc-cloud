<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [ <!ENTITY % entities SYSTEM "entities.ent"> %entities; ]>
<!-- Copyright FUJITSU LIMITED 2017 -->
<chapter id="idg-cmmoperator-cmmoperator-install-c-cmmoinstall-xml-1">
 <title>Installation</title>
 <para>
  <phrase>CMM</phrase> provides two installation options:
  <itemizedlist>
   <listitem>
    <para>
     It can be installed in single mode. This means that the Monitoring Service
     is installed on one host machine. The details on installing
     <phrase>CMM</phrase> in single mode are described in the following
     sections.
    </para>
   </listitem>
   <listitem>
    <para>
     To ensure high availability and improve scalability, the Monitoring
     Service can also be clustered and installed on multiple hosts. For details
     on clustering <phrase>CMM</phrase>, refer to the <emphasis>Cluster
     Management Guide</emphasis>.
    </para>
   </listitem>
  </itemizedlist>
 </para>
 <para>
  The installation of <phrase>CMM</phrase> in single and cluster mode consists
  of several steps. They are partially executed by the Monitoring Service
  operator, and partially by the OpenStack operator.
 </para>
 <informalfigure>
  <mediaobject>
   <imageobject>
    <imagedata fileref="images-installation-type-overview.png" depth="346" width="350" align="left"/>
   </imageobject>
   <textobject><phrase>installation-type-overview.png</phrase>
   </textobject>
  </mediaobject>
 </informalfigure>
 <para>
  The installation of <phrase>CMM</phrase> comprises the following steps:
 </para>
 <orderedlist>
  <listitem>
   <para>
    Preparing the installation environment - done by the Monitoring Service
    operator and the OpenStack operator.
   </para>
  </listitem>
  <listitem>
   <para>
    Configuring the Control Machine - done by the Monitoring Service operator
    and the OpenStack operator.
   </para>
  </listitem>
  <listitem>
   <para>
    Installing the offline resources - done by the Monitoring Service operator
    only.
   </para>
  </listitem>
  <listitem>
   <para>
    Installing the OpenStack extensions required for the Monitoring Service -
    done by the OpenStack operator only.
   </para>
  </listitem>
  <listitem>
   <para>
    Installing the Monitoring Service - done by the Monitoring Service operator
    only.
   </para>
  </listitem>
 </orderedlist>
 <para>
  As a Monitoring Service operator, you also install and configure the agents
  for monitoring <phrase>CMM</phrase>. The OpenStack operator installs and
  configures the agents for monitoring the OpenStack platform. He also prepares
  the monitoring environment for the application operators who have booked a
  virtual machine in OpenStack.
 </para>
 <para>
  For installing the software components, <phrase>CMM</phrase> ships with an
  installer that is based on Ansible.
 </para>
 <bridgehead renderas="sect4">Installation Environment</bridgehead>
 <para>
  The following installation environment is the default installation
  environment for <phrase>CMM</phrase> in single mode:
 </para>
 <informalfigure>
  <mediaobject>
   <imageobject>
    <imagedata fileref="images-ansible-installation-connection.png" depth="206" width="327"/>
   </imageobject>
   <textobject><phrase>ansible-installation-connection.png</phrase>
   </textobject>
  </mediaobject>
 </informalfigure>
 <itemizedlist>
  <listitem>
   <para>
    The Monitoring Service operator installs the offline resources, the
    <phrase>CMM</phrase> components, and the required agents on one host
    (<phrase>CMM</phrase> host).
   </para>
  </listitem>
  <listitem>
   <para>
    The OpenStack operator installs the OpenStack extensions and the required
    agents for the OpenStack Keystone and the OpenStack Horizon service.
    Depending on the OpenStack environment, Keystone and Horizon are either
    installed on the same or on two separate hosts.
   </para>
   <para>
    The OpenStack operator can install additional agents for monitoring
    additional OpenStack services as required.
   </para>
  </listitem>
 </itemizedlist>
 <para>
  The installation of the <phrase>CMM</phrase> components is managed from a
  so-called Control Machine. You have to prepare a Control Machine for
  installing the <phrase>CMM</phrase> host. The OpenStack operator prepares a
  Control Machine for installing the OpenStack extensions on the Keystone and
  the Horizon host.
 </para>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cmmoperator-cmmoperator-install-c-cmmoprepare.xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cmmoperator-cmmoperator-install-c-cmmoprepansiblemaster.xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cmmoperator-cmmoperator-install-c-cmmoinstoffres.xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cmmoperator-cmmoperator-install-c-cmmoinstcmm.xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cmmoperator-cmmoperator-install-c-cmmoinstmetricsagent.xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cmmoperator-cmmoperator-install-c-cmmoinstlogagent.xml"/>
 <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cmmoperator-cmmoperator-install-c-cmmouninstall.xml"/>
</chapter>
