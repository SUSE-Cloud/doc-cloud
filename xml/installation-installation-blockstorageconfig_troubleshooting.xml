<?xml version="1.0"?>
<!DOCTYPE chapter [
 <!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<chapter xml:id="ts_cinder_config"
 xmlns="http://docbook.org/ns/docbook" version="5.1"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Troubleshooting the Block Storage Backend Configuration</title>
 <para>
  We have gathered some of the common issues that occur during the Block
  Storage configuration steps and organized them by product.
 </para>
 <para>
  <emphasis role="bold">Issue: You have forgotten the identifying information
  about your VSA cluster</emphasis>
 </para>
 <para>
  If you have forgotten the cluster name or IP address after creating the
  cluster in the CMC utility then you can perform the following steps to
  retrieve them:
 </para>
 <procedure>
  <step>
   <para>
    Log in to CMC console from the &lcm;/deployer node:
   </para>
   <screen>/opt/HP/StoreVirtual/UI/jre/bin/java -jar /opt/HP/StoreVirtual/UI/UI.jar</screen>
  </step>
  <step>
   <para>
    Log in to the Management group.
   </para>
  </step>
  <step>
   <para>
    On the left side of the CMC console screen, click
    <guimenu>mgmt</guimenu>. It expands and you will be able to
    see the cluster name.
   </para>
  </step>
  <step>
   <para>
    Click the cluster name. The page on the right hand side will populate with
    the cluster information.
   </para>
  </step>
  <step>
   <para>
    Click <literal>iSCSI</literal> on the right hand side of the page. The
    virtual IP address will be displayed in the tabular form. You can view your
    cluster ID here.
   </para>
  </step>
</procedure>
 <para>
  <emphasis role="bold">Issue: Error During VSA Deployment Exhibits When
  Running site.yml or hlm-deploy.yml</emphasis>
 </para>
 <para>
  When you are running either <literal>site.yml</literal> or
  <literal>hlm-deploy.yml</literal> and you get either of the errors below
  during the VSA deployment task, there is an error in your locale settings.
 </para>
 <para>
  Errors:
 </para>
<screen>
<?dbsuse-fo font-size="0.70em"?>
TASK: [VSA-DEP | deploy | Create VSA appliance] *******************************
failed: [helion-cp1-vsa0001-mgmt] =&gt; {"changed": true, "cmd": ["./vsa_automation",
"-f", "/etc/vsa/vsa_disks.json", "-ao", "False"], "delta": "0:00:00.368050", "end":
"2015-10-27 11:02:18.378824", "rc": 1, "start": "2015-10-27 11:02:18.010774", "warnings": []}
stderr: libvirt: Network Driver error : Network not found:
no network with matching name 'vsa-network'
Traceback (most recent call last):
   File "./vsa_automation", line 83, in &lt;module&gt;
      deployer.install_vsa()
   File "/opt/stack/venv/storevirtual-installer-20151022T080854Z/lib/python2.7/
	        site-packages/storevirtual_installer/deployer.py", line 88, in install_vsa
        self._roll_back_installation()
   File "/opt/stack/venv/storevirtual-installer-20151022T080854Z/lib/python2.7/
	        site-packages/storevirtual_installer/deployer.py", line 479,
					    in _roll_back_installation self._vsa_network_destroy()
   File "/opt/stack/venv/storevirtual-installer-20151022T080854Z/lib/python2.7/
	        site-packages/storevirtual_installer/deployer.py", line 493, in _vsa_network_destroy
          raise vsa_excs.NetworkDestroyFailed(msg)
          storevirtual_installer.vsa_excs.NetworkDestroyFailed:
					     Failed to destroy and undefine the network

FATAL: all hosts have already failed -- aborting</screen>
 <para>
  OR
 </para>
<screen>
<?dbsuse-fo font-size="0.70em"?>
Unable to get XML definition of storage pool -------------------------------------------.
       Err: exit status 1: setlocale: No such file or directory
error: failed to get pool '-------------------------------------------'
error: Storage pool not found: no storage pool with matching name '---------------------'</screen>
 <para>
  Fix:
 </para>
 <para>
  Make sure that the locale variables on the &lcm; are valid and
  then run the playbook again. You can set this variable to set your locale:
 </para>
<screen>export LC_ALL=C</screen>
</chapter>
