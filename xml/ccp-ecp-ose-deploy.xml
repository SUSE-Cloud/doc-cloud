<?xml version="1.0"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE section [
 <!ENTITY % entities SYSTEM "entity-decl.ent"> %entities;
]>
<section xmlns="http://docbook.org/ns/docbook"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="sec.ecp-setup-openstack">
 <title>Set Up OpenStack</title>
  <informalfigure>
   <mediaobject>
    <imageobject role="fo">
     <imagedata fileref="ccp-ose-deploy.png" width="75%" format="PNG"/>
    </imageobject>
    <imageobject role="html">
     <imagedata fileref="ccp-ose-deploy.png"/>
    </imageobject>
   </mediaobject>
  </informalfigure>
 <para>
  You can either run the following steps separately or run them in a
  single step all at the same time.
</para>
<section xml:id="ecp-in-separate-steps">
  <title>In separate steps</title>
  <section xml:id="ecp-configuring-caasp">
    <title>Configuring CaaSP</title>
    <para>
      Run the following to configure the CaaSP nodes for OpenStack:
    </para>
    <screen>./run.sh setup_caasp_workers_for_openstack</screen>
    <para>
      This will update your CaaSP workers to:
    </para>
    <itemizedlist>
      <listitem>
        <para>
          Point to your deployer host in /etc/hosts
        </para>
      </listitem>
      <listitem>
        <para>
          Copy your registry certificates (if developer mode is enabled)
        </para>
      </listitem>
      <listitem>
        <para>
          Create some directories of your workers with read/write mode
          for OpenStack software
        </para>
      </listitem>
    </itemizedlist>
  </section>
  <section xml:id="ecp-run-developer-plays">
    <title>Run developer plays</title>
    <para>
      If you are a developer and want to apply upstream patches (but not
      carry your own fork), you might want to run:
    </para>
    <screen>export SOCOK8S_DEVELOPER_MODE='True'
./run.sh patch_upstream</screen>
    <para>
      Build your own images by running:
    </para>
    <screen>export SOCOK8S_DEVELOPER_MODE='True'
./run.sh build_images</screen>
  </section>
  <section xml:id="ecp-deploy-openstack">
    <title>Deploy OpenStack</title>
    <para>
      Tip
    </para>
    <para>
      If you are a Helm chart developer, you can run OpenStack-Helm
      deployment on top of CaaSP without Airship:
    </para>
    <screen>./run.sh deploy_osh</screen>
    <para>
      To deploy OpenStack using Airship, run:
    </para>
    <screen>./run.sh deploy</screen>
  </section>
</section>
<section xml:id="ecp-in-a-single-step">
  <title>In a Single Step</title>
  <para>
    All of the above steps can be summarized in a single command <emphasis
    role="bold">(Do not run both separate and single step)</emphasis>.
  </para>
  <section xml:id="ecp-for-airship-deployment">
    <title>For Airship deployment</title>
    <para>
      Run the following to deploy Airship:
    </para>
    <screen>./run.sh setup_airship</screen>
    <para>
      If you want to patch upstream Helm charts or build your own
      images, run the following:
    </para>
    <screen>export SOCOK8S_DEVELOPER_MODE='True'
./run.sh setup_airship</screen>
    <note>
     <para>
      The process might take several minutes to finish. If you want to
      know what is happening, check out the Operations Guide page on
      <xref linkend="deploymentprogress"/>.
     </para>
    </note>
  </section>
  <section xml:id="ecp-for-openstack-helm-only-developers">
    <title>For OpenStack-Helm only (developers)</title>
    <para>
      Run the following to deploy OpenStack-Helm only:
    </para>
    <screen>./run.sh setup_openstack</screen>
    <para>
      If you want to patch upstream Helm charts and/or build your own
      images, run the run the following:
    </para>
    <screen>export SOCOK8S_DEVELOPER_MODE='True'
./run.sh setup_openstack</screen>
  </section>
  <section xml:id="ecp-verify-the-installation">
    <title>Verify the installation</title>
    <para>
      The <xref linkend="sec.verify-deployment"/> page has information for
      testing your Containerized SUSE OpenStack Cloud installation.
    </para>
  </section>
  <section xml:id="ecp-uninstalling-suse-containerized-openstack">
    <title>Uninstalling Containerized SUSE OpenStack Cloud</title>
    <para>
      See the <xref linkend="sec.uninstall"/> page for instructions.
    </para>
  </section>
</section>
</section>
