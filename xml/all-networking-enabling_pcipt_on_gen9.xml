<?xml version="1.0"?>
<!DOCTYPE section [
 <!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="pcipt-gen9"><title>&kw-hos-tm; &kw-hos-version-50;: Enabling PCI-PT on HPE DL360 Gen 9
    Servers</title>
    <sidebar><para>The HPE DL360 Gen 9 and HPE ProLiant systems with Intel processors use a region of system
        memory for sideband communication of management information. The BIOS sets up Reserved
        Memory Region Reporting (RMRR) to report these memory regions and devices to the operating
        system. There is a conflict between the Linux kernel and RMRR which causes problems with PCI
        pass-through (PCI-PT). This is needed for IOMMU use by DPDK. Note that this does not affect
        SR-IOV.</para>
<para>In order to enable PCI-PT on the HPE DL360 Gen 9 you must have a version of firmware that
        supports setting this and you must change a BIOS setting. You must also have the current
        version of hLinux.</para>
<para>To begin, get the latest firmware and install it on your compute nodes.</para>
<para>Once the firmware has been updated:</para>
<orderedlist xml:id="ol_vhs_ldc_rw">
        <listitem><para>reboot the server and select F9 (system utilities) during POST (power on self test)</para>
</listitem>
        <listitem><para>select 'System Configuration'</para>
</listitem>
        <listitem><para>select the NIC for which you want to enable PCI-PT</para>
</listitem>
        <listitem><para>select 'Device Level Configuration'</para>
</listitem>
        <listitem><para>select "Disable HP Shared Memory features' and make it 'Enabled'</para>
</listitem>
        <listitem><para>save the configuration change and reboot server</para>
</listitem>
      </orderedlist></sidebar>
  </section>
