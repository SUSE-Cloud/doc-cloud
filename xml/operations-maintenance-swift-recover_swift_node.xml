<?xml version="1.0"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE section [
 <!ENTITY % entities SYSTEM "entity-decl.ent"> %entities;
]>
<!---->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="recover-swiftnode">
 <title>Recovering a swift Node</title>
 <para>
  If one or more of your swift Object or PAC nodes has experienced an issue,
  such as power loss or hardware failure, and you need to perform disaster
  recovery then we provide different scenarios and how to resolve them to get
  your cloud repaired.
 </para>
 <para>
  Typical scenarios in which you will need to repair a swift object or PAC
  node include:
 </para>
 <itemizedlist>
  <listitem>
   <para>
    The node has either shut down or been rebooted.
   </para>
  </listitem>
  <listitem>
   <para>
    The entire node has failed and needs to be replaced.
   </para>
  </listitem>
  <listitem>
   <para>
    A disk drive has failed and must be replaced.
   </para>
  </listitem>
 </itemizedlist>
 <section xml:id="idg-all-operations-maintenance-swift-recover-swift-node-xml-5">
  <title>What to do if your swift host has shut down or rebooted</title>
  <para>
   If your swift host has power but is not powered on, from the lifecycle
   manager you can run this playbook:
  </para>
  <orderedlist>
   <listitem>
    <para>
     Log in to the &clm;.
    </para>
   </listitem>
   <listitem>
    <para>
     Obtain the name for your swift host in Cobbler:
    </para>
<screen>sudo cobbler system list</screen>
   </listitem>
   <listitem>
    <para>
     Power the node back up with this playbook, specifying the node name from
     Cobbler:
    </para>
<screen>cd ~/openstack/ardana/ansible
ansible-playbook -i hosts/localhost bm-power-up.yml -e nodelist=&lt;node name&gt;</screen>
   </listitem>
  </orderedlist>
  <para>
   Once the node is booted up, swift should start automatically. You can verify
   this with this playbook:
  </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
ansible-playbook -i hosts/verb_hosts swift-status.yml</screen>
  <para>
   Any alarms that have triggered due to the host going down should clear
   within 10 minutes. See <xref linkend="alarmdefinitions"/> if further
   assistance is needed with the alarms.
  </para>
 </section>
 <section xml:id="replace">
  <title>How to replace your swift node</title>
  <para>
   If your swift node has irreparable damage and you need to replace the entire
   node in your environment, see <xref linkend="replace-swift-node"/> for
   details on how to do this.
  </para>
 </section>
 <section xml:id="disk-replacement">
  <title>How to replace a hard disk in your swift node</title>
  <para>
   If you need to do a hard drive replacement in your swift node, see
   <xref linkend="replacing-disks"/> for details on how to do this.
  </para>
 </section>
</section>
