<?xml version="1.0"?>
<!DOCTYPE section [
<!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="system_alarmdefinitions">
 <title>System Alarms</title>
 <para>
  These alarms show under the System section and are setup per
  <literal>hostname</literal> and/or <literal>mount_point</literal>.
 </para>
 <informaltable colsep="1" rowsep="1">
  <tgroup cols="5">
   <colspec colname="c1" colnum="1"/>
   <colspec colname="c2" colnum="2"/>
   <colspec colname="c3" colnum="3"/>
   <colspec colname="c4" colnum="4"/>
   <colspec colname="c5" colnum="5"/>
   <thead>
    <row>
     <entry>Service</entry>
     <entry>警报名称</entry>
     <entry>描述</entry>
     <entry>可能的原因</entry>
     <entry>故障排除步骤</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows="11">system</entry>
     <entry>CPU Usage</entry>
     <entry>Alarms on high CPU usage.</entry>
     <entry>Heavy load or runaway processes.</entry>
     <entry>Log onto the reporting host and diagnose the heavy CPU usage.</entry>
    </row>
    <row>
     <entry>&elasticsearch; Low Watermark</entry>
     <entry>
      <screen>component = elasticsearch</screen>
      <para>
       &elasticsearch; disk low watermark. Backup indices. If high watermark is
       reached, indices will be deleted. Adjust curator_low_watermark_percent,
       curator_high_watermark_percent, and
       elasticsearch_max_total_indices_size_in_bytes if needed.
      </para>
     </entry>
     <entry>Running out of disk space for <literal>/var/lib/elasticsearch</literal>.</entry>
     <entry>
      <para>
       Free up space by removing indices (backing them up first if desired).
       Alternatively, adjust <literal>curator_low_watermark_percent</literal>,
       <literal>curator_high_watermark_percent</literal>, and/or
       <literal>elasticsearch_max_total_indices_size_in_bytes</literal> if
       needed.
      </para>
      <para>
       For more information about how to back up your centralized logs, see
       <xref linkend="central_log_configure_settings"/>.
       </para>
      </entry>
     </row>
     <row>
     <entry>&elasticsearch; High Watermark</entry>
      <entry>
       <screen>component = elasticsearch</screen>
       <para>
       &elasticsearch; disk high watermark. Attempting to delete indices to free
        disk space. Adjust <literal>curator_low_watermark_percent</literal>,
        <literal>curator_high_watermark_percent</literal>, and
        <literal>elasticsearch_max_total_indices_size_in_bytes</literal> if
        needed.
       </para>
      </entry>
      <entry>Running out of disk space for <literal>/var/lib/elasticsearch</literal>.</entry>
      <entry>
       <para>
        Verify that disk space was freed up by the curator. If needed, free up
        additional space by removing indices (backing them up first if desired).
        Alternatively, adjust curator_low_watermark_percent,
        curator_high_watermark_percent, and/or
        elasticsearch_max_total_indices_size_in_bytes if needed.
       </para>
       <para>
        For more information about how to back up your centralized logs, see
       <xref linkend="central_log_configure_settings"/>.
        </para>
       </entry>
      </row>
      <row>
       <entry>Log Partition Low Watermark</entry>
       <entry>The <literal>/var/log</literal> disk space usage has crossed the low watermark. If
        the high watermark is reached, <literal>logrotate</literal> will be run to free up disk
        space. Adjust <literal>var_log_low_watermark_percent</literal> if needed.</entry>
       <entry>这可能是因为服务被设置成 <literal>DEBUG</literal> 而不是 <literal>INFO</literal> 等级。另外可能的原因是一个重复的错误信息填满了日志文件。最后，这也可能是因为日志滚动没有被设置正确，因而旧的日志没有被正常删除。</entry>
       <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志滚动设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
      </row>
      <row>
       <entry>Log Partition High Watermark</entry>
       <entry>The <literal>/var/log</literal> volume is running low on disk space. Logrotate will
        be run now to free up space. Adjust <literal>var_log_high_watermark_percent</literal> if
        needed.</entry>
       <entry>这可能是因为服务被设置成 <literal>DEBUG</literal> 而不是 <literal>INFO</literal> 等级。另外可能的原因是一个重复的错误信息填满了日志文件。最后，这也可能是因为日志滚动没有被设置正确，因而旧的日志没有被正常删除。</entry>
       <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志滚动设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
      </row>
      <row>
       <entry>Crash Dump Count</entry>
       <entry>Alarms if it receives any metrics with <literal>crash.dump_count</literal> &gt;
        0</entry>
       <entry>When a crash dump is generated by kdump, the crash dump file is put into the
        <literal>/var/crash</literal> directory by default. Any crash dump files in this
        directory will cause the <literal>crash.dump_count</literal> metric to show a value
        greater than 0.</entry>
       <entry>
        <para>
         Analyze the crash dump file(s) located in <literal>/var/crash</literal>
         on the host that generated the alarm to try to determine if a service or
         hardware caused the crash.
        </para>
        <para>
         Move the file to a new location so that a developer can take a look at
         it. Make sure all of the processes are back up after the crash (run the
         <literal>&lt;service&gt;-status.yml</literal> playbooks). When the
         <literal>/var/crash</literal> directory is empty the Crash Dump Count
         alarm should transition back to OK.
        </para>
       </entry>
      </row>
      <row>
       <entry>Disk Inode Usage</entry>
       <entry>Nearly out of inodes for a partition, as indicated by the
        <literal>mount_point</literal> reported.</entry>
       <entry>Many files on the disk.</entry>
       <entry>Investigate cleanup of data or migration to other partitions.<!---->
       </entry>
      </row>
      <row>
       <entry>Disk Usage</entry>
       <entry>High disk usage, as indicated by the <literal>mount_point</literal>
        reported.</entry>
       <entry>Large files on the disk.</entry>
       <entry>
        <para>
         Investigate cleanup of data or migration to other partitions.
        </para>
       </entry>
      </row>
      <row>
       <entry>Host Status</entry>
       <entry>
        <para>
         Alerts when a host is unreachable.
        </para>
        <screen>test_type = ping</screen>
       </entry>
       <entry>Host or network is down.</entry>
       <entry>If a single host, attempt to restart the system. If multiple hosts, investigate
        network issues.</entry>
      </row>
      <row>
       <entry>Memory Usage</entry>
       <entry>High memory usage.</entry>
       <entry>Overloaded system or services with memory leaks.</entry>
       <entry>Log onto the reporting host to investigate high memory users.</entry>
      </row>
      <row>
       <entry>Network Errors</entry>
       <entry>Alarms on a high network error rate.</entry>
       <entry>Bad network or cabling.</entry>
       <entry>Take this host out of service until the network can be fixed.</entry>
      </row>
      <row>
       <entry>NTP Time Sync</entry>
       <entry>Alarms when the NTP time offset is high.</entry>
       <entry/>
       <entry>
        <para>
         Log in to the reported host and check if the ntp service is running.
        </para>
        <para>
         If it is running, then use these steps:
        </para>
      <orderedlist>
         <listitem>
          <para>
         Stop the service:
          </para>
          <screen>service ntpd stop</screen>
         </listitem>
         <listitem>
          <para>
         Resynchronize the node's time:
          </para>
          <screen>/usr/sbin/ntpdate -b  &lt;ntp-server&gt;</screen>
         </listitem>
         <listitem>
          <para>
         Restart the ntp service:
          </para>
          <screen>service ntp start</screen>
         </listitem>
         <listitem>
          <para>
           Restart rsyslog:
          </para>
          <screen>service rsyslog restart</screen>
         </listitem>
        </orderedlist>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </section>
  
