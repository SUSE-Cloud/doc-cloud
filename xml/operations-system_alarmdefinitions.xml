<?xml version="1.0"?>
<!DOCTYPE section [
<!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="system_alarmdefinitions">
 <title>系统（System）警报</title>
 <para>
  这些警报显示在系统（System）部分下，并按 <literal>hostname</literal> 和/或 <literal>mount_point</literal> 进行设置。
 </para>
 <informaltable colsep="1" rowsep="1">
  <tgroup cols="5">
   <colspec colname="c1" colnum="1"/>
   <colspec colname="c2" colnum="2"/>
   <colspec colname="c3" colnum="3"/>
   <colspec colname="c4" colnum="4"/>
   <colspec colname="c5" colnum="5"/>
   <thead>
    <row>
     <entry>服务</entry>
     <entry>警报名称</entry>
     <entry>描述</entry>
     <entry>可能的原因</entry>
     <entry>故障排除步骤</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows="11">system</entry>
     <entry>CPU Usage</entry>
     <entry>高 CPU 使用率的警报。</entry>
     <entry>高负载或失控进程。</entry>
     <entry>登录到报告主机并诊断高 CPU 使用情况。</entry>
    </row>
    <row>
     <entry>&elasticsearch; Low Watermark</entry>
     <entry>
      <screen>component = elasticsearch</screen>
      <para>
       &elasticsearch; 硬盘低水位线。备份索引。如果达到高水位线，索引将被删除。如果需要，调整 curator_low_watermark_percent，curator_high_watermark_percent 和 elasticsearch_max_total_indices_size_in_bytes。
      </para>
     </entry>
     <entry><literal>/var/lib/elasticsearch</literal> 的硬盘空间不足。</entry>
     <entry>
      <para>
       通过删除索引释放空间（如果需要，请先备份）。或者调整 <literal>curator_low_watermark_percent</literal>，<literal>curator_high_watermark_percent</literal> 和/或 <literal>elasticsearch_max_total_indices_size_in_bytes</literal>。
      </para>
      <para>
       有关如何备份集中日志的更多信息，请参见 <xref linkend="central_log_configure_settings"/>。
       </para>
      </entry>
     </row>
     <row>
     <entry>&elasticsearch; High Watermark</entry>
      <entry>
       <screen>component = elasticsearch</screen>
       <para>
       &elasticsearch; 硬盘高水位线。试图删除索引以释放硬盘空间。如果需要，调整 <literal>curator_low_watermark_percent</literal>，<literal>curator_high_watermark_percent</literal>，和 <literal>elasticsearch_max_total_indices_size_in_bytes</literal>。
       </para>
      </entry>
      <entry><literal>/var/lib/elasticsearch</literal> 的硬盘空间不足。</entry>
      <entry>
       <para>
        验证 curator 释放了硬盘空间。如果需要，可以通过删除索引释放额外空间（如果需要，可以先备份它们）。或者调整 curator_low_watermark_percent，curator_high_watermark_percent 和/或 elasticsearch_max_total_indices_size_in_bytes。
       </para>
       <para>
        有关如何备份集中日志的更多信息，请参见 <xref linkend="central_log_configure_settings"/>。
        </para>
       </entry>
      </row>
      <row>
       <entry>Log Partition Low Watermark</entry>
       <entry><literal>/var/log</literal> 硬盘空间使用量已越过低水位线。如果达到高水位线，将运行 <literal>logrotate</literal> 以释放硬盘空间。如果需要，调整 <literal>var_log_low_watermark_percent</literal>。</entry>
      <entry>这可能是因为服务被设置成 <literal>DEBUG</literal> 而不是 <literal>INFO</literal> 等级。另外可能的原因是一个重复的错误信息填满了日志文件。最后，这也可能是因为日志轮替没有被设置正确，因而旧的日志没有被正常删除。</entry>
       <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志轮替设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
      </row>
      <row>
       <entry>Log Partition High Watermark</entry>
       <entry><literal>/var/log</literal> 卷的硬盘空间不足。现在将运行 <literal>logrotate</literal> 以释放空间。如果需要，调整 <literal>var_log_low_watermark_percent</literal>。</entry>
       <entry>这可能是因为服务被设置成 <literal>DEBUG</literal> 而不是 <literal>INFO</literal> 等级。另外可能的原因是一个重复的错误信息填满了日志文件。最后，这也可能是因为日志轮替没有被设置正确，因而旧的日志没有被正常删除。</entry>
       <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志轮替设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
      </row>
      <row>
       <entry>Crash Dump Count</entry>
       <entry>如果它收到任何指标带有 <literal>crash.dump_count</literal> &gt; 0，时发出的警报</entry>
       <entry>当 kdump 生成故障转储时，故障转储文件默认放入 <literal>/var/crash</literal> 目录。此目录中的任何故障转储文件都将导致  <literal>crash.dump_count</literal> 指标显示大于 0 的值。</entry>
       <entry>
        <para>
         分析位于生成警报的主机上 <literal>/var/crash</literal> 中的故障转储文件，以尝试确定服务或硬件是否导致崩溃。
        </para>
        <para>
         将文件移动到新位置，以便开发人员可以查看它。确保在崩溃后备份所有进程（运行 <literal>&lt;service&gt;-status.yml</literal> 脚本）。当 <literal>/var/crash</literal> 目录为空时，Crash Dump Count 警报应该回到 OK。
        </para>
       </entry>
      </row>
      <row>
       <entry>Disk Inode Usage</entry>
       <entry><literal>mount_point</literal> 报告分区将要用完 inode。</entry>
       <entry>硬盘上有很多文件。</entry>
       <entry>调查数据清理或迁移到其他分区。<!---->
       </entry>
      </row>
      <row>
       <entry>Disk Usage</entry>
       <entry><literal>mount_point</literal> 报告高硬盘使用率。</entry>
       <entry>硬盘上有大文件。</entry>
       <entry>
        <para>
         调查数据清理或迁移到其他分区。
        </para>
       </entry>
      </row>
      <row>
       <entry>Host Status</entry>
       <entry>
        <para>
         主机无法访问时发出的警报。
        </para>
        <screen>test_type = ping</screen>
       </entry>
       <entry>主机或网络已下线。</entry>
       <entry>如果是单个主机，则尝试重新启动系统。如果有多台主机，请调查网络问题。</entry>
      </row>
      <row>
       <entry>Memory Usage</entry>
       <entry>内存使用率高。</entry>
       <entry>系统过载或服务内存泄漏。</entry>
       <entry>登录到报告的主机以调查高内存用户。</entry>
      </row>
      <row>
       <entry>Network Errors</entry>
       <entry>网络错误率高的警报。</entry>
       <entry>网络或线缆不良。</entry>
       <entry>停止此主机服务，直到网络修复。</entry>
      </row>
      <row>
       <entry>NTP Time Sync</entry>
       <entry>NTP 时间偏移量高时发出的警报。</entry>
       <entry/>
       <entry>
        <para>
         登录到报告的主机，检查 ntp 服务是否正在运行。the reported host and check if the ntp service is running.
        </para>
        <para>
         如果它正在运行，请使用以下步骤：
        </para>
      <orderedlist>
         <listitem>
          <para>
         停止服务：
          </para>
          <screen>service ntpd stop</screen>
         </listitem>
         <listitem>
          <para>
         重新同步节点的时间：
          </para>
          <screen>/usr/sbin/ntpdate -b  &lt;ntp-server&gt;</screen>
         </listitem>
         <listitem>
          <para>
         重启 ntp 服务：
          </para>
          <screen>service ntp start</screen>
         </listitem>
         <listitem>
          <para>
           重启 rsyslog：
          </para>
          <screen>service rsyslog restart</screen>
         </listitem>
        </orderedlist>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </section>
  
