<?xml version="1.0"?>
<!DOCTYPE section [
<!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="other_alarmdefinitions">
 <title>其他服务（Other Services）警报</title>
 <para>
  以下警报在 &productname; &opscon; 的其他服务（Other Services）分类中出现。
 </para>
 <informaltable colsep="1" rowsep="1">
  <tgroup cols="5">
   <colspec colname="c1" colnum="1"/>
   <colspec colname="c2" colnum="2"/>
   <colspec colname="c3" colnum="3"/>
   <colspec colname="c4" colnum="4"/>
   <colspec colname="c5" colnum="5"/>
   <thead>
    <row>
     <entry>Service</entry>
     <entry>警报名称</entry>
     <entry>描述</entry>
     <entry>可能的原因</entry>
     <entry>故障排除步骤</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry morerows="2">apache</entry>
     <entry>Apache Status</entry>
     <entry>未能连接 Apache 状态端点时发出的警报。</entry>
     <entry/>
     <entry/>
    </row>
    <row>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = apache2</screen>
     </entry>
     <entry/>
     <entry>
      <para>
       如果 Apache 进程关闭，请通过 SSH 连接到受影响的节点，然后使用以下命令重新启动它：
      </para>
      <screen>sudo systemctl restart apache2</screen>
     </entry>
    </row>
    <row>
     <entry>Apache Idle Worker Count</entry>
     <entry>Apache 服务器中没有空闲工作程序时发出的警报。</entry>
     <entry/>
     <entry/>
    </row>
    <row>
     <entry morerows="2">backup</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = freezer-scheduler</screen>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>在受影响的节点上重新启动该进程。检查相关日志。</entry>
    </row>
    <row>
     <entry>HTTP Status</entry>
     <entry>
      <para>
       指定的 HTTP 端点关闭或无法访问时发出的警报。
      </para>
      <screen>process_name = freezer-api</screen>
     </entry>
     <entry/>
     <entry/>
    </row>
    <row>
     <entry>Service Log Directory Size</entry>
     <entry>服务日志目录在使用超出配额的硬盘空间。</entry>
     <entry>由 <literal>path</literal> 维度指示的服务日志目录超过 2.5 GB 配额。</entry>
     <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。
     如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志滚动设置来自动移除它们。
     如果需要，您也可以选择备份后手动删除旧的日志。</entry>
    </row>
    <!---->
    <row>
     <entry>haproxy</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = haproxy</screen>
     </entry>
     <entry>HA Proxy 未在此计算机上运行。</entry>
     <entry>
      <para>
       用以下步骤重启受影响的节点的进程：
      </para>
      <orderedlist xml:id="ol_krq_lzp_mx">
       <listitem>
        <para>
         登入 &lcm;。
        </para>
       </listitem>
       <listitem>
        <para>
         对受影响的节点使用此脚本：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts FND-CLU-start.yml --limit &lt;hostname&gt;</screen>
       </listitem>
      </orderedlist>
      <para>
       检查相关日志。
      </para>
     </entry>
    </row>
    <!---->
    <row>
     <entry>ardana-ux-services</entry>
     <entry>HTTP Status</entry>
     <entry>指定的 HTTP 端点关闭或无法访问时发出的警报。</entry>
     <entry/>
     <entry/>
    </row>
    <!---->
    <row>
     <entry morerows="3">key-manager</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = barbican-api</screen>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>
      <para>
       用以下步骤重启受影响的节点的进程：
      </para>
      <orderedlist xml:id="ol_mrq_lzp_mx">
       <listitem>
        <para>
         登入 &lcm;。
        </para>
       </listitem>
       <listitem>
        <para>
         对受影响的节点使用 Barbican 启动脚本：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts barbican-start.yml --limit &lt;hostname&gt;</screen>
       </listitem>
      </orderedlist>
     </entry>
    </row>
    <row>
     <entry>HTTP Status</entry>
     <entry>
      <para>
       指定的 HTTP 端点关闭或无法访问时发出的警报。
      </para>
      <screen>component = barbican-api
       api_endpoint = public or internal</screen>
     </entry>
     <entry>端点没有响应，可能已下线。</entry>
     <entry>
      <para>
       对于公共端点和内部端点的 HTTP 状态警报，请使用以下步骤在受影响的节点上重新启动该进程：
      </para>
      <orderedlist xml:id="ol_nrq_lzp_mx">
       <listitem>
        <para>
         登入 &lcm;。
        </para>
       </listitem>
       <listitem>
        <para>
         停止 barbican 服务：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts barbican-stop.yml --limit &lt;hostname&gt;</screen>
       </listitem>
       <listitem>
        <para>
         重新启动 barbican 服务：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts barbican-start.yml --limit &lt;hostname&gt;</screen>
       </listitem>
      </orderedlist>
      <para>
       检查日志 <literal>/var/log/barbican/</literal> 以查找可能的错误消息。
      </para>
     </entry>
    </row>
    <row>
     <entry>HTTP Status</entry>
     <entry>
      <para>
       指定的 HTTP 端点关闭或无法访问时发出的警报。
      </para>
      <screen>component = barbican-api
       monitored_host_type = vip</screen>
     </entry>
     <entry>管理虚拟 IP 上的 Barbican API 已关闭。</entry>
     <entry>
      此警报通过虚拟 IP 地址（HAProxy）验证对 Barbican API 的访问。如果此检查失败但是 key-manager 服务的其他两个 HTTP 状态警报没有，那么可能是 HAProxy 出现问题，因此您应该查看该服务的警报。如果其他两个 HTTP 状态警报也在发出警报，请使用列出的步骤重新启动 Barbican。</entry>
     <!--ERROR-->
    </row>
    <row>
     <entry>Service Log Directory Size</entry>
     <entry>服务日志目录在使用超出配额的硬盘空间。</entry>
     <entry>由 <literal>path</literal> 维度指示的服务日志目录超过 2.5 GB 配额。</entry>
     <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志滚动设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
    </row>
    <!---->
    <row>
     <entry morerows="1">mysql</entry>
     <entry>MySQL Slow Query Rate</entry>
     <entry>慢查询率高时发出的警报。</entry>
     <entry>系统负载过高。</entry>
     <entry>这可能表示接近容量限制或暴露出错误的查询。首先，检查整体系统负载，然后调查MySQL详细信息。</entry>
    </row>
    <row>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = mysqld</screen>
     </entry>
     <entry>MySQL 已崩溃。</entry>
     <entry>在受影响的节点上重新启动 MySQL。</entry>
    </row>
    <!---->
    <row>
     <entry morerows="2">octavia</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。每个进程都有单独的警报：
      </para>
      <itemizedlist xml:id="ul_orq_lzp_mx">
       <listitem>
        <para>
         octavia-worker
        </para>
       </listitem>
       <listitem>
        <para>
         octavia-housekeeping
        </para>
       </listitem>
       <listitem>
        <para>
         octavia-api
        </para>
       </listitem>
       <listitem>
        <para>
         octavia-health-manager
        </para>
       </listitem>
      </itemizedlist>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>
      <para>
       用以下步骤重启受影响的节点的进程：
      </para>
      <orderedlist xml:id="ol_prq_lzp_mx">
       <listitem>
        <para>
         登入 &lcm;。
        </para>
       </listitem>
       <listitem>
        <para>
         对受影响的节点使用 Octavia 启动脚本：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts octavia-start.yml --limit &lt;hostname&gt;</screen>
       </listitem>
      </orderedlist>
     </entry>
    </row>
    <row>
     <entry>HTTP Status</entry>
     <entry>指定的 HTTP 端点关闭或无法访问时发出的警报。</entry>
     <entry><literal>octavia-api</literal> 进程可能已关闭，或者您可能遇到 haproxy 或其他网络相关问题的问题。</entry>
     <entry>
      <para>
       如果 <literal>octavia-api</literal> 进程已关闭，请使用以下步骤在受影响的节点上重新启动它：
      </para>
      <orderedlist xml:id="ol_qrq_lzp_mx">
       <listitem>
        <para>
         登入 &lcm;。
        </para>
       </listitem>
       <listitem>
        <para>
         对受影响的节点使用 Octavia 启动脚本：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts octavia-start.yml --limit &lt;hostname&gt;</screen>
       </listitem>
      </orderedlist>
      <para>
       如果问题不在于 <literal>octavia-process</literal> ，那么请检查 <literal>haproxy</literal> 是否存在问题，或者是否存在网络问题并进行相应的故障排除。
      </para>
     </entry>
    </row>
    <row>
     <entry>Service Log Directory Size</entry>
     <entry>服务日志目录在使用超出配额的硬盘空间。</entry>
     <entry>由 <literal>path</literal> 维度指示的服务日志目录超过 2.5 GB 配额。</entry>
     <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志滚动设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
    </row>
    <!---->
    <row>
     <entry morerows="2">orchestration</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。每个进程都有单独的警报：
      </para>
      <itemizedlist xml:id="ul_kvs_yjq_rv">
       <listitem>
        <para>
         heat-api
        </para>
       </listitem>
       <listitem>
        <para>
         heat-api-cfn
        </para>
       </listitem>
       <listitem>
        <para>
         heat-api-cloudwatch
        </para>
       </listitem>
       <listitem>
        <para>
         heat-engine
        </para>
       </listitem>
      </itemizedlist>
      <para>
       heat-api process check on each node
      </para>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>
      <para>
       使用以下步骤重启该进程：
      </para>
      <orderedlist xml:id="ol_rrq_lzp_mx">
       <listitem>
        <para>
         登入 &lcm;。
        </para>
       </listitem>
       <listitem>
        <para>
         停止所有 Heat 进程：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts heat-start.yml</screen>
       </listitem>
       <listitem>
        <para>
         重新启动 Heat 进程：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts heat-start.yml</screen>
       </listitem>
      </orderedlist>
      <para>
       查看受影响节点上以下位置的相关日志：
      </para>
      <screen>/var/log/heat/heat-api.log
       /var/log/heat/heat-cfn.log
       /var/log/heat/heat-cloudwatch.log
       /var/log/heat/heat-engine.log</screen>
     </entry>
    </row>
    <row>
     <entry>HTTP Status</entry>
     <entry>
      <para>
       指定的 HTTP 端点关闭或无法访问时发出的警报。
      </para>
      <itemizedlist xml:id="ul_ztx_1kq_rv">
       <listitem>
        <para>
         heat-api
        </para>
       </listitem>
       <listitem>
        <para>
         heat-api-cfn
        </para>
       </listitem>
       <listitem>
        <para>
         heat-api-cloudwatch
        </para>
       </listitem>
      </itemizedlist>
     </entry>
     <entry/>
     <entry>
      <para>
       使用以下步骤重启 Heat 进程：
      </para>
      <orderedlist xml:id="ol_srq_lzp_mx">
       <listitem>
        <para>
         登入 &lcm;。
        </para>
       </listitem>
       <listitem>
        <para>
         停止所有 Heat 进程：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts heat-start.yml</screen>
       </listitem>
       <listitem>
        <para>
         重新启动 Heat 进程：
        </para>
<screen>cd ~/scratch/ansible/next/ardana/ansible
         ansible-playbook -i hosts/verb_hosts heat-start.yml</screen>
       </listitem>
      </orderedlist>
      <para>
       查看受影响节点上以下位置的相关日志：
      </para>
      <screen>/var/log/heat/heat-api.log
       /var/log/heat/heat-cfn.log
       /var/log/heat/heat-cloudwatch.log</screen>
     </entry>
    </row>
    <row>
     <entry>Service Log Directory Size</entry>
     <entry>服务日志目录在使用超出配额的硬盘空间。</entry>
     <entry>由 <literal>path</literal> 维度指示的服务日志目录超过 2.5 GB 配额。</entry>
     <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志滚动设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
    </row>
    <!---->
    <row>
     <entry>OVSvApp-ServiceVM</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = ovs-vswitchd
       process_name = neutron-ovsvapp-agent
       process_name = ovsdb-server</screen>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>在受影响的节点上重启进程，查看日志。</entry>
    </row>
    <!---->
    <row>
     <entry>rabbitmq</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = rabbitmq
       process_name = epmd</screen>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>在受影响的节点上重启进程，查看日志。</entry>
    </row>
    <row>
     <entry>spark</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = org.apache.spark.deploy.master.Master
       process_name = org.apache.spark.deploy.worker.Worker</screen>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>在受影响的节点上重启进程，查看日志。</entry>
    </row>
    <!---->
    <row>
     <entry morerows="1">web-ui</entry>
     <entry>HTTP Status</entry>
     <entry>指定的 HTTP 端点关闭或无法访问时发出的警报。</entry>
     <entry>Apache 未运行或配置错误。</entry>
     <entry>检查 Apache 是否正在运行，调查 Horizon 日志。</entry>
    </row>
    <row>
     <entry>Service Log Directory Size</entry>
     <entry>服务日志目录在使用超出配额的硬盘空间。</entry>
     <entry>由 <literal>path</literal> 维度指示的服务日志目录超过 2.5 GB 配额。</entry>
     <entry>找到消耗过多硬盘空间的服务，查看日志。如果有 <literal>DEBUG</literal> 日志条目，请把日志等级设为 <literal>INFO</literal>。如果日志在重复记录一个错误信息，请解决该错误信息。如果旧的日志文件存在，配置日志滚动设置来自动移除它们。如果需要，您也可以选择备份后手动删除旧的日志。</entry>
    </row>
    <!---->
    <row>
     <entry morerows="1">zookeeper</entry>
     <entry>Process Check</entry>
     <entry>
      <para>
       特定进程未在运行时发出的警报。
      </para>
      <screen>process_name = org.apache.zookeeper.server</screen>
     </entry>
     <entry>进程已崩溃。</entry>
     <entry>在受影响的节点上重新启动该进程。检查相关日志。</entry>
    </row>
    <row>
     <entry>ZooKeeper Latency</entry>
     <entry>当 ZooKeeper 延迟高时发出警报。</entry>
     <entry>系统负载过重。</entry>
     <entry>检查单个系统以及整个服务的活动。</entry>
    </row>
   </tbody>
  </tgroup>
 </informaltable>
</section>
