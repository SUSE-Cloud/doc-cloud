<?xml version="1.0"?>
<!DOCTYPE section [
 <!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<!---->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="manage_note_methods"><title>Managing Notification Methods for Alarms</title><!---->
    <sidebar xml:id="idg-all-operations-managing_notificationmethods-xml-4"><para><!----><!----></para>
<itemizedlist>
        <listitem/>
        <listitem/>
        <listitem/>
        </itemizedlist>
</sidebar>
    <sidebar xml:id="proxy"><title>Enabling a Proxy for Webhook or Pager Duty Notifications</title><para>If your environment requires a proxy in order for communications to function then these
        steps will show you how you can enable one. These steps will only be needed if you are
        utilizing the webhook or pager duty notification methods.</para>
<para>These steps will require access to the lifecycle manager in your cloud deployment so you
        may need to contact your Administrator. You can make these changes during the initial
        configuration phase prior to the first installation or you can modify your existing
        environment, the only difference being the last step.</para>
<orderedlist>
          <listitem><para>Log in to the lifecycle manager.</para>
</listitem>
          <listitem><para>Edit
              <literal>~/helion/hos/ansible/roles/monasca-notification/defaults/main.yml</literal>
            file and edit the line below with your proxy address values:
              </para>
<screen>notification_environment: '"http_proxy=http://&lt;proxy_address&gt;:&lt;port&gt;" "https_proxy=&lt;http://proxy_address&gt;:&lt;port&gt;"'</screen></listitem>
          <listitem><para>If you are making these changes prior to your initial installation then you are done
            and can continue on with the installation. However, if you are modifying an existing
            environment, you will need to continue on with the remaining steps below.</para>
</listitem>
          <listitem><para>Commit your configuration to the <xref linkend="using_git"/>, as follows:
            </para>
<screen>cd ~/helion/hos/ansible
git add -A
git commit -m "My config or other commit message"</screen></listitem>
          <listitem><para>Run the configuration processor:
            </para>
<screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</screen></listitem>
          <listitem><para>Generate an updated deployment directory:
            </para>
<screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</screen></listitem>
          <listitem><para>Run the Monasca reconfigure playbook to enable these changes:
            </para>
<screen>cd ~/scratch/ansible/next/hos/ansible
ansible-playbook -i hosts/verb_hosts monasca-reconfigure.yml --tags notification</screen></listitem>
        </orderedlist>
</sidebar>
    <sidebar xml:id="create"><title>Creating a New Notification Method</title><orderedlist>
        <listitem><para>Log in to the Operations Console. See <xref linkend="connect_opsconsole"/> for more details.</para>
</listitem>
        <listitem><para>Use the navigation menu to go to the <emphasis role="bold">Alarm Explorer</emphasis> page: </para>
<mediaobject><imageobject role="fo"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod.png" width="75%" format="PNG"/></imageobject><imageobject role="html"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod.png"/></imageobject></mediaobject>
</listitem>
        <listitem><para>Select the <emphasis role="bold">Notification Methods</emphasis> menu and then click the <emphasis role="bold">Create Notification
            Method</emphasis> button:</para>
<mediaobject><imageobject role="fo"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod1.png" width="75%" format="PNG"/></imageobject><imageobject role="html"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod1.png"/></imageobject></mediaobject>
</listitem>
        <listitem><para>On the <emphasis role="bold">Create Notification Method</emphasis> window you will select your options and then
          click the <emphasis role="bold">Create Notification</emphasis> button.</para>
<mediaobject xml:id="image_cqx_lwj_cy"><imageobject role="fo"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod3.png" width="75%" format="PNG"/></imageobject><imageobject role="html"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod3.png"/></imageobject></mediaobject>
<para>A description of each of the fields you use for each
            notification method:</para>
<informaltable xml:id="table_emq_jwj_cy" colsep="1" rowsep="1"><tgroup cols="2">
              <colspec colname="c1" colnum="1"/>
              <colspec colname="c2" colnum="2"/>
              <thead>
                <row>
                  <entry>Field</entry>
                  <entry>Description</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry>Name</entry>
                  <entry>Enter a unique name value for the notification method you are
                    creating.</entry>
                </row>
                <row>
                  <entry>Type</entry>
                  <entry>Choose a type. Available values are <emphasis role="bold">Webhook</emphasis>, <emphasis role="bold">Email</emphasis>, or
                      <emphasis role="bold">Pager Duty</emphasis>.</entry>
                </row>
                <row>
                  <entry>Address/Key</entry>
                  <entry>Enter the value corresponding to the type you chose.</entry>
                </row>
              </tbody>
            </tgroup></informaltable></listitem>
      </orderedlist></sidebar>
    <sidebar xml:id="apply"><title>Applying a Notification Method to an Alarm Definition</title><orderedlist>
        <listitem><para>Log in to the Operations Console. See <xref linkend="connect_opsconsole"/> for more details.</para>
</listitem>
        <listitem><para>Use the navigation menu to go to the <emphasis role="bold">Alarm Explorer</emphasis> page: </para>
<mediaobject xml:id="image_o2t_5wj_cy"><imageobject role="fo"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod.png" width="75%" format="PNG"/></imageobject><imageobject role="html"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod.png"/></imageobject></mediaobject>
</listitem>
        <listitem><para>Select the <emphasis role="bold">Alarm Definition</emphasis> menu which will give you a list of each of the alarm
          definitions in your environment.
          </para>
<mediaobject><imageobject role="fo"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod4.png" width="75%" format="PNG"/></imageobject><imageobject role="html"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod4.png"/></imageobject></mediaobject>
</listitem>
        <listitem><para>Locate the alarm you want to change the notification method for and click on its name to
          bring up the edit menu. You can use the sorting methods for assistance.</para>
</listitem>
        <listitem><para>In the edit menu, scroll down to the <emphasis role="bold">Notifications and Severity</emphasis> section where you
          will select one or more <emphasis role="bold">Notification Methods</emphasis> before selecting the <emphasis role="bold">Update Alarm
            Definition</emphasis> button:</para>
<mediaobject><imageobject role="fo"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod6.png" width="75%" format="PNG"/></imageobject><imageobject role="html"><imagedata fileref="media-hos.docs-opsconsole_createnotificationmethod6.png"/></imageobject></mediaobject>
</listitem>
        <listitem><para>Repeat as needed until all of your alarms have the notification methods you desire.</para>
</listitem>
      </orderedlist></sidebar>
  </section>
