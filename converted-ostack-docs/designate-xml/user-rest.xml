<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Deprecated REST API Documentation</title>
  <section>
    <title>Intro</title>
    <para>In the REST API examples, HTTP requests are defined as raw HTTP. For
                example:</para>
    <screen language="http">POST /v2/pools HTTP/1.1
Accept: application/json
Content-Type: application/json

{
     "name": "Example Pool",
     "ns_records": [
         {
           "hostname": "ns1.example.org.",
           "priority": 1
         }
     ]
}</screen>
    <para>With this info we can make this request using the <link xlink:href="http://curl.haxx.se/">cURL</link> tool. Weâ€™ll
                assume we are running Designate on <literal>localhost</literal>.</para>
    <screen language="bash">curl -X POST -i \
     -H 'Accept: application/json' \
     -H 'Content-Type: application/json' \
     -d '{"name": "ns1.example.org."}' \
     http://localhost:9001/v1/servers</screen>
    <para>The <literal>-i</literal> flag is used to dump the response headers as well as the
                response body.</para>
    <para>The cURL tool is extremely robust. Please take a look at the <link xlink:href="http://curl.haxx.se/docs/manual.html">cURL
                    tutorial</link> for more info.</para>
  </section>
  <section>
    <title>HTTP Headers</title>
    <para>These headers work for all APIs</para>
    <itemizedlist>
      <listitem>
        <variablelist>
          <varlistentry>
            <term>X-Designate-Edit-Managed-Records</term>
            <listitem>
              <itemizedlist>
                <listitem>
                  <para>Allows admins (or users with the right role) to modify managed records (records created by designate-sink / reverse floating ip API)</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </varlistentry>
        </variablelist>
      </listitem>
      <listitem>
        <variablelist>
          <varlistentry>
            <term>X-Auth-All-Projects</term>
            <listitem>
              <itemizedlist>
                <listitem>
                  <para>Allows admins (or users with the right role) to view and edit zones / recordsets for all tenants</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </varlistentry>
        </variablelist>
      </listitem>
      <listitem>
        <variablelist>
          <varlistentry>
            <term>X-Auth-Sudo-Tenant-ID / X-Auth-Sudo-Project-ID</term>
            <listitem>
              <itemizedlist>
                <listitem>
                  <para>Allows admins (or users with the right role) to impersonate another tenant specified by this header</para>
                </listitem>
              </itemizedlist>
            </listitem>
          </varlistentry>
        </variablelist>
      </listitem>
    </itemizedlist>
  </section>
  <section>
    <title>API Versions</title>
    <para>The API has 2 versions - V1 and V2.</para>
    <note>
      <para>V1 has been deprecated since the Kilo release.</para>
    </note>
    <section>
      <title>V1 API</title>
      <xi:include href="user-restrest.xml"/>
      <xi:include href="user-restrest.xml"/>
      <xi:include href="user-restrest.xml"/>
      <xi:include href="user-restrest.xml"/>
      <xi:include href="user-restrest.xml"/>
      <xi:include href="user-restrest.xml"/>
      <xi:include href="user-restrest.xml"/>
    </section>
    <section>
      <title>V2 API</title>
      <para>The V2 API is documented on the OpenStack Developer <link xlink:href="http://developer.openstack.org/api-ref/dns/">api site</link></para>
    </section>
    <section>
      <title>Admin API</title>
      <xi:include href="user-restrest.xml"/>
    </section>
  </section>
</section>
