<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Designate Manage CLI</title>
  <para>This chapter documents <command>designate-manage</command></para>
  <para>For help on a specific <command>designate</command> command, enter:</para>
  <screen language="console">$ designate-manage COMMAND --help</screen>
  <section>
    <title>designate-manage</title>
    <section>
      <title>designate-manage usage</title>
      <screen language="console">usage: designate-manage [-h] [--config-dir DIR] [--config-file PATH] [--debug]
                        [--log-config-append PATH] [--log-date-format DATE_FORMAT]
                        [--log-dir LOG_DIR] [--log-file PATH] [--nodebug]
                        [--nouse-syslog] [--nouse-syslog-rfc-format] [--noverbose]
                        [--nowatch-log-file]
                        [--syslog-log-facility SYSLOG_LOG_FACILITY] [--use-syslog]
                        [--use-syslog-rfc-format] [--verbose] [--version]
                        [--watch-log-file]</screen>
    </section>
    <section>
      <title>designate optional arguments</title>
      <variablelist>
        <varlistentry>
          <term>
            <literal>--config-dir DIR</literal>
          </term>
          <listitem>
            <para>Path to a config directory to pull *.conf files from.
                                This file set is sorted, so as to provide a
                                predictable parse order if individual options are
                                over-ridden. The set is parsed after the file(s)
                                specified via previous –config-file, arguments hence
                                over-ridden options in the directory take precedence.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--config-file PATH</literal>
          </term>
          <listitem>
            <para>Path to a config file to use. Multiple config files
                                can be specified, with values in later files taking
                                precedence. Defaults to None.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--debug, -d</literal>
          </term>
          <listitem>
            <para>If set to true, the logging level will be set to DEBUG
                                instead of the default INFO level.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--log-config-append PATH, --log_config PATH</literal>
          </term>
          <listitem>
            <para>The name of a logging configuration file. This file is
                                appended to any existing logging configuration files.
                                For details about logging configuration files, see the
                                Python logging module documentation. Note that when
                                logging configuration files are used then all logging
                                configuration is set in the configuration file and
                                other logging configuration options are ignored (for
                                example, logging_context_format_string).</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--log-date-format DATE_FORMAT</literal>
          </term>
          <listitem>
            <para>Defines the format string for %(asctime)s in log
                                records. Default: None . This option is ignored if
                                log_config_append is set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--log-dir LOG_DIR, --logdir LOG_DIR</literal>
          </term>
          <listitem>
            <para>(Optional) The base directory used for relative
                                log_file paths. This option is ignored if
                                log_config_append is set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--log-file PATH, --logfile PATH</literal>
          </term>
          <listitem>
            <para>(Optional) Name of log file to send logging output to.
                                If no default is set, logging will go to stderr as
                                defined by use_stderr. This option is ignored if
                                log_config_append is set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--nodebug</literal>
          </term>
          <listitem>
            <para>The inverse of –debug</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--nouse-syslog</literal>
          </term>
          <listitem>
            <para>The inverse of –use-syslog</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--nouse-syslog-rfc-format</literal>
          </term>
          <listitem>
            <para>The inverse of –use-syslog-rfc-format</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--noverbose</literal>
          </term>
          <listitem>
            <para>The inverse of –verbose</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--nowatch-log-file</literal>
          </term>
          <listitem>
            <para>The inverse of –watch-log-file</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--syslog-log-facility SYSLOG_LOG_FACILITY</literal>
          </term>
          <listitem>
            <para>Syslog facility to receive log lines. This option is
                                ignored if log_config_append is set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--use-syslog</literal>
          </term>
          <listitem>
            <para>Use syslog for logging. Existing syslog format is
                                DEPRECATED and will be changed later to honor RFC5424.
                                This option is ignored if log_config_append is set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--use-syslog-rfc-format</literal>
          </term>
          <listitem>
            <para>Enables or disables syslog rfc5424 format for logging.
                                If enabled, prefixes the MSG part of the syslog
                                message with APP-NAME (RFC5424). This option is
                                ignored if log_config_append is set.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--verbose, -v</literal>
          </term>
          <listitem>
            <para>If set to false, the logging level will be set to
                                WARNING instead of the default INFO level.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--watch-log-file</literal>
          </term>
          <listitem>
            <para>Uses logging handler designed to watch file system.
                                When log file is moved or removed this handler will
                                open a new log file with specified path
                                instantaneously. It makes sense only if log_file
                                option is specified and Linux platform is used. This
                                option is ignored if log_config_append is set.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>designate-manage pool</title>
    <section>
      <title>designate-manage pool export_from_config</title>
      <screen language="console">usage: designate-manage pool export_from_config [-h] [--file FILE]</screen>
      <para>Export a YAML copy of a Kilo/Liberty pool config.</para>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--file FILE</literal>
          </term>
          <listitem>
            <para>The path to the file the yaml output should be written to
                                (Defaults to /etc/designate/pools.yaml)</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>designate-manage pool generate_file</title>
      <screen language="console">usage: designate-manage pool generate_file [-h] [--file FILE]</screen>
      <para>Export a YAML copy of the current running pool config</para>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--file FILE</literal>
          </term>
          <listitem>
            <para>The path to the file the yaml output should be written to
                                (Defaults to /etc/designate/pools.yaml)</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>designate-manage pool update</title>
      <screen language="console">usage: designate-manage pool update [-h] [--file FILE] [--delete DELETE]
                                    [--dry_run DRY_RUN]</screen>
      <para>Update the running pool config from a YAML file</para>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--file FILE</literal>
          </term>
          <listitem>
            <para>The path to the file that should be used to update the pools config
                                (Defaults to /etc/designate/pools.yaml)</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--delete DELETE</literal>
          </term>
          <listitem>
            <para>Any Pools not listed in the config file will be deleted.
                                .. warning::  This will delete any zones left in this pool</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--dry_run DRY_RUN</literal>
          </term>
          <listitem>
            <para>This will simulate what will happen when you run this command</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>designate-manage database</title>
    <section>
      <title>designate-manage database sync</title>
      <screen language="console">usage: designate-manage database sync [-h] [--revision REVISION]</screen>
      <para>Update the designate database schema</para>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--revision REVISION</literal>
          </term>
          <listitem>
            <para>The version that the designate database should be synced to.
                                (Defaults to latest version)</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>designate-manage database version</title>
      <screen language="console">usage: designate-manage database version [-h]</screen>
      <para>Show what version of the database schema is currently in place</para>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>designate-manage pool_manager_cache</title>
    <section>
      <title>designate-manage pool_manager_cache sync</title>
      <screen language="console">usage: designate-manage pool_manager_cache sync [-h] [--revision REVISION]</screen>
      <para>Update the designate pool manager cache database schema</para>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--revision REVISION</literal>
          </term>
          <listitem>
            <para>The version that the designate pool manager cache database should be synced to.
                                (Defaults to latest version)</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>designate-manage pool_manager_cache version</title>
      <screen language="console">usage: designate-manage pool_manager_cache version [-h]</screen>
      <para>Show what version of the pool manager cache database schema is currently in place</para>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>designate-manage powerdns</title>
    <section>
      <title>designate-manage powerdns sync</title>
      <screen language="console">usage: designate-manage powerdns sync [-h] [--revision REVISION] POOL_ID</screen>
      <para>Update the designate powerdns database schema</para>
      <para>
        <emphasis role="bold">Required arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>POOL_ID</literal>
          </term>
          <listitem>
            <para>The pool that should be upgraded or migrated</para>
          </listitem>
        </varlistentry>
      </variablelist>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>--revision REVISION</literal>
          </term>
          <listitem>
            <para>The version that the designate pool manager cache database should be synced to.
                                (Defaults to latest version)</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>designate-manage powerdns version</title>
      <screen language="console">usage: designate-manage powerdns version [-h] POOL_ID</screen>
      <para>Show what version of the powerdns database schema is currently in place</para>
      <para>
        <emphasis role="bold">Required arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>POOL_ID</literal>
          </term>
          <listitem>
            <para>The pool that should be upgraded or migrated</para>
          </listitem>
        </varlistentry>
      </variablelist>
      <para>
        <emphasis role="bold">Optional arguments:</emphasis>
      </para>
      <variablelist>
        <varlistentry>
          <term>
            <literal>-h, --help</literal>
          </term>
          <listitem>
            <para>show this help message and exit</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
</section>
