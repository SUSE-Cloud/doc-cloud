<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Quotas</title>
  <section>
    <title>Overview</title>
    <para>The quotas extension can be used to retrieve a tenant’s absolute limits.</para>
    <para><emphasis>Note</emphasis>: Quotas is an extension and needs to be enabled before it can be used.
                If Designate returns a 404 error, ensure that the following line has been
                added to the designate.conf file under <literal>[service:api]</literal> section</para>
    <screen>enable_api_admin = True
enabled_extensions_admin = quotas</screen>
    <para>Once these lines have been added, restart the designate-central and designate-api
                services.</para>
  </section>
  <section>
    <title>Get Quotas</title>
    <variablelist>
      <varlistentry xml:id="get--quotas-TENANT_ID">
        <term>
          <literal>get--quotas-TENANT_ID</literal>
        </term>
        <listitem>
          <para>Retrieves quotas for tenant with the specified TENANT_ID.  The
                        following example retrieves the quotas for tenant 12345.</para>
          <para>
            <emphasis role="bold">Example request:</emphasis>
          </para>
          <screen language="http">GET /admin/quotas/12345 HTTP/1.1
Host: 127.0.0.1:9001
Accept: application/json
Content-Type: application/json</screen>
          <para>
            <emphasis role="bold">Example response:</emphasis>
          </para>
          <screen language="guess">HTTP/1.1 201 Created
Content-Type: application/json

{
  "quota": {
    "api_export_size: 1000,
    "zones": 10,
    "recordset_records": 20,
    "zone_records": 500,
    "zone_recordsets": 500
  }
}</screen>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Update Quotas</title>
    <variablelist>
      <varlistentry xml:id="patch--quotas-TENANT_ID">
        <term>
          <literal>patch--quotas-TENANT_ID</literal>
        </term>
        <listitem>
          <para>Updates the specified quota(s) to their new values.</para>
          <para>
            <emphasis role="bold">Example request:</emphasis>
          </para>
          <screen language="http">PATCH /admin/quotas/12345 HTTP/1.1
Host: 127.0.0.1:9001
Accept: application/json
Content-Type: application/json

{
  "quota": {
    "zones": 1000,
    "zone_records": 50
  }
}</screen>
          <para>
            <emphasis role="bold">Example response:</emphasis>
          </para>
          <screen language="guess">HTTP/1.1 200 OK
Content-Type: application/json

{
  "quota": {
    "api_export_size: 1000,
    "zones": 1000,
    "recordset_records": 20,
    "zone_records": 50,
    "zone_recordsets": 500
  }
}</screen>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>Reset Quotas to Default</title>
    <variablelist>
      <varlistentry xml:id="delete--quotas-TENANT_ID">
        <term>
          <literal>delete--quotas-TENANT_ID</literal>
        </term>
        <listitem>
          <para>Restores the tenant’s quotas back to their default values.</para>
          <para>
            <emphasis role="bold">Example request:</emphasis>
          </para>
          <screen language="http">DELETE /admin/quotas/12345 HTTP/1.1
Host: 127.0.0.1:9001
Accept: application/json
Content-Type: application/json</screen>
          <para>
            <emphasis role="bold">Example response:</emphasis>
          </para>
          <screen language="http">HTTP/1.1 204 No Content</screen>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
</section>
