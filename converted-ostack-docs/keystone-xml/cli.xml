<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>CLI Documentation</title>
  <section>
    <title>keystone-manage</title>
    <section>
      <title>Keystone Management Utility</title>
      <section>
        <title>SYNOPSIS</title>
        <para>keystone-manage [options]</para>
      </section>
      <section>
        <title>DESCRIPTION</title>
        <para><literal>keystone-manage</literal> is the command line tool which interacts with the Keystone
                        service to initialize and update data within Keystone. Generally,
                        <literal>keystone-manage</literal> is only used for operations that cannot be accomplished
                        with the HTTP API, such data import/export and database migrations.</para>
      </section>
      <section>
        <title>USAGE</title>
        <para>
          <literal>keystone-manage [options] action [additional args]</literal>
        </para>
        <section>
          <title>General keystone-manage options:</title>
          <itemizedlist>
            <listitem>
              <para><literal>--help</literal> : display verbose help output.</para>
            </listitem>
          </itemizedlist>
          <para>Invoking <literal>keystone-manage</literal> by itself will give you some usage information.</para>
          <para>Available commands:</para>
          <itemizedlist>
            <listitem>
              <para><literal>bootstrap</literal>: Perform the basic bootstrap process.</para>
            </listitem>
            <listitem>
              <para><literal>credential_migrate</literal>: Encrypt credentials using a new primary key.</para>
            </listitem>
            <listitem>
              <para><literal>credential_rotate</literal>: Rotate Fernet keys for credential encryption.</para>
            </listitem>
            <listitem>
              <para><literal>credential_setup</literal>: Setup a Fernet key repository for credential encryption.</para>
            </listitem>
            <listitem>
              <para><literal>db_sync</literal>: Sync the database.</para>
            </listitem>
            <listitem>
              <para><literal>db_version</literal>: Print the current migration version of the database.</para>
            </listitem>
            <listitem>
              <para><literal>doctor</literal>: Diagnose common problems with keystone deployments.</para>
            </listitem>
            <listitem>
              <para><literal>domain_config_upload</literal>: Upload domain configuration file.</para>
            </listitem>
            <listitem>
              <para><literal>fernet_rotate</literal>: Rotate keys in the Fernet key repository.</para>
            </listitem>
            <listitem>
              <para><literal>fernet_setup</literal>: Setup a Fernet key repository for token encryption.</para>
            </listitem>
            <listitem>
              <para><literal>mapping_populate</literal>: Prepare domain-specific LDAP backend.</para>
            </listitem>
            <listitem>
              <para><literal>mapping_purge</literal>: Purge the identity mapping table.</para>
            </listitem>
            <listitem>
              <para><literal>mapping_engine</literal>: Test your federation mapping rules.</para>
            </listitem>
            <listitem>
              <para><literal>saml_idp_metadata</literal>: Generate identity provider metadata.</para>
            </listitem>
            <listitem>
              <para><literal>token_flush</literal>: Purge expired tokens.</para>
            </listitem>
          </itemizedlist>
        </section>
      </section>
      <section>
        <title>OPTIONS</title>
        <variablelist>
          <varlistentry>
            <term>
              <option>-h</option>
              <option>--help</option>
            </term>
            <listitem>
              <para>show this help message and exit</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--config-dir</option>
            </term>
            <listitem>
              <para>Path to a config directory to pull *.conf files from.
                                        This file set is sorted, so as to provide a
                                        predictable parse order if individual options are
                                        over-ridden. The set is parsed after the file(s)
                                        specified via previous –config-file, arguments hence
                                        over-ridden options in the directory take precedence.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--config-file</option>
            </term>
            <listitem>
              <para>Path to a config file to use. Multiple config files
                                        can be specified, with values in later files taking
                                        precedence. Defaults to None.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--debug</option>
              <option>-d</option>
            </term>
            <listitem>
              <para>If set to true, the logging level will be set to DEBUG
                                        instead of the default INFO level.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--log-config-append</option>
              <option>--log_config</option>
            </term>
            <listitem>
              <para>The name of a logging configuration file. This file is
                                        appended to any existing logging configuration files.
                                        For details about logging configuration files, see the
                                        Python logging module documentation. Note that when
                                        logging configuration files are used then all logging
                                        configuration is set in the configuration file and
                                        other logging configuration options are ignored (for
                                        example, logging_context_format_string).</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--log-date-format</option>
            </term>
            <listitem>
              <para>Defines the format string for %(asctime)s in log
                                        records. Default: None . This option is ignored if
                                        log_config_append is set.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--log-dir</option>
              <option>--logdir</option>
            </term>
            <listitem>
              <para>(Optional) The base directory used for relative
                                        log_file paths. This option is ignored if
                                        log_config_append is set.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--log-file</option>
              <option>--logfile</option>
            </term>
            <listitem>
              <para>(Optional) Name of log file to send logging output to.
                                        If no default is set, logging will go to stderr as
                                        defined by use_stderr. This option is ignored if
                                        log_config_append is set.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--nodebug</option>
            </term>
            <listitem>
              <para>The inverse of –debug</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--nostandard-threads</option>
            </term>
            <listitem>
              <para>The inverse of –standard-threads</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--nouse-syslog</option>
            </term>
            <listitem>
              <para>The inverse of –use-syslog</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--noverbose</option>
            </term>
            <listitem>
              <para>The inverse of –verbose</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--nowatch-log-file</option>
            </term>
            <listitem>
              <para>The inverse of –watch-log-file</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--pydev-debug-host</option>
            </term>
            <listitem>
              <para>Host to connect to for remote debugger.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--pydev-debug-port</option>
            </term>
            <listitem>
              <para>Port to connect to for remote debugger.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--standard-threads</option>
            </term>
            <listitem>
              <para>Do not monkey-patch threading system modules.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--syslog-log-facility</option>
            </term>
            <listitem>
              <para>Syslog facility to receive log lines. This option is
                                        ignored if log_config_append is set.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--use-syslog</option>
            </term>
            <listitem>
              <para>Use syslog for logging. Existing syslog format is
                                        DEPRECATED and will be changed later to honor RFC5424.
                                        This option is ignored if log_config_append is set.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--verbose</option>
              <option>-v</option>
            </term>
            <listitem>
              <para>If set to false, the logging level will be set to
                                        WARNING instead of the default INFO level.</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--version</option>
            </term>
            <listitem>
              <para>show program’s version number and exit</para>
            </listitem>
          </varlistentry>
          <varlistentry>
            <term>
              <option>--watch-log-file</option>
            </term>
            <listitem>
              <para>Uses logging handler designed to watch file system.
                                        When log file is moved or removed this handler will
                                        open a new log file with specified path
                                        instantaneously. It makes sense only if log_file
                                        option is specified and Linux platform is used. This
                                        option is ignored if log_config_append is set.</para>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>
      <section>
        <title>FILES</title>
        <para>None</para>
      </section>
      <section>
        <title>SEE ALSO</title>
        <itemizedlist>
          <listitem>
            <para>
              <link xlink:href="https://docs.openstack.org/developer/keystone">OpenStack Keystone</link>
            </para>
          </listitem>
        </itemizedlist>
      </section>
      <section>
        <title>SOURCE</title>
        <itemizedlist>
          <listitem>
            <para>Keystone is sourced in Gerrit git <link xlink:href="https://git.openstack.org/cgit/openstack/keystone">Keystone</link></para>
          </listitem>
          <listitem>
            <para>Keystone bugs are managed at Launchpad <link xlink:href="https://bugs.launchpad.net/keystone">Keystone</link></para>
          </listitem>
        </itemizedlist>
      </section>
    </section>
  </section>
</section>
