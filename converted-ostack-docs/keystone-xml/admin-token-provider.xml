<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Token provider</title>
  <para>OpenStack Identity supports customizable token providers. This is specified
            in the <literal>[token]</literal> section of the configuration file. The token provider
            controls the token construction, validation, and revocation operations.</para>
  <para>You can register your own token provider by configuring the following property:</para>
  <note>
    <para>More commonly, you can use this option to change the token provider to one
                of the ones built in. Alternatively, you can use it to configure your own
                token provider.</para>
  </note>
  <itemizedlist>
    <listitem>
      <para><literal>provider</literal> - token provider driver.
                    Defaults to <literal>uuid</literal>.
                    Implemented by <literal>keystone.token.providers.uuid.Provider</literal>. This is the
                    entry point for the token provider in the <literal>keystone.token.provider</literal>
                    namespace.</para>
    </listitem>
  </itemizedlist>
  <para>Each token format uses different technologies to achieve various performance,
            scaling, and architectural requirements. The Identity service includes
            <literal>fernet</literal>, <literal>pkiz</literal>, <literal>pki</literal>, and <literal>uuid</literal> token providers.</para>
  <para>Below is the detailed list of the token formats:</para>
  <variablelist>
    <varlistentry>
      <term>UUID</term>
      <listitem>
        <para><literal>uuid</literal> tokens must be persisted (using the back end specified in the
                        <literal>[token] driver</literal> option), but do not require any extra configuration
                        or setup.</para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>PKI and PKIZ</term>
      <listitem>
        <para><literal>pki</literal> and <literal>pkiz</literal> tokens can be validated offline, without making HTTP
                        calls to keystone. However, this format requires that certificates be
                        installed and distributed to facilitate signing tokens and later validating
                        those signatures.</para>
      </listitem>
    </varlistentry>
    <varlistentry>
      <term>Fernet</term>
      <listitem>
        <para><literal>fernet</literal> tokens do not need to be persisted at all, but require that you run
                        <literal>keystone-manage fernet_setup</literal> (also see the
                        <literal>keystone-manage fernet_rotate</literal> command).</para>
      </listitem>
    </varlistentry>
  </variablelist>
  <warning>
    <para>UUID, PKI, PKIZ, and Fernet tokens are all bearer tokens. They
                must be protected from unnecessary disclosure to prevent unauthorized
                access.</para>
  </warning>
</section>
