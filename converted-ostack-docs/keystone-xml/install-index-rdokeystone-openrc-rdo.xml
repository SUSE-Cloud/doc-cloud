<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Create OpenStack client environment scripts</title>
  <para>The previous sections used a combination of environment variables and
            command options to interact with the Identity service via the
            <literal>openstack</literal> client. To increase efficiency of client operations,
            OpenStack supports simple client environment scripts also known as
            OpenRC files. These scripts typically contain common options for
            all clients, but also support unique options. For more information, see the
            <link xlink:href="https://docs.openstack.org/user-guide/common/cli_set_environment_variables_using_openstack_rc.html">OpenStack End User Guide</link>.</para>
  <section>
    <title>Creating the scripts</title>
    <para>Create client environment scripts for the <literal>admin</literal> and <literal>demo</literal>
                projects and users. Future portions of this guide reference these
                scripts to load appropriate credentials for client operations.</para>
    <note>
      <para>The paths of the client environment scripts are unrestricted.
                    For convenience, you can place the scripts in any location,
                    however ensure that they are accessible and located in a secure
                    place appropriate for your deployment, as they do contain sensitive
                    credentials.</para>
    </note>
    <procedure>
      <step>
        <para>Create and edit the <literal>admin-openrc</literal> file and add the following content:</para>
        <note>
          <para>The OpenStack client also supports using a <literal>clouds.yaml</literal> file.
                            For more information, see
                            the <link xlink:href="http://docs.openstack.org/developer/os-client-config/">os-client-config</link>.</para>
        </note>
        <screen language="bash">export OS_PROJECT_DOMAIN_NAME=Default
export OS_USER_DOMAIN_NAME=Default
export OS_PROJECT_NAME=admin
export OS_USERNAME=admin
export OS_PASSWORD=ADMIN_PASS
export OS_AUTH_URL=http://controller:35357/v3
export OS_IDENTITY_API_VERSION=3
export OS_IMAGE_API_VERSION=2</screen>
        <para>Replace <literal>ADMIN_PASS</literal> with the password you chose
                        for the <literal>admin</literal> user in the Identity service.</para>
      </step>
      <step>
        <para>Create and edit the <literal>demo-openrc</literal> file and add the following content:</para>
        <screen language="bash">export OS_PROJECT_DOMAIN_NAME=Default
export OS_USER_DOMAIN_NAME=Default
export OS_PROJECT_NAME=demo
export OS_USERNAME=demo
export OS_PASSWORD=DEMO_PASS
export OS_AUTH_URL=http://controller:5000/v3
export OS_IDENTITY_API_VERSION=3
export OS_IMAGE_API_VERSION=2</screen>
        <para>Replace <literal>DEMO_PASS</literal> with the password you chose
                        for the <literal>demo</literal> user in the Identity service.</para>
      </step>
    </procedure>
  </section>
  <section>
    <title>Using the scripts</title>
    <para>To run clients as a specific project and user, you can simply load
                the associated client environment script prior to running them.
                For example:</para>
    <procedure>
      <step>
        <para>Load the <literal>admin-openrc</literal> file to populate
                        environment variables with the location of the Identity service
                        and the <literal>admin</literal> project and user credentials:</para>
        <screen language="console">$ . admin-openrc</screen>
      </step>
      <step>
        <para>Request an authentication token:</para>
        <screen language="console">$ openstack token issue

+------------+-----------------------------------------------------------------+
| Field      | Value                                                           |
+------------+-----------------------------------------------------------------+
| expires    | 2016-02-12T20:44:35.659723Z                                     |
| id         | gAAAAABWvjYj-Zjfg8WXFaQnUd1DMYTBVrKw4h3fIagi5NoEmh21U72SrRv2trl |
|            | JWFYhLi2_uPR31Igf6A8mH2Rw9kv_bxNo1jbLNPLGzW_u5FC7InFqx0yYtTwa1e |
|            | eq2b0f6-18KZyQhs7F3teAta143kJEWuNEYET-y7u29y0be1_64KYkM7E       |
| project_id | 343d245e850143a096806dfaefa9afdc                                |
| user_id    | ac3377633149401296f6c0d92d79dc16                                |
+------------+-----------------------------------------------------------------+</screen>
      </step>
    </procedure>
  </section>
</section>
