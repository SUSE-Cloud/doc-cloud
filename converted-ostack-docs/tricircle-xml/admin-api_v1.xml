<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>The Tricircle Admin API</title>
  <para>This Admin API documentation describes the ways of interacting with the
            Tricircle service via HTTP protocol using Representational State Transfer(ReST).</para>
  <section>
    <title>API Versions</title>
    <para>In order to bring new features to users over time, versioning is supported
                by the Tricircle. The latest version of the Tricircle is v1.0.</para>
    <para>The Version APIs work the same as other APIs as they still require
                authentication.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="20.9*"/>
        <colspec colname="c2" colwidth="18.6*"/>
        <colspec colname="c3" colwidth="5.8*"/>
        <colspec colname="c4" colwidth="54.7*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/</para>
              <para>/{api_version}</para>
            </entry>
            <entry/>
            <entry>
              <para>List All Major versions</para>
              <para>Show Details of Specific API Version</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </section>
  <section>
    <title>Service URLs</title>
    <para>All API calls through the rest of this document require authentication with
                the OpenStack Identity service. They also require a base service url that can
                be got from the OpenStack Tricircle endpoint. This will be the root url that
                every call below will be added to build a full path.</para>
    <para>For instance, if the Tricircle service url is <literal>http://127.0.0.1/tricircle/v1.0</literal>
                then the full API call for <literal>/pods</literal> is <literal>http://127.0.0.1/tricircle/v1.0/pods</literal>.</para>
    <para>As such, for the rest of this document we will leave out the root url where
                <literal>GET /pods</literal> really means <literal>GET {tricircle_service_url}/pods</literal>.</para>
  </section>
  <section>
    <title>Pod</title>
    <para>A pod represents a region in Keystone. When operating a pod, the Tricircle
                decides the correct endpoints to send request based on the region of the pod.
                Considering the architecture of the Tricircle, we have two kinds of pods: pod
                for central Neutron and pod for local Neutron.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="20.9*"/>
        <colspec colname="c2" colwidth="10.5*"/>
        <colspec colname="c3" colwidth="40.7*"/>
        <colspec colname="c4" colwidth="27.9*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/pods</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve Pod List</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This fetches all the pods, including pod for central Neutron and pod(s) for
                local Neutron.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>Pods contains a list of pod instances whose attributes are described in the
                following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is a uuid attribute of the pod object.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>region_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>region_name is specified by user but must match the
                                    region name registered in Keystone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>When az_name is empty, it means this is a pod for
                                    central Neutron. If az_name is not empty, it means
                                    the pod will belong to this availability zone.
                                    Multiple pods with the same az_name means that these
                                    pods are under the same availability zone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_az_name is the az name used in the pod for local
                                    Neutron when creating network, router objects. It
                                    could be empty. If it’s empty, then no az parameter
                                    will be added to the request forwarded to the pod for
                                    local Neutron. If the pod_az_name is different from
                                    az_name, then the az parameter will be replaced with
                                    the pod_az_name when the request is forwarded to
                                    relevant pod for local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>dc_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>dc_name is the name of the data center where the pod
                                    is located.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /pods</literal>.</para>
    <screen>{
    "pods": [
       {
            "dc_name": "",
            "pod_az_name": "",
            "pod_id": "1a51bee7-10f0-47e8-bb4a-70f51394069c",
            "az_name": "",
            "region_name": "RegionOne"
        },
        {
            "dc_name": "",
            "pod_az_name": "",
            "pod_id": "22cca6ad-b791-4805-af14-923c5224fcd2",
            "az_name": "az2",
            "region_name": "Pod2"
        },
        {
            "dc_name": "",
            "pod_az_name": "",
            "pod_id": "3c22e5d4-5fed-45ed-a1e9-d532668cedc2",
            "az_name": "az1",
            "region_name": "Pod1"
        }
    ]
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="19.8*"/>
        <colspec colname="c2" colwidth="20.9*"/>
        <colspec colname="c3" colwidth="25.3*"/>
        <colspec colname="c4" colwidth="34.1*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/pods/{pod_id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve a Single Pod</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This fetches a pod for central Neutron or a pod for local Neutron.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>path</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is a uuid attribute of the pod object.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>Here are two kinds of pods, including pod for central Neutron and pod for local
                Neutron. az_name is one of its attributes. A pod with empty az_name is for
                central Neutron, otherwise a pod with az_name specified is for local Neutron.
                All of its attributes are described in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is a uuid attribute of the pod object.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>region_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>region_name is specified by user but must match the
                                    region name registered in Keystone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>When az_name is empty, it means this is a pod for
                                    central Neutron. If az_name is not empty, it means
                                    the pod will belong to this availability zone.
                                    Multiple pods with the same az_name means that these
                                    pods are under the same availability zone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_az_name is the az name used in the pod for local
                                    Neutron when creating network, router objects. It
                                    could be empty. If it’s empty, then no az parameter
                                    will be added to the request forwarded to the pod for
                                    local Neutron. If the pod_az_name is different from
                                    az_name, then the az parameter will be replaced with
                                    the pod_az_name when the request is forwarded to
                                    relevant pod for local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>dc_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>dc_name is the name of the data center where the pod
                                    is located.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /pods/{pod_id}</literal>.</para>
    <screen>{
    "pod": {
        "dc_name": "",
        "pod_az_name": "",
        "pod_id": "3c22e5d4-5fed-45ed-a1e9-d532668cedc2",
        "az_name": "az1",
        "region_name": "Pod1"
    }
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="19.2*"/>
        <colspec colname="c2" colwidth="9.0*"/>
        <colspec colname="c3" colwidth="46.2*"/>
        <colspec colname="c4" colwidth="25.6*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">POST</emphasis>
              </para>
            </entry>
            <entry>
              <para>/pods</para>
            </entry>
            <entry/>
            <entry>
              <para>Create a Pod</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This creates a pod for central Neutron or a pod for local Neutron.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <para>Some essential attributes of the pod instance are required and described
                in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>region_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>region_name is specified by user but must match the
                                    region name registered in Keystone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>When az_name is empty, it means this is a pod for
                                    central Neutron. If az_name is not empty, it means
                                    the pod will belong to this availability zone.
                                    Multiple pods with the same az_name means that these
                                    pods are under the same availability zone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_az_name is the az name used in the pod for local
                                    Neutron when creating network, router objects. It
                                    could be empty. If it’s empty, then no az parameter
                                    will be added to the request forwarded to the pod for
                                    local Neutron. If the pod_az_name is different from
                                    az_name, then the az parameter will be replaced with
                                    the pod_az_name when the request is forwarded to
                                    relevant pod for local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>dc_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>dc_name is the name of the data center where the pod
                                    is located.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>An id is assigned to a pod instance when it’s created. All of its attributes
                are listed below.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is automatically generated when creating a pod</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>region_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>region_name is specified by user but must match the
                                    region name registered in Keystone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>When az_name is empty, it means this is a pod for
                                    central Neutron. If az_name is not empty, it means
                                    the pod will belong to this availability zone.
                                    Multiple pods with the same az_name means that these
                                    pods are under the same availability zone.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_az_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_az_name is the az name used in the pod for local
                                    Neutron when creating network, router objects. It
                                    could be empty. If it’s empty, then no az parameter
                                    will be added to the request forwarded to the pod for
                                    local Neutron. If the pod_az_name is different from
                                    az_name, then the az parameter will be replaced with
                                    the pod_az_name when the request is forwarded to
                                    relevant pod for local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>dc_name</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>dc_name is the name of the data center where the pod
                                    is located.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Request Example</emphasis>
    </para>
    <para>This is an example of request information for <literal>POST /pods</literal>.</para>
    <screen>{
    "pod": {
        "region_name": "Pod3",
        "az_name": "az1",
        "pod_az_name": "az1",
        "dc_name": "data center 1"
    }
}</screen>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>POST /pods</literal>.</para>
    <screen>{
    "pod": {
        "dc_name": "data center 1",
        "pod_az_name": "az1",
        "pod_id": "e02e03b8-a94f-4eb1-991e-a8a271cc2313",
        "az_name": "az1",
        "region_name": "Pod3"
    }
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.4*"/>
        <colspec colname="c2" colwidth="20.2*"/>
        <colspec colname="c3" colwidth="28.6*"/>
        <colspec colname="c4" colwidth="29.8*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">DELETE</emphasis>
              </para>
            </entry>
            <entry>
              <para>/pods/{pod_id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Delete a Pod</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This deletes a pod for central Neutron or a pod for local Neutron from
                availability-zone.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>path</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is a uuid attribute of the pod object.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>There is no response. But we can list all the pods to verify whether the
                specific pod has been deleted or not.</para>
  </section>
  <section>
    <title>Resource Routing</title>
    <para>The Tricircle is responsible for resource(for example, network, subnet, port,
                router, etc) creation both in local Neutron and central Neutron.</para>
    <para>In order to dispatch resource operation request to the proper local Neutron,
                we need a resource routing table, which maps a resource from the central
                Neutron to local Neutron where it’s located.</para>
    <para>When user issues a resource update, query or delete request, central Neutron
                will capture this request and extract resource id from the request, then
                dispatch the request to target local Neutron on the basis of the routing table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.4*"/>
        <colspec colname="c2" colwidth="15.5*"/>
        <colspec colname="c3" colwidth="23.8*"/>
        <colspec colname="c4" colwidth="39.3*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/routings</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve All Resource Routings</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This fetches all the resource routing entries by default, but we can
                apply filter(s) on the returned values to only show the specific routing
                entries. Accordingly the filtering condition(s) will be added to the tail of
                the service url separated by question mark. For example, the default service
                url is <literal>GET /routings</literal>, when filtering is applied, the service url becomes
                <literal>GET /routings?attribute=attribute_value</literal>. One or multiple conditions are
                supported. What’s more, project ID filter in URL query string will be ignored,
                and only the project ID in which the user is authorized will be used as the filter.</para>
    <para>All items returned are sorted in descending order by ID. Because the ID is a
                big integer, ID with greater value means they are newly added to the resource
                routing table. So most recently created items will be shown first.</para>
    <para>To reduce load on service, list operation returns a maximum number of items
                at a time by pagination. To navigate the collection, the parameters limit
                and marker can be set in the URI. For example: <literal>GET /v1.0/routings?limit=2000&amp;marker=500</literal>.
                The marker parameter is the ID of the last item in the previous list.
                If marker is specified, we can get the results after this item. A marker
                with an invalid ID results in a bad request. The limit parameter sets
                the page size. If the client requests a limit beyond the maximum limit
                in configuration, then this maximum limit will be used. For each list request,
                if there are more items waiting to be shown besides those already in page,
                then a link to next page will be given. Using this link and same filtering
                conditions we can retrieve the following items. If the total number of items is
                less than the limit, then no next page link in the response. If user lists the
                routings without limit value specified, then maximum limit value will be
                used to control page size for protecting service.</para>
    <para>Both limit and marker parameters are optional, they can be specified together
                or separately. Pagination and filtering can work together in routing list
                operations.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>The resource routing set contains a list of resource routing entries whose
                attributes are described in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>biginteger</para>
            </entry>
            <entry>
              <para>id is the unique identification of the resource
                                    routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>top_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>top_id denotes the resource id on central Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>bottom_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>bottom_id denotes the resource id on local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is the uuid of one pod(i.e., one region).</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource_type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>resource_type denotes one of the available resource
                                    types, including network, subnet, port, router and
                                    security_group.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>created_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>created time of the resource routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>updated_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>updated time of the resource routing.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /routings</literal>. By default, all
                the resource routing entries will be returned. As there is no page size limit
                provided by the client, so default maximum pagination limit is used. As is shown,
                because total number of items is less than the limit, therefore no next page link
                in the response.</para>
    <screen>{
    "routings": [
       {
            "updated_at": "2016-09-25 03:16:33"",
            "created_at": "2016-09-25 03:16:32",
            "top_id": "4487087e-34c7-40d8-8553-3a4206d0591b",
            "id": 3,
            "bottom_id": "834ef10b-a96f-460c-b448-b39b9f3e6b52",
            "project_id": "d937fe2ad1064a37968885a58808f7a3",
            "pod_id": "444a8ce3-9fb6-4a0f-b948-6b9d31d6b202",
            "resource_type": "security_group"
        },
        {
            "updated_at": "2016-09-25 03:16:31",
            "created_at": "2016-09-25 03:16:30",
            "top_id": "a4d786fd-0511-4fac-be45-8b9ee447324b",
            "id": 2,
            "bottom_id": "7a05748c-5d1a-485e-bd5c-e52bc39b5414",
            "project_id": "d937fe2ad1064a37968885a58808f7a3",
            "pod_id": "444a8ce3-9fb6-4a0f-b948-6b9d31d6b202",
            "resource_type": "network"
        }
    ]
}</screen>
    <para>This is an example of response information for <literal>GET /v1.0/routings?limit=2</literal>,
                to retrieve the first page we can only provide limit value.</para>
    <screen>{
    "routings": [
       {
           "updated_at": null,
           "created_at": "2017-06-11 12:52:46",
           "top_id": "e091d3ad-a5a9-41a1-a948-54e2a1583b8d",
           "id": 8,
           "bottom_id": "e091d3ad-a5a9-41a1-a948-54e2a1583b8d",
           "project_id": "3b2a11d52ec44d7bb8c53a18fd5105d6",
           "pod_id": "07ce2e57-fdba-4a6a-a7ce-44528108380d",
           "resource_type": "security_group"
       },
       {
           "updated_at": null,
           "created_at": "2017-06-11 12:52:46",
           "top_id": "90806f6a-2c79-4cdf-8db4-de1f3e46fe1f",
           "id": 6,
           "bottom_id": "90806f6a-2c79-4cdf-8db4-de1f3e46fe1f",
           "project_id": "3b2a11d52ec44d7bb8c53a18fd5105d6",
           "pod_id": "07ce2e57-fdba-4a6a-a7ce-44528108380d",
           "resource_type": "network"
       }
    ],
    "routings_links": [
        {
            "href": "/v1.0/routings?limit=2&amp;marker=6",
            "rel": "next"
        }
    ]
}</screen>
    <para>This is an example of response information for <literal>GET /v1.0/routings?limit=2&amp;marker=6</literal>,
                with the help of the link to next page, we can get the following items.</para>
    <screen>{
    "routings": [
       {
           "updated_at": null,
           "created_at": "2017-06-11 12:52:46",
           "top_id": "724b5ae0-d4eb-4165-a2cc-e6428719cab3",
           "id": 5,
           "bottom_id": "724b5ae0-d4eb-4165-a2cc-e6428719cab3",
           "project_id": "3b2a11d52ec44d7bb8c53a18fd5105d6",
           "pod_id": "07ce2e57-fdba-4a6a-a7ce-44528108380d",
           "resource_type": "subnet"
       },
       {
           "updated_at": null,
           "created_at": "2017-06-11 12:50:01",
           "top_id": "64b886de-62ca-4713-9461-bd77c79e2282",
           "id": 4,
           "bottom_id": null,
           "project_id": "3b2a11d52ec44d7bb8c53a18fd5105d6",
           "pod_id": "8ae8c849-ce30-43bb-8346-d4da6678fc9c",
           "resource_type": "network"
       }
    ],
    "routings_links": [
        {
            "href": "/v1.0/routings?limit=2&amp;marker=4",
            "rel": "next"
        }
    ]
}</screen>
    <para>This is an example of response information for <literal>GET /v1.0/routings?limit=2&amp;resource_type=port</literal>.
                When filter and limit are applied to the list operation, we can restrict the total number of
                specific routing entries.</para>
    <screen>{
    "routings": [
       {
           "updated_at": "2017-06-11 12:49:41",
           "created_at": "2017-06-11 12:49:41",
           "top_id": "interface_RegionOne_724b5ae0-d4eb-4165-a2cc-e6428719cab3",
           "id": 3,
           "bottom_id": "73845c04-a709-4b0d-a70e-71923c4c5bfc",
           "project_id": "3b2a11d52ec44d7bb8c53a18fd5105d6",
           "pod_id": "07ce2e57-fdba-4a6a-a7ce-44528108380d",
           "resource_type": "port"
       },
       {
           "updated_at": "2017-06-11 12:49:03",
           "created_at": "2017-06-11 12:49:03",
           "top_id": "dhcp_port_724b5ae0-d4eb-4165-a2cc-e6428719cab3",
           "id": 2,
           "bottom_id": "4c6f2e86-7455-4fe5-8cbc-7c3d6bc7625f",
           "project_id": "3b2a11d52ec44d7bb8c53a18fd5105d6",
           "pod_id": "6073e33e-4d4f-45dc-961a-d7d3b4a8e7f7",
           "resource_type": "port"
       }
    ],
    "routings_links": [
        {
            "href": "/v1.0/routings?limit=2&amp;marker=2",
            "rel": "next"
        }
    ]
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="17.6*"/>
        <colspec colname="c3" colwidth="17.6*"/>
        <colspec colname="c4" colwidth="43.5*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/routings/{id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve a Single Resource Routing</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This fetches a single resource routing entry.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>path</para>
            </entry>
            <entry>
              <para>biginteger</para>
            </entry>
            <entry>
              <para>id is the unique identification of the resource
                                    routing.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>A kind of resource in central Neutron, when it is created by the Tricircle, is
                mapped to the same resource in local Neutron. Resource routing records this
                mapping relationship. All of its attributes are described in the following
                table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>biginteger</para>
            </entry>
            <entry>
              <para>id is the unique identification of the resource
                                    routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>top_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>top_id denotes the resource id on central Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>bottom_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>bottom_id denotes the resource id on local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is the uuid of one pod(i.e., one region).</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource_type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>resource_type denotes one of the available resource
                                    types, including network, subnet, port, router and
                                    security_group.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>created_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>created time of the resource routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>updated_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>updated time of the resource routing.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /routings/{id}</literal>.</para>
    <screen>{
    "routing": {
        "updated_at": null,
        "created_at": "2016-10-25 13:10:26",
        "top_id": "09fd7cc9-d169-4b5a-88e8-436ecf4d0bfe",
        "id": 43,
        "bottom_id": "dc80f9de-abb7-4ec6-ab7a-94f8fd1e20ef",
        "project_id": "d937fe2ad1064a37968885a58808f7a3",
        "pod_id": "444a8ce3-9fb6-4a0f-b948-6b9d31d6b202",
        "resource_type": "subnet"
    }
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="17.6*"/>
        <colspec colname="c3" colwidth="20.0*"/>
        <colspec colname="c4" colwidth="41.2*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">POST</emphasis>
              </para>
            </entry>
            <entry>
              <para>/routings</para>
            </entry>
            <entry/>
            <entry>
              <para>Create a Resource Routing</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This creates a resource routing. For a kind of resource created in central
                Neutron, it is mapped to the same resource in local Neutron.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <para>Some essential fields of the resource routing entry are required and described
                in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>top_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>top_id denotes the resource id on central Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>bottom_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>bottom_id denotes the resource id on local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is the uuid of one pod(i.e., one region).</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource_type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>resource_type denotes one of the available resource
                                    types, including network, subnet, port, router and
                                    security_group.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>An id is assigned to the resource routing when it’s created. All routing
                entry’s attributes are listed below.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>biginteger</para>
            </entry>
            <entry>
              <para>id is the unique identification of the resource
                                    routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>top_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>top_id denotes the resource id on central Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>bottom_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>bottom_id denotes the resource id on local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is the uuid of one pod(i.e., one region).</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource_type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>resource_type denotes one of the available resource
                                    types, including network, subnet, port, router and
                                    security_group.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>created_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>created time of the resource routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>updated_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>updated time of the resource routing.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Request Example</emphasis>
    </para>
    <para>This is an example of request information for <literal>POST /routings</literal>.</para>
    <screen>{
    "routing": {
        "top_id": "09fd7cc9-d169-4b5a-88e8-436ecf4d0bfg",
        "bottom_id": "dc80f9de-abb7-4ec6-ab7a-94f8fd1e20ek",
        "pod_id": "444a8ce3-9fb6-4a0f-b948-6b9d31d6b202",
        "project_id": "d937fe2ad1064a37968885a58808f7a3",
        "resource_type": "subnet"
    }
}</screen>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>POST /routings</literal>.</para>
    <screen>{
    "routing": {
        "updated_at": null,
        "created_at": "2016-11-03 03:06:38",
        "top_id": "09fd7cc9-d169-4b5a-88e8-436ecf4d0bfg",
        "id": 45,
        "bottom_id": "dc80f9de-abb7-4ec6-ab7a-94f8fd1e20ek",
        "project_id": "d937fe2ad1064a37968885a58808f7a3",
        "pod_id": "444a8ce3-9fb6-4a0f-b948-6b9d31d6b202",
        "resource_type": "subnet"
    }
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="17.6*"/>
        <colspec colname="c3" colwidth="20.0*"/>
        <colspec colname="c4" colwidth="41.2*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">DELETE</emphasis>
              </para>
            </entry>
            <entry>
              <para>/routings/{id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Delete a Resource Routing</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This deletes a resource routing entry. But deleting an existing routing entry
                created by Tricircle itself may cause problem: Central Neutron may make wrong
                judgement on whether the resource exists or not without this routing entry.
                Moreover, related request can’t be forwarded to the proper local Neutron
                either.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>path</para>
            </entry>
            <entry>
              <para>biginteger</para>
            </entry>
            <entry>
              <para>id is the unique identification of the resource
                                    routing.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>There is no response. But we can list all the resource routing entries to
                verify whether the specific routing entry has been deleted or not.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="17.6*"/>
        <colspec colname="c3" colwidth="20.0*"/>
        <colspec colname="c4" colwidth="41.2*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">PUT</emphasis>
              </para>
            </entry>
            <entry>
              <para>/routings/{id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Update a Resource Routing</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This updates an existing resource routing entry. But updating an existing
                routing entry created by Tricircle itself may cause problem: Central Neutron
                may make wrong judgement on whether the resource exists or not without this
                routing entry. Moreover, related request can’t be forwarded to the proper local
                Neutron either.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <para>Some specific attributes of the resource routing entry can be updated, but they
                are only limited to the fields in the following table, other fields can not be
                updated manually.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>top_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>top_id denotes the resource id on central Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>bottom_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>bottom_id denotes the resource id on local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is the uuid of one pod(i.e., one region).</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource_type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>resource_type denotes one of the available resource
                                    types, including network, subnet, port, router and
                                    security_group.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>Some specific fields of the resource routing entry will be updated. All
                attributes of routing entry are listed below.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>biginteger</para>
            </entry>
            <entry>
              <para>id is the unique identification of the resource
                                    routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>top_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>top_id denotes the resource id on central Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>bottom_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>bottom_id denotes the resource id on local Neutron.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>pod_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>pod_id is the uuid of one pod(i.e., one region).</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource_type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>resource_type denotes one of the available resource
                                    types, including network, subnet, port, router and
                                    security_group.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>created_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>created time of the resource routing.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>updated_at</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>updated time of the resource routing.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Request Example</emphasis>
    </para>
    <para>This is an example of request information for <literal>PUT /routings/{id}</literal>.</para>
    <screen>{
    "routing": {
        "resource_type": "router"
    }
}</screen>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>PUT /routings/{id}</literal>. The change
                of the field updated_at will be showed next time we retrieve this routing entry
                from the database.</para>
    <screen>{
    "routing": {
        "updated_at": null,
        "created_at": "2016-11-03 03:06:38",
        "top_id": "09fd7cc9-d169-4b5a-88e8-436ecf4d0bfg",
        "id": 45,
        "bottom_id": "dc80f9de-abb7-4ec6-ab7a-94f8fd1e20ek",
        "project_id": "d937fe2ad1064a37968885a58808f7a3",
        "pod_id": "444a8ce3-9fb6-4a0f-b948-6b9d31d6b202",
        "resource_type": "router"
    }
}</screen>
  </section>
  <section>
    <title>Asynchronous Job</title>
    <para>Tricircle XJob provides OpenStack multi-region functionality. It receives jobs
                from the Admin API or Tricircle Central Neutron Plugin and handles them
                asynchronously in Local Neutron(s).</para>
    <para>However, XJob server may strike occasionally so the tenants or administrators
                need to know the job status and delete or redo the failed job if necessary.
                Asynchronous job management APIs provide such functionality and allow user
                to perform CRUD operations on a job. For example, when there is a need to
                synchronize resource between central Neutron and local Neutron, administrator
                can create a job to process it.</para>
    <para>Jobs are categorized into different groups according to their phases in
                lifespan. Each job lives from birth till death. Right after a job is created,
                its status is NEW. After picked up by the job handler its status becomes
                RUNNING. Then if executed successfully, its status will be SUCCESS, otherwise
                its status will be set to FAIL. But not all jobs go through the three phases.
                For job whose status is NEW, if a newer job performing the same task comes,
                then this newer job will be picked up by job handler, the status of the
                relatively old job won’t be changed until this job is cleaned from the job
                queue. A NEW job may also expire if it waits for too long, then its status is
                set to FAIL directly and skips the RUNNING phase. The expiration time span is
                set by administrator. All failed jobs have the opportunity to run again in next
                cycle of a periodical task.</para>
    <para>After a job runs successfully it will be moved to job log table automatically,
                the older versions of this job like new and failed jobs are removed from job
                table at the same time.</para>
    <para>There are two places to store jobs. All active jobs are stored in job table,
                including NEW, RUNNING, FAIL jobs and a small bunch of SUCCESS jobs that
                haven’t been moved to job log table timely. But job log table only contains
                SUCCESS jobs, they can be listed and shown like other jobs in job table,
                but when performing delete or redo operation on them, an exception will
                be raised.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="18.8*"/>
        <colspec colname="c3" colwidth="31.8*"/>
        <colspec colname="c4" colwidth="28.2*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/jobs</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve Job List</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>By default, this fetches all of the jobs including active jobs like NEW, FAIL
                and RUNNING jobs as well as SUCCESS jobs from job log. We can filter them by
                job type and job status to only get the specific kind of job entries, project ID
                filter in URL query string will be ignored, and only the project ID in which
                the user is authorized will be used as the filter.
                Accordingly the filtering condition will be added to the tail
                of the service url separated by question mark. For example, the default
                service url is <literal>GET /jobs</literal>. Using a filter the service url becomes
                <literal>GET /jobs?filter_name=value</literal>. One or multiple filtering conditions are
                supported. Particularly, job status is case insensitive when filtering the
                jobs, so both <literal>GET /jobs?status=NEW</literal> and <literal>GET /jobs?status=new</literal> will return
                the same job set.</para>
    <para>To reduce the load on service, job list operation also supports pagination as
                resource routing does. It takes <literal>limit</literal> parameter as page size, and takes the
                item following <literal>marker</literal> parameter as starting point for next list operation.</para>
    <para>All items in job log table are successful jobs, there are nothing new. So job table
                will be searched ahead of job log table. Then failed, new or running jobs will be
                shown first. These jobs are sorted by timestamp in descending order, if two or more
                jobs have the same timestamp, then they’ll be further sorted by job id in descending
                order.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>In normal case, a set of expected jobs will be returned. For invalid filtering
                value, an empty set will be returned. For unsupported filter name, an error
                will be raised.</para>
    <para>The attributes of single job are described in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>id is a uuid attribute of the job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>the type of a job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>status</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>job status, including NEW, RUNNING, SUCCESS, FAIL.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>object</para>
            </entry>
            <entry>
              <para>all kinds of resources that are needed to run the
                                    job. It may also contain other necessary parameters
                                    such as pod_id and project_id that are not Neutron
                                    resources.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>create or update time of the job.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /jobs</literal>. By default, all the
                job entries will be retrieved.</para>
    <screen>{
    "jobs": [
        {
            "id": "3f4ecf30-0213-4f1f-9cb0-0233bcedb767",
            "project_id": "d01246bc5792477d9062a76332b7514a",
            "type": "port_delete",
            "timestamp": "2017-03-03 11:05:36",
            "status": "NEW",
            "resource": {
                "pod_id": "0eb59465-5132-4f57-af01-a9e306158b86",
                "port_id": "8498b903-9e18-4265-8d62-3c12e0ce4314"
            }
        },
        {
            "id": "b01fe514-5211-4758-bbd1-9f32141a7ac2",
            "project_id": "d01246bc5792477d9062a76332b7514a",
            "type": "seg_rule_setup",
            "timestamp": "2017-03-01 17:14:44",
            "status": "FAIL",
            "resource": {
                "project_id": "d01246bc5792477d9062a76332b7514a"
            }
        }
    ]
}</screen>
    <para>This is an example of response information for <literal>GET /v1.0/jobs?limit=2</literal>. When
                total number of items is equal or greater than limit value, then a link to next
                page will be returned.</para>
    <screen><?dbsuse-fo font-size="8pt"?>{
    "jobs": [
        {
            "status": "SUCCESS",
            "resource": {
                "network_id": "7bf3ef1c-1f03-47b5-8191-a3d56938581b",
                "pod_id": "e6880238-3764-4de7-8644-3c09cff85b03"
            },
            "timestamp": "2017-07-26 22:36:48",
            "project_id": "cab94f5a2c6346fe956d3f45ccf84c82",
            "type": "shadow_port_setup",
            "id": "ee035edb-87a6-4dc4-ba00-06d6e62e9ad4"
        },
        {
            "status": "SUCCESS",
            "resource": {
                "router_id": "dbaa0b04-0686-45b6-8bac-a61269517c14"
            },
            "timestamp": "2017-07-26 22:36:39",
            "project_id": "cab94f5a2c6346fe956d3f45ccf84c82",
            "type": "configure_route",
            "id": "a10d9078-dee4-45d4-a352-d89d7072b766"
        }
    ],
     "jobs_links": [
        {
            "href": "/v1.0/jobs?limit=2&amp;marker=a10d9078-dee4-45d4-a352-d89d7072b766",
            "rel": "next"
        }
    ]
}</screen>
    <para>This is an example of response information for <literal>GET /v1.0/jobs?limit=2&amp;marker=a10d9078-dee4-45d4-a352-d89d7072b766</literal>.
                When marker is provided, the next list operation will start from the item
                following the marker.</para>
    <screen><?dbsuse-fo font-size="8pt"?>{
    "jobs": [
        {
            "status": "SUCCESS",
            "resource": {
                "router_id": "dbaa0b04-0686-45b6-8bac-a61269517c14"
            },
            "timestamp": "2017-07-26 22:36:20",
            "project_id": "cab94f5a2c6346fe956d3f45ccf84c82",
            "type": "configure_route",
            "id": "89ae3921-2349-49fb-85ad-804b8ca99053"

        },
        {
            "status": "SUCCESS",
            "resource": {
                "network_id": "7bf3ef1c-1f03-47b5-8191-a3d56938581b",
                "pod_id": "e6880238-3764-4de7-8644-3c09cff85b03"
            },
            "timestamp": "2017-07-26 22:36:12",
            "project_id": "cab94f5a2c6346fe956d3f45ccf84c82",
            "type": "shadow_port_setup",
            "id": "afd8761b-b082-4fce-af00-afee07c3b923"
        }
    ],
     "jobs_links": [
        {
            "href": "/v1.0/jobs?limit=2&amp;marker=afd8761b-b082-4fce-af00-afee07c3b923",
            "rel": "next"
        }
    ]
}</screen>
    <para>This is an example of response information for <literal>GET /v1.0/jobs?limit=2&amp;marker=a10d9078-dee4-45d4-a352-d89d7072b766&amp;type=shadow_port_setup</literal>.
                Pagination and filtering requirements can be met by specifying limit and
                filtering conditions at the same time. If there are more items waiting to
                be shown besides those already in page, then a link to next page will be
                returned. Using this link and same filtering conditions we can retrieve the
                following items.</para>
    <screen><?dbsuse-fo font-size="8pt"?>{
    "jobs": [
        {
            "status": "SUCCESS",
            "resource": {
                "network_id": "7bf3ef1c-1f03-47b5-8191-a3d56938581b",
                "pod_id": "e6880238-3764-4de7-8644-3c09cff85b03"
            },
            "timestamp": "2017-07-26 22:36:12",
            "project_id": "cab94f5a2c6346fe956d3f45ccf84c82",
            "type": "shadow_port_setup",
            "id": "afd8761b-b082-4fce-af00-afee07c3b923"

        },
        {
            "status": "SUCCESS",
            "resource": {
                "network_id": "fb53ea2d-a0e8-4ed5-a2b2-f0e2fce9ff4f",
                "pod_id": "e6880238-3764-4de7-8644-3c09cff85b03"
            },
            "timestamp": "2017-07-26 22:33:45",
            "project_id": "cab94f5a2c6346fe956d3f45ccf84c82",
            "type": "shadow_port_setup",
            "id": "592ade1c-12a5-4ca3-9f75-4810c25a1604"
        }
    ],
     "jobs_links": [
        {
            "href": "/v1.0/jobs?limit=2&amp;marker=592ade1c-12a5-4ca3-9f75-4810c25a1604",
            "rel": "next"
        }
    ]
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="19.8*"/>
        <colspec colname="c2" colwidth="20.9*"/>
        <colspec colname="c3" colwidth="25.3*"/>
        <colspec colname="c4" colwidth="34.1*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/jobs/detail</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve Jobs with Filter(s)</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>Retrieve jobs from the Tricircle database. We can filter them by project ID,
                job type and job status. It functions the same as service <literal>GET /jobs</literal>.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>A list of jobs will be returned. The attributes of single job are described
                in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>id is a uuid attribute of the job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>the type of a job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>status</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>job status, including NEW, RUNNING, SUCCESS, FAIL.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>object</para>
            </entry>
            <entry>
              <para>all kinds of resources that are needed to run the
                                    job. It may also contain other necessary parameters
                                    such as pod_id and project_id that are not Neutron
                                    resources.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>create or update time of the job.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /jobs/detail</literal>.</para>
    <screen>{
    "jobs": [
        {
            "id": "3f4ecf30-0213-4f1f-9cb0-0233bcedb767",
            "project_id": "d01246bc5792477d9062a76332b7514a",
            "type": "port_delete",
            "timestamp": "2017-03-03 11:05:36",
            "status": "NEW",
            "resource": {
                "pod_id": "0eb59465-5132-4f57-af01-a9e306158b86",
                "port_id": "8498b903-9e18-4265-8d62-3c12e0ce4314"
            }
        },
        {
            "id": "b01fe514-5211-4758-bbd1-9f32141a7ac2",
            "project_id": "d01246bc5792477d9062a76332b7514a",
            "type": "seg_rule_setup",
            "timestamp": "2017-03-01 17:14:44",
            "status": "FAIL",
            "resource": {
                "project_id": "d01246bc5792477d9062a76332b7514a"
            }
        }
    ]
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="17.6*"/>
        <colspec colname="c3" colwidth="17.6*"/>
        <colspec colname="c4" colwidth="43.5*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/jobs/{id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve a Single Job</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This fetches a single job entry. This entry may be from job table or job log
                table.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>path</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>id is a uuid attribute of the job.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>The attributes of the returned job are described in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>id is a uuid attribute of the job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>the type of a job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>status</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>job status, including NEW, RUNNING, SUCCESS, FAIL.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>object</para>
            </entry>
            <entry>
              <para>all kinds of resources that are needed to run the
                                    job. It may also contain other necessary parameters
                                    such as pod_id and project_id that are not Neutron
                                    resources.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>create or update time of the job.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /job/{id}</literal>.</para>
    <screen>{
    "job": {
        "id": "3f4ecf30-0213-4f1f-9cb0-0233bcedb767",
        "project_id": "d01246bc5792477d9062a76332b7514a",
        "type": "port_delete",
        "timestamp": "2017-03-03 11:05:36",
        "status": "NEW",
        "resource": {
            "pod_id": "0eb59465-5132-4f57-af01-a9e306158b86",
            "port_id": "8498b903-9e18-4265-8d62-3c12e0ce4314"
        }
    }
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="18.8*"/>
        <colspec colname="c3" colwidth="31.8*"/>
        <colspec colname="c4" colwidth="28.2*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">GET</emphasis>
              </para>
            </entry>
            <entry>
              <para>/jobs/schemas</para>
            </entry>
            <entry/>
            <entry>
              <para>Retrieve Jobs’ Schemas</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>Retrieve all jobs’ schemas.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>This returns a list of all jobs’ schemas. The architecture of job schema
                is described as following.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>the type of a job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>array</para>
            </entry>
            <entry>
              <para>all kinds of resources that are needed to run the
                                    job. It may also contain other necessary parameters
                                    such as pod_id and project_id that are not Neutron
                                    resources.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>GET /jobs/schemas</literal>.</para>
    <screen>{
    "schemas": [
        {
            "type": "configure_route",
            "resource": ["router_id"]
        },
        {
            "type": "router_setup",
            "resource": ["pod_id", "router_id", "network_id"]
        },
        {
            "type": "port_delete",
            "resource": ["pod_id", "port_id"]
        },
        {
            "type": "seg_rule_setup",
            "resource": ["project_id"]
        },
        {
            "type": "update_network",
            "resource": ["pod_id", "network_id"]
        },
        {
            "type": "subnet_update",
            "resource": ["pod_id", "subnet_id"]
        },
        {
            "type": "shadow_port_setup",
            "resource": [pod_id", "network_id"]
        }
    ]
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="19.2*"/>
        <colspec colname="c2" colwidth="9.0*"/>
        <colspec colname="c3" colwidth="46.2*"/>
        <colspec colname="c4" colwidth="25.6*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">POST</emphasis>
              </para>
            </entry>
            <entry>
              <para>/job</para>
            </entry>
            <entry/>
            <entry>
              <para>Create a Job</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>This creates a new job. If target job already exists in the job table and its
                status is NEW, then this newer job will be picked up by job handler.</para>
    <para>Normal Response Code: 202</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <para>Some essential attributes of the job are required and they are described
                in the following table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>the type of a job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>object</para>
            </entry>
            <entry>
              <para>all kinds of resources that are needed to run the
                                    job. It may also contain other necessary parameters
                                    such as pod_id and project_id that are not Neutron
                                    resources.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>This returns a newly created job. Its attributes are described in the following
                table.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>id is a uuid attribute of the job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>project_id</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>project_id is the uuid of a project object in
                                    KeyStone. “Tenant” is an old term for a project in
                                    Keystone. Starting in API version 3, “project” is the
                                    preferred term. They are identical in the context.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>type</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>the type of a job.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>status</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>job status, including NEW, RUNNING, SUCCESS, FAIL.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>resource</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>object</para>
            </entry>
            <entry>
              <para>all kinds of resources that are needed to run the
                                    job. It may also contain other necessary parameters
                                    such as pod_id and project_id that are not Neutron
                                    resources.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>body</para>
            </entry>
            <entry>
              <para>timestamp</para>
            </entry>
            <entry>
              <para>create time of the job.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Request Example</emphasis>
    </para>
    <para>This is an example of request information for <literal>POST /jobs</literal>.</para>
    <screen>{
    "job": {
        "type": "port_delete",
        "project_id": "d01246bc5792477d9062a76332b7514a",
        "resource": {
            "pod_id": "0eb59465-5132-4f57-af01-a9e306158b86",
            "port_id": "8498b903-9e18-4265-8d62-3c12e0ce4314"
        }
    }
}</screen>
    <para>
      <emphasis role="bold">Response Example</emphasis>
    </para>
    <para>This is an example of response information for <literal>POST /jobs</literal>.</para>
    <screen>{
    "job": {
        "id": "3f4ecf30-0213-4f1f-9cb0-0233bcedb767",
        "project_id": "d01246bc5792477d9062a76332b7514a",
        "type": "port_delete",
        "timestamp": "2017-03-03 11:05:36",
        "status": "NEW",
        "resource": {
            "pod_id": "0eb59465-5132-4f57-af01-a9e306158b86",
            "port_id": "8498b903-9e18-4265-8d62-3c12e0ce4314"
        }
    }
}</screen>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.4*"/>
        <colspec colname="c2" colwidth="20.2*"/>
        <colspec colname="c3" colwidth="28.6*"/>
        <colspec colname="c4" colwidth="29.8*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">DELETE</emphasis>
              </para>
            </entry>
            <entry>
              <para>/jobs/{id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Delete a Job</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>Delete a failed or duplicated job from the job table. If a user tries to delete
                a job from job log table, an error will be raised.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="12.8*"/>
        <colspec colname="c2" colwidth="8.1*"/>
        <colspec colname="c3" colwidth="17.4*"/>
        <colspec colname="c4" colwidth="61.6*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>path</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>id is a uuid attribute of the job.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>A pair of curly braces will be returned if succeeds, otherwise an exception
                will be thrown. We can list jobs to verify whether it has been deleted
                successfully or not.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="21.2*"/>
        <colspec colname="c2" colwidth="17.6*"/>
        <colspec colname="c3" colwidth="20.0*"/>
        <colspec colname="c4" colwidth="41.2*"/>
        <tbody>
          <row>
            <entry>
              <para>
                <emphasis role="bold">PUT</emphasis>
              </para>
            </entry>
            <entry>
              <para>/jobs/{id}</para>
            </entry>
            <entry/>
            <entry>
              <para>Redo a Job</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>Redo a halted job brought by the XJob server corruption or network failures.
                The job handler will redo a failed job with time interval, but this Admin API
                will redo a job immediately. If a user tries to redo a job in job log table,
                an error will be raised.</para>
    <para>Normal Response Code: 200</para>
    <para>
      <emphasis role="bold">Request</emphasis>
    </para>
    <para>Only job id is needed. We use PUT method to redo a job. Regularly PUT method
                requires a request body, but considering the job redo operation doesn’t
                need more information other than job id, we will issue this request without
                request body.</para>
    <informaltable>
      <tgroup cols="4">
        <colspec colname="c1" colwidth="14.8*"/>
        <colspec colname="c2" colwidth="8.0*"/>
        <colspec colname="c3" colwidth="17.0*"/>
        <colspec colname="c4" colwidth="60.2*"/>
        <thead>
          <row>
            <entry>
              <para>Name</para>
            </entry>
            <entry>
              <para>In</para>
            </entry>
            <entry>
              <para>Type</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>id</para>
            </entry>
            <entry>
              <para>path</para>
            </entry>
            <entry>
              <para>string</para>
            </entry>
            <entry>
              <para>id is a uuid attribute of the job.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
    <para>
      <emphasis role="bold">Response</emphasis>
    </para>
    <para>Nothing will be returned for this request, but we can monitor its status
                through the execution state.</para>
  </section>
</section>
