<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>neutron-debug command-line client</title>
  <para>The <command>neutron-debug</command> client is an extension to the <command>neutron</command>
            command-line interface (CLI) for the OpenStack neutron-debug tool.</para>
  <para>This chapter documents <command>neutron-debug</command> version <literal>2.3.0</literal>.</para>
  <para>For help on a specific <command>neutron-debug</command> command, enter:</para>
  <screen language="console">$ neutron-debug help COMMAND</screen>
  <section>
    <title>neutron-debug usage</title>
    <screen language="console"><?dbsuse-fo font-size="8pt"?>usage: neutron-debug [--version] [-v] [-q] [-h] [-r NUM]
                     [--os-service-type &lt;os-service-type&gt;]
                     [--os-endpoint-type &lt;os-endpoint-type&gt;]
                     [--service-type &lt;service-type&gt;]
                     [--endpoint-type &lt;endpoint-type&gt;]
                     [--os-auth-strategy &lt;auth-strategy&gt;] [--os-cloud &lt;cloud&gt;]
                     [--os-auth-url &lt;auth-url&gt;]
                     [--os-tenant-name &lt;auth-tenant-name&gt; | --os-project-name &lt;auth-project-name&gt;]
                     [--os-tenant-id &lt;auth-tenant-id&gt; | --os-project-id &lt;auth-project-id&gt;]
                     [--os-username &lt;auth-username&gt;]
                     [--os-user-id &lt;auth-user-id&gt;]
                     [--os-user-domain-id &lt;auth-user-domain-id&gt;]
                     [--os-user-domain-name &lt;auth-user-domain-name&gt;]
                     [--os-project-domain-id &lt;auth-project-domain-id&gt;]
                     [--os-project-domain-name &lt;auth-project-domain-name&gt;]
                     [--os-cert &lt;certificate&gt;] [--os-cacert &lt;ca-certificate&gt;]
                     [--os-key &lt;key&gt;] [--os-password &lt;auth-password&gt;]
                     [--os-region-name &lt;auth-region-name&gt;]
                     [--os-token &lt;token&gt;] [--http-timeout &lt;seconds&gt;]
                     [--os-url &lt;url&gt;] [--insecure] [--config-file CONFIG_FILE]
                     &lt;subcommand&gt; ...</screen>
    <section>
      <title>Subcommands</title>
      <variablelist>
        <varlistentry>
          <term>
            <literal>probe-create</literal>
          </term>
          <listitem>
            <para>Create probe port - create port and interface within a network namespace.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>probe-list</literal>
          </term>
          <listitem>
            <para>List all probes.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>probe-clear</literal>
          </term>
          <listitem>
            <para>Clear all probes.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>probe-delete</literal>
          </term>
          <listitem>
            <para>Delete probe - delete port then delete the namespace.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>probe-exec</literal>
          </term>
          <listitem>
            <para>Execute commands in the namespace of the probe.</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>
            <literal>ping-all</literal>
          </term>
          <listitem>
            <para><literal>ping-all</literal> is an all-in-one command to ping all fixed IPs in a specified
                                network.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>neutron-debug optional arguments</title>
    <variablelist>
      <varlistentry>
        <term>
          <literal>--version</literal>
        </term>
        <listitem>
          <para>Show program’s version number and exit</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>-v, --verbose, --debug</literal>
        </term>
        <listitem>
          <para>Increase verbosity of output and show tracebacks on
                            errors. You can repeat this option.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>-q, --quiet</literal>
        </term>
        <listitem>
          <para>Suppress output except warnings and errors.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>-h, --help</literal>
        </term>
        <listitem>
          <para>Show this help message and exit</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>-r NUM, --retries NUM</literal>
        </term>
        <listitem>
          <para>How many times the request to the Neutron server
                            should be retried if it fails.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-service-type &lt;os-service-type&gt;</literal>
        </term>
        <listitem>
          <para>Defaults to env[OS_NETWORK_SERVICE_TYPE] or network.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-endpoint-type &lt;os-endpoint-type&gt;</literal>
        </term>
        <listitem>
          <para>Defaults to <literal>env[OS_ENDPOINT_TYPE]</literal> or public.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--service-type &lt;service-type&gt;</literal>
        </term>
        <listitem>
          <para>DEPRECATED! Use –os-service-type.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--endpoint-type &lt;endpoint-type&gt;</literal>
        </term>
        <listitem>
          <para>DEPRECATED! Use –os-endpoint-type.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-auth-strategy &lt;auth-strategy&gt;</literal>
        </term>
        <listitem>
          <para>DEPRECATED! Only keystone is supported.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>os-cloud &lt;cloud&gt;</literal>
        </term>
        <listitem>
          <para>Defaults to env[OS_CLOUD].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-auth-url &lt;auth-url&gt;</literal>
        </term>
        <listitem>
          <para>Authentication URL, defaults to env[OS_AUTH_URL].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-tenant-name &lt;auth-tenant-name&gt;</literal>
        </term>
        <listitem>
          <para>Authentication tenant name, defaults to
                            env[OS_TENANT_NAME].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-project-name &lt;auth-project-name&gt;</literal>
        </term>
        <listitem>
          <para>Another way to specify tenant name. This option is
                            mutually exclusive with –os-tenant-name. Defaults to
                            env[OS_PROJECT_NAME].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-tenant-id &lt;auth-tenant-id&gt;</literal>
        </term>
        <listitem>
          <para>Authentication tenant ID, defaults to
                            env[OS_TENANT_ID].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-project-id &lt;auth-project-id&gt;</literal>
        </term>
        <listitem>
          <para>Another way to specify tenant ID. This option is
                            mutually exclusive with –os-tenant-id. Defaults to
                            env[OS_PROJECT_ID].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-username &lt;auth-username&gt;</literal>
        </term>
        <listitem>
          <para>Authentication username, defaults to env[OS_USERNAME].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-user-id &lt;auth-user-id&gt;</literal>
        </term>
        <listitem>
          <para>Authentication user ID (Env: OS_USER_ID)</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-user-domain-id &lt;auth-user-domain-id&gt;</literal>
        </term>
        <listitem>
          <para>OpenStack user domain ID. Defaults to
                            env[OS_USER_DOMAIN_ID].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-user-domain-name &lt;auth-user-domain-name&gt;</literal>
        </term>
        <listitem>
          <para>OpenStack user domain name. Defaults to
                            env[OS_USER_DOMAIN_NAME].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-project-domain-id &lt;auth-project-domain-id&gt;</literal>
        </term>
        <listitem>
          <para>Defaults to env[OS_PROJECT_DOMAIN_ID].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-project-domain-name &lt;auth-project-domain-name&gt;</literal>
        </term>
        <listitem>
          <para>Defaults to env[OS_PROJECT_DOMAIN_NAME].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-cert &lt;certificate&gt;</literal>
        </term>
        <listitem>
          <para>Path of certificate file to use in SSL connection.
                            This file can optionally be prepended with the private
                            key. Defaults to env[OS_CERT].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-cacert &lt;ca-certificate&gt;</literal>
        </term>
        <listitem>
          <para>Specify a CA bundle file to use in verifying a TLS
                            (https) server certificate. Defaults to
                            env[OS_CACERT].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-key &lt;key&gt;</literal>
        </term>
        <listitem>
          <para>Path of client key to use in SSL connection. This
                            option is not necessary if your key is prepended to
                            your certificate file. Defaults to env[OS_KEY].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-password &lt;auth-password&gt;</literal>
        </term>
        <listitem>
          <para>Authentication password, defaults to env[OS_PASSWORD].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-region-name &lt;auth-region-name&gt;</literal>
        </term>
        <listitem>
          <para>Authentication region name, defaults to
                            env[OS_REGION_NAME].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-token &lt;token&gt;</literal>
        </term>
        <listitem>
          <para>Authentication token, defaults to env[OS_TOKEN].</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--http-timeout &lt;seconds&gt;</literal>
        </term>
        <listitem>
          <para>Timeout in seconds to wait for an HTTP response.
                            Defaults to env[OS_NETWORK_TIMEOUT] or None if not
                            specified.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--os-url &lt;url&gt;</literal>
        </term>
        <listitem>
          <para>Defaults to env[OS_URL]</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--insecure</literal>
        </term>
        <listitem>
          <para>Explicitly allow neutronclient to perform “insecure”
                            SSL (https) requests. The server’s certificate will
                            not be verified against any certificate authorities.
                            This option should be used with caution.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>
          <literal>--config-file CONFIG_FILE</literal>
        </term>
        <listitem>
          <para>Config file for interface driver (You may also use l3_agent.ini)</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
  <section>
    <title>neutron-debug probe-create command</title>
    <screen language="console">usage: neutron-debug probe-create NET</screen>
    <para>Create probe port - create port and interface,
                then place it into the created network namespace.</para>
    <section>
      <title>Positional arguments</title>
      <variablelist>
        <varlistentry>
          <term>
            <literal>NET ID</literal>
          </term>
          <listitem>
            <para>ID of the network in which the probe will be created.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>neutron-debug probe-list command</title>
    <screen language="console">usage: neutron-debug probe-list</screen>
    <para>List probes.</para>
  </section>
  <section>
    <title>neutron-debug probe-clear command</title>
    <screen language="console">usage: neutron-debug probe-clear</screen>
    <para>Clear all probes.</para>
  </section>
  <section>
    <title>neutron-debug probe-delete command</title>
    <screen language="console">usage: neutron-debug probe-delete &lt;port-id&gt;</screen>
    <para>Remove a probe.</para>
    <section>
      <title>Positional arguments</title>
      <variablelist>
        <varlistentry>
          <term>
            <literal>&lt;port-id&gt;</literal>
          </term>
          <listitem>
            <para>ID of the probe to delete.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>neutron-debug probe-exec command</title>
    <screen language="console">usage: neutron-debug probe-exec &lt;port-id&gt; &lt;command&gt;</screen>
    <para>Execute commands in the namespace of the probe</para>
  </section>
  <section>
    <title>neutron-debug ping-all command</title>
    <screen language="console">usage: neutron-debug ping-all &lt;port-id&gt; --timeout &lt;number&gt;</screen>
    <para>All-in-one command to ping all fixed IPs in a specified network.
                A probe creation is not needed for this command.
                A new probe is created automatically.
                It will, however, need to be deleted manually when it is no longer needed.
                When there are multiple networks, the newly created probe will be attached
                to a random network and thus the ping will take place from within that
                random network.</para>
    <section>
      <title>Positional arguments</title>
      <variablelist>
        <varlistentry>
          <term>
            <literal>&lt;port-id&gt;</literal>
          </term>
          <listitem>
            <para>ID of the port to use.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>Optional arguments</title>
      <variablelist>
        <varlistentry>
          <term>
            <literal>--timeout &lt;timeout in seconds&gt;</literal>
          </term>
          <listitem>
            <para>Optional ping timeout.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>
  <section>
    <title>neutron-debug example</title>
    <screen language="console">usage: neutron-debug create-probe &lt;NET_ID&gt;</screen>
    <para>Create a probe namespace within the network identified by <literal>NET_ID</literal>.
                The namespace will have the name of qprobe-&lt;UUID of the probe port&gt;</para>
    <note>
      <para>For the following examples to function, the security group rules
                    may need to be modified to allow the SSH (TCP port 22) or ping
                    (ICMP) traffic into network.</para>
    </note>
    <screen language="console">usage: neutron-debug probe-exec &lt;probe ID&gt; "ssh &lt;IP of instance&gt;"</screen>
    <para>SSH to an instance within the network.</para>
    <screen language="console">usage: neutron-debug ping-all &lt;network ID&gt;</screen>
    <para>Ping all instances on this network to verify they are responding.</para>
    <screen language="console"><?dbsuse-fo font-size="8pt"?>usage: neutron-debug probe-exec &lt;probe_ID&gt; dhcping &lt;VM_MAC address&gt; -s &lt;IP of DHCP server&gt;</screen>
    <para>Ping the DHCP server for this network using dhcping to verify it is working.</para>
  </section>
</section>
