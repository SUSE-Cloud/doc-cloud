<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Networking Option 2: Self-service networks</title>
  <para>Configure the Networking components on a <emphasis>compute</emphasis> node.</para>
  <section>
    <title>Configure the Linux bridge agent</title>
    <para>The Linux bridge agent builds layer-2 (bridging and switching) virtual
                networking infrastructure for instances and handles security groups.</para>
    <itemizedlist>
      <listitem>
        <para>Edit the <literal>/etc/neutron/plugins/ml2/linuxbridge_agent.ini</literal> file and
                        complete the following actions:</para>
        <itemizedlist>
          <listitem>
            <para>In the <literal>[linux_bridge]</literal> section, map the provider virtual network to the
                                provider physical network interface:</para>
            <screen language="ini">[linux_bridge]
physical_interface_mappings = provider:PROVIDER_INTERFACE_NAME</screen>
            <para>Replace <literal>PROVIDER_INTERFACE_NAME</literal> with the name of the underlying
                                provider physical network interface. See 
                                for more information.</para>
          </listitem>
          <listitem>
            <para>In the <literal>[vxlan]</literal> section, enable VXLAN overlay networks, configure the
                                IP address of the physical network interface that handles overlay
                                networks, and enable layer-2 population:</para>
            <screen language="ini">[vxlan]
enable_vxlan = true
local_ip = OVERLAY_INTERFACE_IP_ADDRESS
l2_population = true</screen>
            <para>Replace <literal>OVERLAY_INTERFACE_IP_ADDRESS</literal> with the IP address of the
                                underlying physical network interface that handles overlay networks. The
                                example architecture uses the management interface to tunnel traffic to
                                the other nodes. Therefore, replace <literal>OVERLAY_INTERFACE_IP_ADDRESS</literal> with
                                the management IP address of the compute node. See
                                 for more information.</para>
          </listitem>
          <listitem>
            <para>In the <literal>[securitygroup]</literal> section, enable security groups and
                                configure the Linux bridge iptables firewall driver:</para>
            <screen language="ini">[securitygroup]
# ...
enable_security_group = true
firewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver</screen>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
    <para>Return to <emphasis>Networking compute node configuration</emphasis>.</para>
  </section>
</section>
