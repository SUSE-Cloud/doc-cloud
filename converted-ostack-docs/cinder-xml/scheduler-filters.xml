<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Cinder Scheduler Filters</title>
  <section>
    <title>AvailabilityZoneFilter</title>
    <para>Filters Backends by availability zone.</para>
  </section>
  <section>
    <title>CapabilitiesFilter</title>
    <para>BackendFilter to work with resource (instance &amp; volume) type records.</para>
  </section>
  <section>
    <title>CapacityFilter</title>
    <para>Capacity filters based on volume backend’s capacity utilization.</para>
  </section>
  <section>
    <title>DifferentBackendFilter</title>
    <para>Schedule volume on a different back-end from a set of volumes.</para>
  </section>
  <section>
    <title>DriverFilter</title>
    <para>DriverFilter filters backend based on a ‘filter function’ and metrics.</para>
    <para>DriverFilter filters based on volume backend’s provided ‘filter function’
                and metrics.</para>
  </section>
  <section>
    <title>InstanceLocalityFilter</title>
    <para>Schedule volume on the same host as a given instance.</para>
    <para>This filter enables selection of a storage back-end located on the host
                where the instance’s hypervisor is running. This provides data locality:
                the instance and the volume are located on the same physical machine.</para>
    <para>In order to work:</para>
    <itemizedlist>
      <listitem>
        <para>The Extended Server Attributes extension needs to be active in Nova (this
                        is by default), so that the ‘OS-EXT-SRV-ATTR:host’ property is returned
                        when requesting instance info.</para>
      </listitem>
      <listitem>
        <para>Either an account with privileged rights for Nova must be configured in
                        Cinder configuration (configure a keystone authentication plugin in the
                        [nova] section), or the user making the call needs to have sufficient
                        rights (see ‘extended_server_attributes’ in Nova policy).</para>
      </listitem>
    </itemizedlist>
  </section>
  <section>
    <title>JsonFilter</title>
    <para>Backend filter for simple JSON-based grammar for selecting backends.</para>
  </section>
  <section>
    <title>RetryFilter</title>
    <para>Filter out previously attempted hosts</para>
    <para>A host passes this filter if it has not already been attempted for
                scheduling. The scheduler needs to add previously attempted hosts
                to the ‘retry’ key of filter_properties in order for this to work
                correctly. For example:</para>
    <screen>{
 'retry': {
           'backends': ['backend1', 'backend2'],
           'num_attempts': 3,
          }
}</screen>
  </section>
  <section>
    <title>SameBackendFilter</title>
    <para>Schedule volume on the same back-end as another volume.</para>
  </section>
</section>
