<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>No Auth barbican</title>
  <para>As of OpenStack Newton, barbican will default to using Keystone like every
            other OpenStack service for identity and access control. Nonetheless, sometimes
            it may be useful to run barbican without any authentication service for
            development purposes.</para>
  <para>To this end, <literal>barbican-api-paste.ini</literal> contains a filter pipeline
            without any authentication (no auth mode):</para>
  <screen language="ini"># Use this pipeline for barbican API - DEFAULT no authentication
[pipeline:barbican_api]
pipeline = unauthenticated-context apiapp</screen>
  <para>To enable this pipe line proceed as follows:</para>
  <procedure>
    <step>
      <para>Turn off any active instances of barbican</para>
    </step>
    <step>
      <para>Edit <literal>/etc/barbican/barbican-api-paste.ini</literal></para>
      <para>Change the pipeline <literal>/v1</literal> value from authenticated <literal>barbican-api-keystone</literal>
                    to the unauthenticated <literal>barbican_api</literal></para>
      <screen language="ini">[composite:main]
use = egg:Paste#urlmap
/: barbican_version
/v1: barbican_api</screen>
    </step>
  </procedure>
  <para>With every OpenStack service integrated with keystone, its API requires access
            token to retireve certain information and validate userâ€™s information and
            privileges. If you are running barbican in no auth mode, you have to specify
            project_id instead of an access token which was retrieved from the token
            instead. In case of API, replace <literal>'X-Auth-Token: $TOKEN'</literal> with
            <literal>'X-Project-Id: {project_id}'</literal> for every API request in .</para>
  <para>You can also find detailed explanation to run barbican client with an
            unauthenticated context
            <link xlink:href="http://docs.openstack.org/developer/python-barbicanclient/authentication.html#unauthenticated-context">here</link> and run barbican CLI in no auth mode
            <link xlink:href="http://docs.openstack.org/developer/python-barbicanclient/authentication.html#no-auth-mode">here</link>.</para>
</section>
