<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1" xml:id="orders-api-reference">
  <title>Orders API - Reference</title>
  <warning>
    <para>DEPRECATION WARNING: The Certificates Order resource has been deprecated
                and will be removed in the P release.</para>
  </warning>
  <section xml:id="get-orders">
    <title>GET /v1/orders</title>
    <para>Lists a project’s orders.</para>
    <para>The list of orders can be filtered by the parameters passed in via the URL.</para>
    <section xml:id="get-order-parameters">
      <title>Parameters</title>
      <informaltable>
        <tgroup cols="3">
          <colspec colname="c1" colwidth="10"/>
          <colspec colname="c2" colwidth="9"/>
          <colspec colname="c3" colwidth="64"/>
          <thead>
            <row>
              <entry>
                <para>Name</para>
              </entry>
              <entry>
                <para>Type</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>offset</para>
              </entry>
              <entry>
                <para>integer</para>
              </entry>
              <entry>
                <para>The starting index within the total list of the orders that
                                        you would like to retrieve. (Default is 0)</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>limit</para>
              </entry>
              <entry>
                <para>integer</para>
              </entry>
              <entry>
                <para>The maximum number of records to return (up to 100).
                                        (Default is 10)</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
    <section xml:id="get-orders-request">
      <title>Request:</title>
      <screen language="javascript">GET /v1/orders
Headers:
    Content-Type: application/json
    X-Auth-Token: {token}</screen>
    </section>
    <section xml:id="get-orders-response">
      <title>Response:</title>
      <screen language="none">200 Success

{
    "orders": [
    {
        "created": "2015-10-20T18:38:44",
        "creator_id": "40540f978fbd45c1af18910e3e02b63f",
        "meta": {
            "algorithm": "AES",
            "bit_length": 256,
            "expiration": null,
            "mode": "cbc",
            "name": "secretname",
            "payload_content_type": "application/octet-stream"
        },
        "order_ref": "http://localhost:9311/v1/orders/2284ba6f-f964-4de7-b61e-c413df5d1e47",
        "secret_ref": "http://localhost:9311/v1/secrets/15dcf8e4-3138-4360-be9f-fc4bc2e64a19",
        "status": "ACTIVE",
        "sub_status": "Unknown",
        "sub_status_message": "Unknown",
        "type": "key",
        "updated": "2015-10-20T18:38:44"
    },
    {
        "created": "2015-10-20T18:38:47",
        "creator_id": "40540f978fbd45c1af18910e3e02b63f",
        "meta": {
            "algorithm": "AES",
            "bit_length": 256,
            "expiration": null,
            "mode": "cbc",
            "name": "secretname",
            "payload_content_type": "application/octet-stream"
        },
        "order_ref": "http://localhost:9311/v1/orders/87b7169e-3aa2-4cb1-8800-b5aadf6babd1",
        "secret_ref": "http://localhost:9311/v1/secrets/80183f4b-c0de-4a94-91ad-6d55251acee2",
        "status": "ACTIVE",
        "sub_status": "Unknown",
        "sub_status_message": "Unknown",
        "type": "key",
        "updated": "2015-10-20T18:38:47"
    }
    ],
    "total": 2
}</screen>
    </section>
    <section xml:id="get-order-response-attributes">
      <title>Response Attributes</title>
      <informaltable>
        <tgroup cols="3">
          <colspec colname="c1" colwidth="10"/>
          <colspec colname="c2" colwidth="9"/>
          <colspec colname="c3" colwidth="62"/>
          <thead>
            <row>
              <entry>
                <para>Name</para>
              </entry>
              <entry>
                <para>Type</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>orders</para>
              </entry>
              <entry>
                <para>list</para>
              </entry>
              <entry>
                <para>Contains a list of dictionaries filled with order metadata.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>total</para>
              </entry>
              <entry>
                <para>integer</para>
              </entry>
              <entry>
                <para>The total number of orders available to the user.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>next</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>A HATEOS URL to retrieve the next set of objects based on
                                        the offset and limit parameters. This attribute is only
                                        available when the total number of objects is greater than
                                        offset and limit parameter combined.</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>previous</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>A HATEOS URL to retrieve the previous set of objects based
                                        on the offset and limit parameters. This attribute is only
                                        available when the request offset is greater than 0.</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
    <section xml:id="get-order-status-codes">
      <title>HTTP Status Codes</title>
      <informaltable>
        <tgroup cols="2">
          <colspec colname="c1" colwidth="6"/>
          <colspec colname="c2" colwidth="77"/>
          <thead>
            <row>
              <entry>
                <para>Code</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>200</para>
              </entry>
              <entry>
                <para>Successful Request</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>401</para>
              </entry>
              <entry>
                <para>Invalid X-Auth-Token or the token doesn’t have permissions to this resource</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
  </section>
  <section xml:id="post-orders">
    <title>POST /v1/orders</title>
    <para>Creates an order</para>
    <section xml:id="id1">
      <title>Parameters</title>
      <informaltable>
        <tgroup cols="4">
          <colspec colname="c1" colwidth="28"/>
          <colspec colname="c2" colwidth="9"/>
          <colspec colname="c3" colwidth="46"/>
          <colspec colname="c4" colwidth="12"/>
          <thead>
            <row>
              <entry>
                <para>Attribute Name</para>
              </entry>
              <entry>
                <para>Type</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
              <entry>
                <para>Default</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>type</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>The type of key to be generated. Valid types
                                        are key, asymmetric, and certificate</para>
              </entry>
              <entry>
                <para>None</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>meta</para>
              </entry>
              <entry>
                <para>dict</para>
              </entry>
              <entry>
                <para>Dictionary containing the secret metadata
                                        used to generate the secret.</para>
              </entry>
              <entry>
                <para>None</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
    <section xml:id="post-orders-request">
      <title>Request:</title>
      <screen language="javascript">POST /v1/orders
Headers:
    Content-Type: application/json
    X-Auth-Token: {token}

Content:
{
    "type":"key",
    "meta":
        {
            "name":"secretname",
            "algorithm": "AES",
            "bit_length": 256,
            "mode": "cbc",
            "payload_content_type":"application/octet-stream"
        }
}</screen>
    </section>
    <section xml:id="post-orders-response">
      <title>Response:</title>
      <screen language="none">202 Created

{
    "order_ref": "http://{barbican_host}/v1/orders/{order_uuid}"
}</screen>
    </section>
    <section xml:id="post-orders-response-attributes">
      <title>Response Attributes</title>
      <informaltable>
        <tgroup cols="3">
          <colspec colname="c1" colwidth="10"/>
          <colspec colname="c2" colwidth="9"/>
          <colspec colname="c3" colwidth="62"/>
          <thead>
            <row>
              <entry>
                <para>Name</para>
              </entry>
              <entry>
                <para>Type</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>order_ref</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Order reference</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
    <section xml:id="post-orders-status-codes">
      <title>HTTP Status Codes</title>
      <informaltable>
        <tgroup cols="2">
          <colspec colname="c1" colwidth="6"/>
          <colspec colname="c2" colwidth="77"/>
          <thead>
            <row>
              <entry>
                <para>Code</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>202</para>
              </entry>
              <entry>
                <para>Successfully created an order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>400</para>
              </entry>
              <entry>
                <para>Bad Request</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>401</para>
              </entry>
              <entry>
                <para>Invalid X-Auth-Token or the token doesn’t have permissions to this resource</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>415</para>
              </entry>
              <entry>
                <para>Unsupported media-type</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
  </section>
  <section xml:id="get-unique-order-metadata">
    <title>GET /v1/orders/{uuid}</title>
    <para>Retrieves an order’s metadata</para>
    <section xml:id="get-unique-order-request">
      <title>Request:</title>
      <screen language="javascript">GET /v1/orders/{order_uuid}
Headers:
    Accept: application/json
    X-Auth-Token: {token}</screen>
    </section>
    <section xml:id="id7">
      <title>Parameters</title>
      <para>None</para>
    </section>
    <section xml:id="get-unique-order-response">
      <title>Response:</title>
      <screen language="javascript">200 Success

{
    "created": "2015-10-20T18:49:02",
    "creator_id": "40540f978fbd45c1af18910e3e02b63f",
    "meta": {
        "algorithm": "AES",
        "bit_length": 256,
        "expiration": null,
        "mode": "cbc",
        "name": "secretname",
        "payload_content_type": "application/octet-stream"
    },
    "order_ref": "http://localhost:9311/v1/orders/5443d349-fe0c-4bfd-bd9d-99c4a9770638",
    "secret_ref": "http://localhost:9311/v1/secrets/16f8d4f3-d3dd-4160-a5bd-8e5095a42613",
    "status": "ACTIVE",
    "sub_status": "Unknown",
    "sub_status_message": "Unknown",
    "type": "key",
    "updated": "2015-10-20T18:49:02"
}</screen>
    </section>
    <section xml:id="get-unique-order-response-attributes">
      <title>Response Attributes</title>
      <informaltable>
        <tgroup cols="3">
          <colspec colname="c1" colwidth="20"/>
          <colspec colname="c2" colwidth="9"/>
          <colspec colname="c3" colwidth="52"/>
          <thead>
            <row>
              <entry>
                <para>Name</para>
              </entry>
              <entry>
                <para>Type</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>created</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Timestamp in ISO8601 format of when the order was
                                        created</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>creator_id</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Keystone Id of the user who created the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>meta</para>
              </entry>
              <entry>
                <para>dict</para>
              </entry>
              <entry>
                <para>Secret metadata used for informational purposes</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>order_ref</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Order href associated with the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>secret_ref</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Secret href associated with the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>status</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Current status of the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>sub_status</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Metadata associated with the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>sub_status_message</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Metadata associated with the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>type</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Indicates the type of order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>updated</para>
              </entry>
              <entry>
                <para>string</para>
              </entry>
              <entry>
                <para>Timestamp in ISO8601 format of the last time the
                                        order was updated.</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
    <section xml:id="get-unique-orders-status-codes">
      <title>HTTP Status Codes</title>
      <informaltable>
        <tgroup cols="2">
          <colspec colname="c1" colwidth="6"/>
          <colspec colname="c2" colwidth="77"/>
          <thead>
            <row>
              <entry>
                <para>Code</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>200</para>
              </entry>
              <entry>
                <para>Successfully retrieved the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>400</para>
              </entry>
              <entry>
                <para>Bad Request</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>401</para>
              </entry>
              <entry>
                <para>Invalid X-Auth-Token or the token doesn’t have permissions to this resource</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>404</para>
              </entry>
              <entry>
                <para>Not Found</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
  </section>
  <section xml:id="delete-unique-order">
    <title>DELETE /v1/orders/{uuid}</title>
    <para>Delete an order</para>
    <section xml:id="delete-order-request">
      <title>Request:</title>
      <screen language="javascript">DELETE /v1/orders/{order_uuid}
Headers:
    X-Auth-Token: {token}</screen>
    </section>
    <section xml:id="id12">
      <title>Parameters</title>
      <para>None</para>
    </section>
    <section xml:id="delete-order-response">
      <title>Response:</title>
      <screen language="javascript">204 Success</screen>
    </section>
    <section xml:id="delete-order-status-codes">
      <title>HTTP Status Codes</title>
      <informaltable>
        <tgroup cols="2">
          <colspec colname="c1" colwidth="6"/>
          <colspec colname="c2" colwidth="77"/>
          <thead>
            <row>
              <entry>
                <para>Code</para>
              </entry>
              <entry>
                <para>Description</para>
              </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry>
                <para>204</para>
              </entry>
              <entry>
                <para>Successfully deleted the order</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>400</para>
              </entry>
              <entry>
                <para>Bad Request</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>401</para>
              </entry>
              <entry>
                <para>Invalid X-Auth-Token or the token doesn’t have permissions to this resource</para>
              </entry>
            </row>
            <row>
              <entry>
                <para>404</para>
              </entry>
              <entry>
                <para>Not Found</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>
  </section>
</section>
