<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Installing API behind mod_wsgi</title>
  <procedure>
    <step>
      <para>Install the Apache Service:</para>
      <screen>Fedora 21/RHEL7/CentOS7:
  sudo yum install httpd

Fedora 22 (or higher):
  sudo dnf install httpd

Debian/Ubuntu:
  apt-get install apache2</screen>
    </step>
    <step>
      <para>Copy <literal>etc/apache2/watcher.conf</literal> under the apache sites:</para>
      <screen>Fedora/RHEL7/CentOS7:
  sudo cp etc/apache2/watcher /etc/httpd/conf.d/watcher.conf

Debian/Ubuntu:
  sudo cp etc/apache2/watcher /etc/apache2/sites-available/watcher.conf</screen>
    </step>
    <step>
      <para>Edit <literal>&lt;apache-configuration-dir&gt;/watcher.conf</literal> according to installation
                    and environment.</para>
      <itemizedlist>
        <listitem>
          <para>Modify the <literal>WSGIDaemonProcess</literal> directive to set the <literal>user</literal> and
                            <literal>group</literal> values to appropriate user on your server.</para>
        </listitem>
        <listitem>
          <para>Modify the <literal>WSGIScriptAlias</literal> directive to point to the
                            watcher/api/app.wsgi script.</para>
        </listitem>
        <listitem>
          <para>Modify the <literal>Directory</literal> directive to set the path to the Watcher API
                            code.</para>
        </listitem>
        <listitem>
          <para>Modify the <literal>ErrorLog and CustomLog</literal> to redirect the logs to the right
                            directory.</para>
        </listitem>
      </itemizedlist>
    </step>
    <step>
      <para>Enable the apache watcher site and reload:</para>
      <screen>Fedora/RHEL7/CentOS7:
  sudo systemctl reload httpd</screen>
      <variablelist>
        <varlistentry>
          <term>Debian/Ubuntu:</term>
          <listitem>
            <para>sudo a2ensite watcher
                                sudo service apache2 reload</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </step>
  </procedure>
</section>
