<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Guru Meditation Reports</title>
  <para>Watcher contains a mechanism whereby developers and system administrators can
            generate a report about the state of a running Watcher service. This report
            is called a <emphasis>Guru Meditation Report</emphasis> (<emphasis>GMR</emphasis> for short).</para>
  <section>
    <title>Generating a GMR</title>
    <para>A <emphasis>GMR</emphasis> can be generated by sending the <emphasis>USR2</emphasis> signal to any Watcher process
                with support (see below).  The <emphasis>GMR</emphasis> will then be outputted as standard error
                for that particular process.</para>
    <para>For example, suppose that <literal>watcher-api</literal> has process id <literal>8675</literal>, and was run
                with <literal>2&gt;/var/log/watcher/watcher-api-err.log</literal>.  Then, <literal>kill -USR2 8675</literal>
                will trigger the Guru Meditation report to be printed to
                <literal>/var/log/watcher/watcher-api-err.log</literal>.</para>
  </section>
  <section>
    <title>Structure of a GMR</title>
    <para>The <emphasis>GMR</emphasis> is designed to be extensible; any particular service may add its
                own sections.  However, the base <emphasis>GMR</emphasis> consists of several sections:</para>
    <variablelist>
      <varlistentry>
        <term>Package</term>
        <listitem>
          <para>Shows information about the package to which this process belongs, including
                            version informations.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Threads</term>
        <listitem>
          <para>Shows stack traces and thread ids for each of the threads within this
                            process.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Green Threads</term>
        <listitem>
          <para>Shows stack traces for each of the green threads within this process (green
                            threads donâ€™t have thread ids).</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Configuration</term>
        <listitem>
          <para>Lists all the configuration options currently accessible via the CONF object
                            for the current process.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Plugins</term>
        <listitem>
          <para>Lists all the plugins currently accessible by the Watcher service.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
</section>
