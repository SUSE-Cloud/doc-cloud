<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Finalize installation for Ubuntu and Debian</title>
  <note>
    <para>Default configuration files vary by distribution. You might need
                to add these sections and options rather than modifying existing
                sections and options. Also, an ellipsis (<literal>...</literal>) in the configuration
                snippets indicates potential default configuration options that you
                should retain.</para>
  </note>
  <para>This section applies to Ubuntu 14.04 (LTS) and Debian.</para>
  <procedure>
    <step>
      <para>Obtain the <literal>/etc/swift/swift.conf</literal> file from the Object
                    Storage source repository:</para>
      <screen language="console"><?dbsuse-fo font-size="8pt"?># curl -o /etc/swift/swift.conf \
  https://git.openstack.org/cgit/openstack/swift/plain/etc/swift.conf-sample?h=stable/pike</screen>
    </step>
    <step>
      <para>Edit the <literal>/etc/swift/swift.conf</literal> file and complete the following
                    actions:</para>
      <itemizedlist>
        <listitem>
          <para>In the <literal>[swift-hash]</literal> section, configure the hash path prefix and
                            suffix for your environment.</para>
          <screen language="none">[swift-hash]
...
swift_hash_path_suffix = HASH_PATH_SUFFIX
swift_hash_path_prefix = HASH_PATH_PREFIX</screen>
          <para>Replace HASH_PATH_PREFIX and HASH_PATH_SUFFIX with unique values.</para>
          <warning>
            <para>Keep these values secret and do not change or lose them.</para>
          </warning>
        </listitem>
        <listitem>
          <para>In the <literal>[storage-policy:0]</literal> section, configure the default
                            storage policy:</para>
          <screen language="none">[storage-policy:0]
...
name = Policy-0
default = yes</screen>
        </listitem>
      </itemizedlist>
    </step>
    <step>
      <para>Copy the <literal>swift.conf</literal> file to the <literal>/etc/swift</literal> directory on
                    each storage node and any additional nodes running the proxy service.</para>
    </step>
  </procedure>
  <procedure>
    <step>
      <para>On all nodes, ensure proper ownership of the configuration directory:</para>
      <screen language="console"># chown -R root:swift /etc/swift</screen>
    </step>
    <step>
      <para>On the controller node and any other nodes running the proxy service,
                    restart the Object Storage proxy service including its dependencies:</para>
      <screen language="console"># service memcached restart
# service swift-proxy restart</screen>
    </step>
    <step>
      <para>On the storage nodes, start the Object Storage services:</para>
      <screen language="console"># swift-init all start</screen>
      <note>
        <para>The storage node runs many Object Storage services and the
                        <command>swift-init</command> command makes them easier to manage.
                        You can ignore errors from services not running on the storage node.</para>
      </note>
    </step>
  </procedure>
</section>
