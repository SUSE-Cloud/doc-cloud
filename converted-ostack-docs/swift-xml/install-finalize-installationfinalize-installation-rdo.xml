<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Finalize installation for Red Hat Enterprise Linux and CentOS</title>
  <note>
    <para>Default configuration files vary by distribution. You might need
                to add these sections and options rather than modifying existing
                sections and options. Also, an ellipsis (<literal>...</literal>) in the configuration
                snippets indicates potential default configuration options that you
                should retain.</para>
  </note>
  <para>This section applies to Red Hat Enterprise Linux 7 and CentOS 7.</para>
  <procedure>
    <step>
      <para>Obtain the <literal>/etc/swift/swift.conf</literal> file from the Object
                    Storage source repository:</para>
      <screen language="console"><?dbsuse-fo font-size="8pt"?># curl -o /etc/swift/swift.conf \
  https://git.openstack.org/cgit/openstack/swift/plain/etc/swift.conf-sample?h=stable/pike</screen>
    </step>
    <step>
      <para>Edit the <literal>/etc/swift/swift.conf</literal> file and complete the following
                    actions:</para>
      <itemizedlist>
        <listitem>
          <para>In the <literal>[swift-hash]</literal> section, configure the hash path prefix and
                            suffix for your environment.</para>
          <screen language="none">[swift-hash]
...
swift_hash_path_suffix = HASH_PATH_SUFFIX
swift_hash_path_prefix = HASH_PATH_PREFIX</screen>
          <para>Replace HASH_PATH_PREFIX and HASH_PATH_SUFFIX with unique values.</para>
          <warning>
            <para>Keep these values secret and do not change or lose them.</para>
          </warning>
        </listitem>
        <listitem>
          <para>In the <literal>[storage-policy:0]</literal> section, configure the default
                            storage policy:</para>
          <screen language="none">[storage-policy:0]
...
name = Policy-0
default = yes</screen>
        </listitem>
      </itemizedlist>
    </step>
    <step>
      <para>Copy the <literal>swift.conf</literal> file to the <literal>/etc/swift</literal> directory on
                    each storage node and any additional nodes running the proxy service.</para>
    </step>
  </procedure>
  <procedure>
    <step>
      <para>On all nodes, ensure proper ownership of the configuration directory:</para>
      <screen language="console"># chown -R root:swift /etc/swift</screen>
    </step>
    <step>
      <para>On the controller node and any other nodes running the proxy service,
                    start the Object Storage proxy service including its dependencies and
                    configure them to start when the system boots:</para>
      <screen language="console"># systemctl enable openstack-swift-proxy.service memcached.service
# systemctl start openstack-swift-proxy.service memcached.service</screen>
    </step>
    <step>
      <para>On the storage nodes, start the Object Storage services and configure
                    them to start when the system boots:</para>
      <screen language="console"><?dbsuse-fo font-size="8pt"?># systemctl enable openstack-swift-account.service openstack-swift-account-auditor.service \
  openstack-swift-account-reaper.service openstack-swift-account-replicator.service
# systemctl start openstack-swift-account.service openstack-swift-account-auditor.service \
  openstack-swift-account-reaper.service openstack-swift-account-replicator.service
# systemctl enable openstack-swift-container.service \
  openstack-swift-container-auditor.service openstack-swift-container-replicator.service \
  openstack-swift-container-updater.service
# systemctl start openstack-swift-container.service \
  openstack-swift-container-auditor.service openstack-swift-container-replicator.service \
  openstack-swift-container-updater.service
# systemctl enable openstack-swift-object.service openstack-swift-object-auditor.service \
  openstack-swift-object-replicator.service openstack-swift-object-updater.service
# systemctl start openstack-swift-object.service openstack-swift-object-auditor.service \
  openstack-swift-object-replicator.service openstack-swift-object-updater.service</screen>
    </step>
  </procedure>
</section>
