<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:xi="http://www.w3.org/2001/XInclude" version="5.1">
  <title>Running the Tests</title>
  <para>Ceilometer includes an extensive set of automated unit tests which are
            run through <link xlink:href="https://tox.readthedocs.io/en/latest/">tox</link>.</para>
  <procedure>
    <step>
      <para>Install <literal>tox</literal>:</para>
      <screen>$ sudo pip install tox</screen>
    </step>
    <step>
      <para>Run the unit and code-style tests:</para>
      <screen>$ cd /opt/stack/ceilometer
$ tox -e py27,pep8</screen>
    </step>
  </procedure>
  <para>As tox is a wrapper around testr, it also accepts the same flags as testr.
            See the <link xlink:href="https://testrepository.readthedocs.org/en/latest/MANUAL.html">testr documentation</link> for details about these additional flags.</para>
  <para>Use a double hyphen to pass options to testr. For example, to run only tests
            under tests/unit/image:</para>
  <screen>$ tox -e py27 -- image</screen>
  <para>To debug tests (ie. break into pdb debugger), you can use ‘’debug’’ tox
            environment. Here’s an example, passing the name of a test since you’ll
            normally only want to run the test that hits your breakpoint:</para>
  <screen>$ tox -e debug ceilometer.tests.unit.test_bin</screen>
  <para>For reference, the <literal>debug</literal> tox environment implements the instructions
            here: <link xlink:href="https://wiki.openstack.org/wiki/Testr#Debugging_.28pdb.29_Tests"/></para>
</section>
